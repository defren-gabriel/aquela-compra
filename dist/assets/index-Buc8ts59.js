(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();var ad={exports:{}},Pa={},ld={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eg;function yw(){if(eg)return Ce;eg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),T=Symbol.iterator;function A(M){return M===null||typeof M!="object"?null:(M=T&&M[T]||M["@@iterator"],typeof M=="function"?M:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,j={};function O(M,K,fe){this.props=M,this.context=K,this.refs=j,this.updater=fe||V}O.prototype.isReactComponent={},O.prototype.setState=function(M,K){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,K,"setState")},O.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function H(){}H.prototype=O.prototype;function G(M,K,fe){this.props=M,this.context=K,this.refs=j,this.updater=fe||V}var ne=G.prototype=new H;ne.constructor=G,L(ne,O.prototype),ne.isPureReactComponent=!0;var he=Array.isArray,Se=Object.prototype.hasOwnProperty,we={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function I(M,K,fe){var Re,Ae={},De=null,be=null;if(K!=null)for(Re in K.ref!==void 0&&(be=K.ref),K.key!==void 0&&(De=""+K.key),K)Se.call(K,Re)&&!N.hasOwnProperty(Re)&&(Ae[Re]=K[Re]);var Fe=arguments.length-2;if(Fe===1)Ae.children=fe;else if(1<Fe){for(var qe=Array(Fe),_t=0;_t<Fe;_t++)qe[_t]=arguments[_t+2];Ae.children=qe}if(M&&M.defaultProps)for(Re in Fe=M.defaultProps,Fe)Ae[Re]===void 0&&(Ae[Re]=Fe[Re]);return{$$typeof:r,type:M,key:De,ref:be,props:Ae,_owner:we.current}}function R(M,K){return{$$typeof:r,type:M.type,key:K,ref:M.ref,props:M.props,_owner:M._owner}}function k(M){return typeof M=="object"&&M!==null&&M.$$typeof===r}function D(M){var K={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(fe){return K[fe]})}var b=/\/+/g;function C(M,K){return typeof M=="object"&&M!==null&&M.key!=null?D(""+M.key):K.toString(36)}function rt(M,K,fe,Re,Ae){var De=typeof M;(De==="undefined"||De==="boolean")&&(M=null);var be=!1;if(M===null)be=!0;else switch(De){case"string":case"number":be=!0;break;case"object":switch(M.$$typeof){case r:case e:be=!0}}if(be)return be=M,Ae=Ae(be),M=Re===""?"."+C(be,0):Re,he(Ae)?(fe="",M!=null&&(fe=M.replace(b,"$&/")+"/"),rt(Ae,K,fe,"",function(_t){return _t})):Ae!=null&&(k(Ae)&&(Ae=R(Ae,fe+(!Ae.key||be&&be.key===Ae.key?"":(""+Ae.key).replace(b,"$&/")+"/")+M)),K.push(Ae)),1;if(be=0,Re=Re===""?".":Re+":",he(M))for(var Fe=0;Fe<M.length;Fe++){De=M[Fe];var qe=Re+C(De,Fe);be+=rt(De,K,fe,qe,Ae)}else if(qe=A(M),typeof qe=="function")for(M=qe.call(M),Fe=0;!(De=M.next()).done;)De=De.value,qe=Re+C(De,Fe++),be+=rt(De,K,fe,qe,Ae);else if(De==="object")throw K=String(M),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.");return be}function xt(M,K,fe){if(M==null)return M;var Re=[],Ae=0;return rt(M,Re,"","",function(De){return K.call(fe,De,Ae++)}),Re}function Dt(M){if(M._status===-1){var K=M._result;K=K(),K.then(function(fe){(M._status===0||M._status===-1)&&(M._status=1,M._result=fe)},function(fe){(M._status===0||M._status===-1)&&(M._status=2,M._result=fe)}),M._status===-1&&(M._status=0,M._result=K)}if(M._status===1)return M._result.default;throw M._result}var ze={current:null},te={transition:null},me={ReactCurrentDispatcher:ze,ReactCurrentBatchConfig:te,ReactCurrentOwner:we};function se(){throw Error("act(...) is not supported in production builds of React.")}return Ce.Children={map:xt,forEach:function(M,K,fe){xt(M,function(){K.apply(this,arguments)},fe)},count:function(M){var K=0;return xt(M,function(){K++}),K},toArray:function(M){return xt(M,function(K){return K})||[]},only:function(M){if(!k(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},Ce.Component=O,Ce.Fragment=t,Ce.Profiler=o,Ce.PureComponent=G,Ce.StrictMode=s,Ce.Suspense=p,Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=me,Ce.act=se,Ce.cloneElement=function(M,K,fe){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var Re=L({},M.props),Ae=M.key,De=M.ref,be=M._owner;if(K!=null){if(K.ref!==void 0&&(De=K.ref,be=we.current),K.key!==void 0&&(Ae=""+K.key),M.type&&M.type.defaultProps)var Fe=M.type.defaultProps;for(qe in K)Se.call(K,qe)&&!N.hasOwnProperty(qe)&&(Re[qe]=K[qe]===void 0&&Fe!==void 0?Fe[qe]:K[qe])}var qe=arguments.length-2;if(qe===1)Re.children=fe;else if(1<qe){Fe=Array(qe);for(var _t=0;_t<qe;_t++)Fe[_t]=arguments[_t+2];Re.children=Fe}return{$$typeof:r,type:M.type,key:Ae,ref:De,props:Re,_owner:be}},Ce.createContext=function(M){return M={$$typeof:h,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:l,_context:M},M.Consumer=M},Ce.createElement=I,Ce.createFactory=function(M){var K=I.bind(null,M);return K.type=M,K},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(M){return{$$typeof:f,render:M}},Ce.isValidElement=k,Ce.lazy=function(M){return{$$typeof:E,_payload:{_status:-1,_result:M},_init:Dt}},Ce.memo=function(M,K){return{$$typeof:y,type:M,compare:K===void 0?null:K}},Ce.startTransition=function(M){var K=te.transition;te.transition={};try{M()}finally{te.transition=K}},Ce.unstable_act=se,Ce.useCallback=function(M,K){return ze.current.useCallback(M,K)},Ce.useContext=function(M){return ze.current.useContext(M)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(M){return ze.current.useDeferredValue(M)},Ce.useEffect=function(M,K){return ze.current.useEffect(M,K)},Ce.useId=function(){return ze.current.useId()},Ce.useImperativeHandle=function(M,K,fe){return ze.current.useImperativeHandle(M,K,fe)},Ce.useInsertionEffect=function(M,K){return ze.current.useInsertionEffect(M,K)},Ce.useLayoutEffect=function(M,K){return ze.current.useLayoutEffect(M,K)},Ce.useMemo=function(M,K){return ze.current.useMemo(M,K)},Ce.useReducer=function(M,K,fe){return ze.current.useReducer(M,K,fe)},Ce.useRef=function(M){return ze.current.useRef(M)},Ce.useState=function(M){return ze.current.useState(M)},Ce.useSyncExternalStore=function(M,K,fe){return ze.current.useSyncExternalStore(M,K,fe)},Ce.useTransition=function(){return ze.current.useTransition()},Ce.version="18.3.1",Ce}var tg;function Jd(){return tg||(tg=1,ld.exports=yw()),ld.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ng;function _w(){if(ng)return Pa;ng=1;var r=Jd(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(f,p,y){var E,T={},A=null,V=null;y!==void 0&&(A=""+y),p.key!==void 0&&(A=""+p.key),p.ref!==void 0&&(V=p.ref);for(E in p)s.call(p,E)&&!l.hasOwnProperty(E)&&(T[E]=p[E]);if(f&&f.defaultProps)for(E in p=f.defaultProps,p)T[E]===void 0&&(T[E]=p[E]);return{$$typeof:e,type:f,key:A,ref:V,props:T,_owner:o.current}}return Pa.Fragment=t,Pa.jsx=h,Pa.jsxs=h,Pa}var rg;function vw(){return rg||(rg=1,ad.exports=_w()),ad.exports}var ie=vw(),q=Jd(),Pu={},ud={exports:{}},Zt={},cd={exports:{}},hd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ig;function Ew(){return ig||(ig=1,function(r){function e(te,me){var se=te.length;te.push(me);e:for(;0<se;){var M=se-1>>>1,K=te[M];if(0<o(K,me))te[M]=me,te[se]=K,se=M;else break e}}function t(te){return te.length===0?null:te[0]}function s(te){if(te.length===0)return null;var me=te[0],se=te.pop();if(se!==me){te[0]=se;e:for(var M=0,K=te.length,fe=K>>>1;M<fe;){var Re=2*(M+1)-1,Ae=te[Re],De=Re+1,be=te[De];if(0>o(Ae,se))De<K&&0>o(be,Ae)?(te[M]=be,te[De]=se,M=De):(te[M]=Ae,te[Re]=se,M=Re);else if(De<K&&0>o(be,se))te[M]=be,te[De]=se,M=De;else break e}}return me}function o(te,me){var se=te.sortIndex-me.sortIndex;return se!==0?se:te.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,f=h.now();r.unstable_now=function(){return h.now()-f}}var p=[],y=[],E=1,T=null,A=3,V=!1,L=!1,j=!1,O=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ne(te){for(var me=t(y);me!==null;){if(me.callback===null)s(y);else if(me.startTime<=te)s(y),me.sortIndex=me.expirationTime,e(p,me);else break;me=t(y)}}function he(te){if(j=!1,ne(te),!L)if(t(p)!==null)L=!0,Dt(Se);else{var me=t(y);me!==null&&ze(he,me.startTime-te)}}function Se(te,me){L=!1,j&&(j=!1,H(I),I=-1),V=!0;var se=A;try{for(ne(me),T=t(p);T!==null&&(!(T.expirationTime>me)||te&&!D());){var M=T.callback;if(typeof M=="function"){T.callback=null,A=T.priorityLevel;var K=M(T.expirationTime<=me);me=r.unstable_now(),typeof K=="function"?T.callback=K:T===t(p)&&s(p),ne(me)}else s(p);T=t(p)}if(T!==null)var fe=!0;else{var Re=t(y);Re!==null&&ze(he,Re.startTime-me),fe=!1}return fe}finally{T=null,A=se,V=!1}}var we=!1,N=null,I=-1,R=5,k=-1;function D(){return!(r.unstable_now()-k<R)}function b(){if(N!==null){var te=r.unstable_now();k=te;var me=!0;try{me=N(!0,te)}finally{me?C():(we=!1,N=null)}}else we=!1}var C;if(typeof G=="function")C=function(){G(b)};else if(typeof MessageChannel<"u"){var rt=new MessageChannel,xt=rt.port2;rt.port1.onmessage=b,C=function(){xt.postMessage(null)}}else C=function(){O(b,0)};function Dt(te){N=te,we||(we=!0,C())}function ze(te,me){I=O(function(){te(r.unstable_now())},me)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(te){te.callback=null},r.unstable_continueExecution=function(){L||V||(L=!0,Dt(Se))},r.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<te?Math.floor(1e3/te):5},r.unstable_getCurrentPriorityLevel=function(){return A},r.unstable_getFirstCallbackNode=function(){return t(p)},r.unstable_next=function(te){switch(A){case 1:case 2:case 3:var me=3;break;default:me=A}var se=A;A=me;try{return te()}finally{A=se}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(te,me){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var se=A;A=te;try{return me()}finally{A=se}},r.unstable_scheduleCallback=function(te,me,se){var M=r.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?M+se:M):se=M,te){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=se+K,te={id:E++,callback:me,priorityLevel:te,startTime:se,expirationTime:K,sortIndex:-1},se>M?(te.sortIndex=se,e(y,te),t(p)===null&&te===t(y)&&(j?(H(I),I=-1):j=!0,ze(he,se-M))):(te.sortIndex=K,e(p,te),L||V||(L=!0,Dt(Se))),te},r.unstable_shouldYield=D,r.unstable_wrapCallback=function(te){var me=A;return function(){var se=A;A=me;try{return te.apply(this,arguments)}finally{A=se}}}}(hd)),hd}var sg;function ww(){return sg||(sg=1,cd.exports=Ew()),cd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var og;function Tw(){if(og)return Zt;og=1;var r=Jd(),e=ww();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(n,i){h(n,i),h(n+"Capture",i)}function h(n,i){for(o[n]=i,n=0;n<i.length;n++)s.add(i[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},T={};function A(n){return p.call(T,n)?!0:p.call(E,n)?!1:y.test(n)?T[n]=!0:(E[n]=!0,!1)}function V(n,i,a,c){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function L(n,i,a,c){if(i===null||typeof i>"u"||V(n,i,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function j(n,i,a,c,d,g,v){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=i,this.sanitizeURL=g,this.removeEmptyString=v}var O={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){O[n]=new j(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];O[i]=new j(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){O[n]=new j(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){O[n]=new j(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){O[n]=new j(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){O[n]=new j(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){O[n]=new j(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){O[n]=new j(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){O[n]=new j(n,5,!1,n.toLowerCase(),null,!1,!1)});var H=/[\-:]([a-z])/g;function G(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(H,G);O[i]=new j(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(H,G);O[i]=new j(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(H,G);O[i]=new j(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){O[n]=new j(n,1,!1,n.toLowerCase(),null,!1,!1)}),O.xlinkHref=new j("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){O[n]=new j(n,1,!1,n.toLowerCase(),null,!0,!0)});function ne(n,i,a,c){var d=O.hasOwnProperty(i)?O[i]:null;(d!==null?d.type!==0:c||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(L(i,a,d,c)&&(a=null),c||d===null?A(i)&&(a===null?n.removeAttribute(i):n.setAttribute(i,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(i=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(i):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,i,a):n.setAttribute(i,a))))}var he=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Se=Symbol.for("react.element"),we=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),D=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),rt=Symbol.for("react.suspense_list"),xt=Symbol.for("react.memo"),Dt=Symbol.for("react.lazy"),ze=Symbol.for("react.offscreen"),te=Symbol.iterator;function me(n){return n===null||typeof n!="object"?null:(n=te&&n[te]||n["@@iterator"],typeof n=="function"?n:null)}var se=Object.assign,M;function K(n){if(M===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);M=i&&i[1]||""}return`
`+M+n}var fe=!1;function Re(n,i){if(!n||fe)return"";fe=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(B){var c=B}Reflect.construct(n,[],i)}else{try{i.call()}catch(B){c=B}n.call(i.prototype)}else{try{throw Error()}catch(B){c=B}n()}}catch(B){if(B&&c&&typeof B.stack=="string"){for(var d=B.stack.split(`
`),g=c.stack.split(`
`),v=d.length-1,S=g.length-1;1<=v&&0<=S&&d[v]!==g[S];)S--;for(;1<=v&&0<=S;v--,S--)if(d[v]!==g[S]){if(v!==1||S!==1)do if(v--,S--,0>S||d[v]!==g[S]){var P=`
`+d[v].replace(" at new "," at ");return n.displayName&&P.includes("<anonymous>")&&(P=P.replace("<anonymous>",n.displayName)),P}while(1<=v&&0<=S);break}}}finally{fe=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?K(n):""}function Ae(n){switch(n.tag){case 5:return K(n.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return n=Re(n.type,!1),n;case 11:return n=Re(n.type.render,!1),n;case 1:return n=Re(n.type,!0),n;default:return""}}function De(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case N:return"Fragment";case we:return"Portal";case R:return"Profiler";case I:return"StrictMode";case C:return"Suspense";case rt:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case D:return(n.displayName||"Context")+".Consumer";case k:return(n._context.displayName||"Context")+".Provider";case b:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case xt:return i=n.displayName||null,i!==null?i:De(n.type)||"Memo";case Dt:i=n._payload,n=n._init;try{return De(n(i))}catch{}}return null}function be(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return De(i);case 8:return i===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Fe(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function qe(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function _t(n){var i=qe(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),c=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,g=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return d.call(this)},set:function(v){c=""+v,g.call(this,v)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(v){c=""+v},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function ar(n){n._valueTracker||(n._valueTracker=_t(n))}function ms(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),c="";return n&&(c=qe(n)?n.checked?"true":"false":n.value),n=c,n!==a?(i.setValue(n),!0):!1}function Mr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Ci(n,i){var a=i.checked;return se({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function gs(n,i){var a=i.defaultValue==null?"":i.defaultValue,c=i.checked!=null?i.checked:i.defaultChecked;a=Fe(i.value!=null?i.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Lo(n,i){i=i.checked,i!=null&&ne(n,"checked",i,!1)}function Oo(n,i){Lo(n,i);var a=Fe(i.value),c=i.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?ys(n,i.type,a):i.hasOwnProperty("defaultValue")&&ys(n,i.type,Fe(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function fl(n,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var c=i.type;if(!(c!=="submit"&&c!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,a||i===n.value||(n.value=i),n.defaultValue=i}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function ys(n,i,a){(i!=="number"||Mr(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var lr=Array.isArray;function ur(n,i,a,c){if(n=n.options,i){i={};for(var d=0;d<a.length;d++)i["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=i.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Fe(a),i=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}i!==null||n[d].disabled||(i=n[d])}i!==null&&(i.selected=!0)}}function Mo(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return se({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function _s(n,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(lr(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}n._wrapperState={initialValue:Fe(a)}}function vs(n,i){var a=Fe(i.value),c=Fe(i.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),i.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function bo(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function ht(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dt(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?ht(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var cr,Fo=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(i,a,c,d)})}:n}(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(cr=cr||document.createElement("div"),cr.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=cr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function br(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var Pi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ki=["Webkit","ms","Moz","O"];Object.keys(Pi).forEach(function(n){ki.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),Pi[i]=Pi[n]})});function Uo(n,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||Pi.hasOwnProperty(n)&&Pi[n]?(""+i).trim():i+"px"}function jo(n,i){n=n.style;for(var a in i)if(i.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=Uo(a,i[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var zo=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bo(n,i){if(i){if(zo[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function $o(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ni=null;function Es(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ws=null,cn=null,zn=null;function Ts(n){if(n=fa(n)){if(typeof ws!="function")throw Error(t(280));var i=n.stateNode;i&&(i=$l(i),ws(n.stateNode,n.type,i))}}function Bn(n){cn?zn?zn.push(n):zn=[n]:cn=n}function qo(){if(cn){var n=cn,i=zn;if(zn=cn=null,Ts(n),i)for(n=0;n<i.length;n++)Ts(i[n])}}function xi(n,i){return n(i)}function Ho(){}var hr=!1;function Wo(n,i,a){if(hr)return n(i,a);hr=!0;try{return xi(n,i,a)}finally{hr=!1,(cn!==null||zn!==null)&&(Ho(),qo())}}function it(n,i){var a=n.stateNode;if(a===null)return null;var c=$l(a);if(c===null)return null;a=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var Is=!1;if(f)try{var Tn={};Object.defineProperty(Tn,"passive",{get:function(){Is=!0}}),window.addEventListener("test",Tn,Tn),window.removeEventListener("test",Tn,Tn)}catch{Is=!1}function Di(n,i,a,c,d,g,v,S,P){var B=Array.prototype.slice.call(arguments,3);try{i.apply(a,B)}catch(X){this.onError(X)}}var Vi=!1,Ss=null,In=!1,Ko=null,Oc={onError:function(n){Vi=!0,Ss=n}};function Rs(n,i,a,c,d,g,v,S,P){Vi=!1,Ss=null,Di.apply(Oc,arguments)}function pl(n,i,a,c,d,g,v,S,P){if(Rs.apply(this,arguments),Vi){if(Vi){var B=Ss;Vi=!1,Ss=null}else throw Error(t(198));In||(In=!0,Ko=B)}}function Sn(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,i.flags&4098&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function Li(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function Rn(n){if(Sn(n)!==n)throw Error(t(188))}function ml(n){var i=n.alternate;if(!i){if(i=Sn(n),i===null)throw Error(t(188));return i!==n?null:n}for(var a=n,c=i;;){var d=a.return;if(d===null)break;var g=d.alternate;if(g===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===a)return Rn(d),n;if(g===c)return Rn(d),i;g=g.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=g;else{for(var v=!1,S=d.child;S;){if(S===a){v=!0,a=d,c=g;break}if(S===c){v=!0,c=d,a=g;break}S=S.sibling}if(!v){for(S=g.child;S;){if(S===a){v=!0,a=g,c=d;break}if(S===c){v=!0,c=g,a=d;break}S=S.sibling}if(!v)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:i}function Go(n){return n=ml(n),n!==null?As(n):null}function As(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=As(n);if(i!==null)return i;n=n.sibling}return null}var Cs=e.unstable_scheduleCallback,Qo=e.unstable_cancelCallback,gl=e.unstable_shouldYield,Mc=e.unstable_requestPaint,He=e.unstable_now,yl=e.unstable_getCurrentPriorityLevel,Oi=e.unstable_ImmediatePriority,Fr=e.unstable_UserBlockingPriority,hn=e.unstable_NormalPriority,Yo=e.unstable_LowPriority,_l=e.unstable_IdlePriority,Mi=null,tn=null;function vl(n){if(tn&&typeof tn.onCommitFiberRoot=="function")try{tn.onCommitFiberRoot(Mi,n,void 0,(n.current.flags&128)===128)}catch{}}var Bt=Math.clz32?Math.clz32:wl,Xo=Math.log,El=Math.LN2;function wl(n){return n>>>=0,n===0?32:31-(Xo(n)/El|0)|0}var Ps=64,ks=4194304;function Ur(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function bi(n,i){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,g=n.pingedLanes,v=a&268435455;if(v!==0){var S=v&~d;S!==0?c=Ur(S):(g&=v,g!==0&&(c=Ur(g)))}else v=a&~d,v!==0?c=Ur(v):g!==0&&(c=Ur(g));if(c===0)return 0;if(i!==0&&i!==c&&!(i&d)&&(d=c&-c,g=i&-i,d>=g||d===16&&(g&4194240)!==0))return i;if(c&4&&(c|=a&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=c;0<i;)a=31-Bt(i),d=1<<a,c|=n[a],i&=~d;return c}function bc(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dr(n,i){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,g=n.pendingLanes;0<g;){var v=31-Bt(g),S=1<<v,P=d[v];P===-1?(!(S&a)||S&c)&&(d[v]=bc(S,i)):P<=i&&(n.expiredLanes|=S),g&=~S}}function nn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Fi(){var n=Ps;return Ps<<=1,!(Ps&4194240)&&(Ps=64),n}function jr(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function zr(n,i,a){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-Bt(i),n[i]=a}function $e(n,i){var a=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-Bt(a),g=1<<d;i[d]=0,c[d]=-1,n[d]=-1,a&=~g}}function Br(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var c=31-Bt(a),d=1<<c;d&i|n[c]&i&&(n[c]|=i),a&=~d}}var Ne=0;function $r(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var Tl,Ns,Il,Sl,Rl,Jo=!1,$n=[],St=null,An=null,Cn=null,qr=new Map,dn=new Map,qn=[],Fc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Al(n,i){switch(n){case"focusin":case"focusout":St=null;break;case"dragenter":case"dragleave":An=null;break;case"mouseover":case"mouseout":Cn=null;break;case"pointerover":case"pointerout":qr.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":dn.delete(i.pointerId)}}function Wt(n,i,a,c,d,g){return n===null||n.nativeEvent!==g?(n={blockedOn:i,domEventName:a,eventSystemFlags:c,nativeEvent:g,targetContainers:[d]},i!==null&&(i=fa(i),i!==null&&Ns(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),n)}function Uc(n,i,a,c,d){switch(i){case"focusin":return St=Wt(St,n,i,a,c,d),!0;case"dragenter":return An=Wt(An,n,i,a,c,d),!0;case"mouseover":return Cn=Wt(Cn,n,i,a,c,d),!0;case"pointerover":var g=d.pointerId;return qr.set(g,Wt(qr.get(g)||null,n,i,a,c,d)),!0;case"gotpointercapture":return g=d.pointerId,dn.set(g,Wt(dn.get(g)||null,n,i,a,c,d)),!0}return!1}function Cl(n){var i=$i(n.target);if(i!==null){var a=Sn(i);if(a!==null){if(i=a.tag,i===13){if(i=Li(a),i!==null){n.blockedOn=i,Rl(n.priority,function(){Il(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function fr(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=xs(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Ni=c,a.target.dispatchEvent(c),Ni=null}else return i=fa(a),i!==null&&Ns(i),n.blockedOn=a,!1;i.shift()}return!0}function Ui(n,i,a){fr(n)&&a.delete(i)}function Pl(){Jo=!1,St!==null&&fr(St)&&(St=null),An!==null&&fr(An)&&(An=null),Cn!==null&&fr(Cn)&&(Cn=null),qr.forEach(Ui),dn.forEach(Ui)}function Pn(n,i){n.blockedOn===i&&(n.blockedOn=null,Jo||(Jo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Pl)))}function kn(n){function i(d){return Pn(d,n)}if(0<$n.length){Pn($n[0],n);for(var a=1;a<$n.length;a++){var c=$n[a];c.blockedOn===n&&(c.blockedOn=null)}}for(St!==null&&Pn(St,n),An!==null&&Pn(An,n),Cn!==null&&Pn(Cn,n),qr.forEach(i),dn.forEach(i),a=0;a<qn.length;a++)c=qn[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<qn.length&&(a=qn[0],a.blockedOn===null);)Cl(a),a.blockedOn===null&&qn.shift()}var pr=he.ReactCurrentBatchConfig,Hr=!0;function Ye(n,i,a,c){var d=Ne,g=pr.transition;pr.transition=null;try{Ne=1,Zo(n,i,a,c)}finally{Ne=d,pr.transition=g}}function jc(n,i,a,c){var d=Ne,g=pr.transition;pr.transition=null;try{Ne=4,Zo(n,i,a,c)}finally{Ne=d,pr.transition=g}}function Zo(n,i,a,c){if(Hr){var d=xs(n,i,a,c);if(d===null)Xc(n,i,c,ji,a),Al(n,c);else if(Uc(d,n,i,a,c))c.stopPropagation();else if(Al(n,c),i&4&&-1<Fc.indexOf(n)){for(;d!==null;){var g=fa(d);if(g!==null&&Tl(g),g=xs(n,i,a,c),g===null&&Xc(n,i,c,ji,a),g===d)break;d=g}d!==null&&c.stopPropagation()}else Xc(n,i,c,null,a)}}var ji=null;function xs(n,i,a,c){if(ji=null,n=Es(c),n=$i(n),n!==null)if(i=Sn(n),i===null)n=null;else if(a=i.tag,a===13){if(n=Li(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return ji=n,null}function ea(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yl()){case Oi:return 1;case Fr:return 4;case hn:case Yo:return 16;case _l:return 536870912;default:return 16}default:return 16}}var rn=null,Ds=null,Kt=null;function ta(){if(Kt)return Kt;var n,i=Ds,a=i.length,c,d="value"in rn?rn.value:rn.textContent,g=d.length;for(n=0;n<a&&i[n]===d[n];n++);var v=a-n;for(c=1;c<=v&&i[a-c]===d[g-c];c++);return Kt=d.slice(n,1<c?1-c:void 0)}function Vs(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Hn(){return!0}function na(){return!1}function Rt(n){function i(a,c,d,g,v){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=g,this.target=v,this.currentTarget=null;for(var S in n)n.hasOwnProperty(S)&&(a=n[S],this[S]=a?a(g):g[S]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Hn:na,this.isPropagationStopped=na,this}return se(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Hn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Hn)},persist:function(){},isPersistent:Hn}),i}var Nn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ls=Rt(Nn),Wn=se({},Nn,{view:0,detail:0}),zc=Rt(Wn),Os,mr,Wr,zi=se({},Wn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kn,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Wr&&(Wr&&n.type==="mousemove"?(Os=n.screenX-Wr.screenX,mr=n.screenY-Wr.screenY):mr=Os=0,Wr=n),Os)},movementY:function(n){return"movementY"in n?n.movementY:mr}}),Ms=Rt(zi),ra=se({},zi,{dataTransfer:0}),kl=Rt(ra),bs=se({},Wn,{relatedTarget:0}),Fs=Rt(bs),Nl=se({},Nn,{animationName:0,elapsedTime:0,pseudoElement:0}),gr=Rt(Nl),xl=se({},Nn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Dl=Rt(xl),Vl=se({},Nn,{data:0}),ia=Rt(Vl),Us={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$t={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ll={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ol(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Ll[n])?!!i[n]:!1}function Kn(){return Ol}var u=se({},Wn,{key:function(n){if(n.key){var i=Us[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Vs(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?$t[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kn,charCode:function(n){return n.type==="keypress"?Vs(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Vs(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),m=Rt(u),_=se({},zi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),w=Rt(_),F=se({},Wn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kn}),$=Rt(F),ee=se({},Nn,{propertyName:0,elapsedTime:0,pseudoElement:0}),je=Rt(ee),ft=se({},zi,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Ve=Rt(ft),vt=[9,13,27,32],at=f&&"CompositionEvent"in window,fn=null;f&&"documentMode"in document&&(fn=document.documentMode);var sn=f&&"TextEvent"in window&&!fn,Bi=f&&(!at||fn&&8<fn&&11>=fn),js=" ",Gf=!1;function Qf(n,i){switch(n){case"keyup":return vt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yf(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var zs=!1;function mE(n,i){switch(n){case"compositionend":return Yf(i);case"keypress":return i.which!==32?null:(Gf=!0,js);case"textInput":return n=i.data,n===js&&Gf?null:n;default:return null}}function gE(n,i){if(zs)return n==="compositionend"||!at&&Qf(n,i)?(n=ta(),Kt=Ds=rn=null,zs=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Bi&&i.locale!=="ko"?null:i.data;default:return null}}var yE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xf(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!yE[n.type]:i==="textarea"}function Jf(n,i,a,c){Bn(c),i=jl(i,"onChange"),0<i.length&&(a=new Ls("onChange","change",null,a,c),n.push({event:a,listeners:i}))}var sa=null,oa=null;function _E(n){gp(n,0)}function Ml(n){var i=Ws(n);if(ms(i))return n}function vE(n,i){if(n==="change")return i}var Zf=!1;if(f){var Bc;if(f){var $c="oninput"in document;if(!$c){var ep=document.createElement("div");ep.setAttribute("oninput","return;"),$c=typeof ep.oninput=="function"}Bc=$c}else Bc=!1;Zf=Bc&&(!document.documentMode||9<document.documentMode)}function tp(){sa&&(sa.detachEvent("onpropertychange",np),oa=sa=null)}function np(n){if(n.propertyName==="value"&&Ml(oa)){var i=[];Jf(i,oa,n,Es(n)),Wo(_E,i)}}function EE(n,i,a){n==="focusin"?(tp(),sa=i,oa=a,sa.attachEvent("onpropertychange",np)):n==="focusout"&&tp()}function wE(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ml(oa)}function TE(n,i){if(n==="click")return Ml(i)}function IE(n,i){if(n==="input"||n==="change")return Ml(i)}function SE(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var xn=typeof Object.is=="function"?Object.is:SE;function aa(n,i){if(xn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),c=Object.keys(i);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!p.call(i,d)||!xn(n[d],i[d]))return!1}return!0}function rp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function ip(n,i){var a=rp(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=i&&c>=i)return{node:a,offset:i-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=rp(a)}}function sp(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?sp(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function op(){for(var n=window,i=Mr();i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=Mr(n.document)}return i}function qc(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function RE(n){var i=op(),a=n.focusedElem,c=n.selectionRange;if(i!==a&&a&&a.ownerDocument&&sp(a.ownerDocument.documentElement,a)){if(c!==null&&qc(a)){if(i=c.start,n=c.end,n===void 0&&(n=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(n,a.value.length);else if(n=(i=a.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,g=Math.min(c.start,d);c=c.end===void 0?g:Math.min(c.end,d),!n.extend&&g>c&&(d=c,c=g,g=d),d=ip(a,g);var v=ip(a,c);d&&v&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==v.node||n.focusOffset!==v.offset)&&(i=i.createRange(),i.setStart(d.node,d.offset),n.removeAllRanges(),g>c?(n.addRange(i),n.extend(v.node,v.offset)):(i.setEnd(v.node,v.offset),n.addRange(i)))}}for(i=[],n=a;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)n=i[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var AE=f&&"documentMode"in document&&11>=document.documentMode,Bs=null,Hc=null,la=null,Wc=!1;function ap(n,i,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Wc||Bs==null||Bs!==Mr(c)||(c=Bs,"selectionStart"in c&&qc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),la&&aa(la,c)||(la=c,c=jl(Hc,"onSelect"),0<c.length&&(i=new Ls("onSelect","select",null,i,a),n.push({event:i,listeners:c}),i.target=Bs)))}function bl(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var $s={animationend:bl("Animation","AnimationEnd"),animationiteration:bl("Animation","AnimationIteration"),animationstart:bl("Animation","AnimationStart"),transitionend:bl("Transition","TransitionEnd")},Kc={},lp={};f&&(lp=document.createElement("div").style,"AnimationEvent"in window||(delete $s.animationend.animation,delete $s.animationiteration.animation,delete $s.animationstart.animation),"TransitionEvent"in window||delete $s.transitionend.transition);function Fl(n){if(Kc[n])return Kc[n];if(!$s[n])return n;var i=$s[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in lp)return Kc[n]=i[a];return n}var up=Fl("animationend"),cp=Fl("animationiteration"),hp=Fl("animationstart"),dp=Fl("transitionend"),fp=new Map,pp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Kr(n,i){fp.set(n,i),l(i,[n])}for(var Gc=0;Gc<pp.length;Gc++){var Qc=pp[Gc],CE=Qc.toLowerCase(),PE=Qc[0].toUpperCase()+Qc.slice(1);Kr(CE,"on"+PE)}Kr(up,"onAnimationEnd"),Kr(cp,"onAnimationIteration"),Kr(hp,"onAnimationStart"),Kr("dblclick","onDoubleClick"),Kr("focusin","onFocus"),Kr("focusout","onBlur"),Kr(dp,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ua="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kE=new Set("cancel close invalid load scroll toggle".split(" ").concat(ua));function mp(n,i,a){var c=n.type||"unknown-event";n.currentTarget=a,pl(c,i,void 0,n),n.currentTarget=null}function gp(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var g=void 0;if(i)for(var v=c.length-1;0<=v;v--){var S=c[v],P=S.instance,B=S.currentTarget;if(S=S.listener,P!==g&&d.isPropagationStopped())break e;mp(d,S,B),g=P}else for(v=0;v<c.length;v++){if(S=c[v],P=S.instance,B=S.currentTarget,S=S.listener,P!==g&&d.isPropagationStopped())break e;mp(d,S,B),g=P}}}if(In)throw n=Ko,In=!1,Ko=null,n}function Ke(n,i){var a=i[rh];a===void 0&&(a=i[rh]=new Set);var c=n+"__bubble";a.has(c)||(yp(i,n,2,!1),a.add(c))}function Yc(n,i,a){var c=0;i&&(c|=4),yp(a,n,c,i)}var Ul="_reactListening"+Math.random().toString(36).slice(2);function ca(n){if(!n[Ul]){n[Ul]=!0,s.forEach(function(a){a!=="selectionchange"&&(kE.has(a)||Yc(a,!1,n),Yc(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Ul]||(i[Ul]=!0,Yc("selectionchange",!1,i))}}function yp(n,i,a,c){switch(ea(i)){case 1:var d=Ye;break;case 4:d=jc;break;default:d=Zo}a=d.bind(null,i,a,n),d=void 0,!Is||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(i,a,{capture:!0,passive:d}):n.addEventListener(i,a,!0):d!==void 0?n.addEventListener(i,a,{passive:d}):n.addEventListener(i,a,!1)}function Xc(n,i,a,c,d){var g=c;if(!(i&1)&&!(i&2)&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var S=c.stateNode.containerInfo;if(S===d||S.nodeType===8&&S.parentNode===d)break;if(v===4)for(v=c.return;v!==null;){var P=v.tag;if((P===3||P===4)&&(P=v.stateNode.containerInfo,P===d||P.nodeType===8&&P.parentNode===d))return;v=v.return}for(;S!==null;){if(v=$i(S),v===null)return;if(P=v.tag,P===5||P===6){c=g=v;continue e}S=S.parentNode}}c=c.return}Wo(function(){var B=g,X=Es(a),J=[];e:{var Y=fp.get(n);if(Y!==void 0){var re=Ls,le=n;switch(n){case"keypress":if(Vs(a)===0)break e;case"keydown":case"keyup":re=m;break;case"focusin":le="focus",re=Fs;break;case"focusout":le="blur",re=Fs;break;case"beforeblur":case"afterblur":re=Fs;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=Ms;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=kl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=$;break;case up:case cp:case hp:re=gr;break;case dp:re=je;break;case"scroll":re=zc;break;case"wheel":re=Ve;break;case"copy":case"cut":case"paste":re=Dl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=w}var ue=(i&4)!==0,st=!ue&&n==="scroll",U=ue?Y!==null?Y+"Capture":null:Y;ue=[];for(var x=B,z;x!==null;){z=x;var Z=z.stateNode;if(z.tag===5&&Z!==null&&(z=Z,U!==null&&(Z=it(x,U),Z!=null&&ue.push(ha(x,Z,z)))),st)break;x=x.return}0<ue.length&&(Y=new re(Y,le,null,a,X),J.push({event:Y,listeners:ue}))}}if(!(i&7)){e:{if(Y=n==="mouseover"||n==="pointerover",re=n==="mouseout"||n==="pointerout",Y&&a!==Ni&&(le=a.relatedTarget||a.fromElement)&&($i(le)||le[yr]))break e;if((re||Y)&&(Y=X.window===X?X:(Y=X.ownerDocument)?Y.defaultView||Y.parentWindow:window,re?(le=a.relatedTarget||a.toElement,re=B,le=le?$i(le):null,le!==null&&(st=Sn(le),le!==st||le.tag!==5&&le.tag!==6)&&(le=null)):(re=null,le=B),re!==le)){if(ue=Ms,Z="onMouseLeave",U="onMouseEnter",x="mouse",(n==="pointerout"||n==="pointerover")&&(ue=w,Z="onPointerLeave",U="onPointerEnter",x="pointer"),st=re==null?Y:Ws(re),z=le==null?Y:Ws(le),Y=new ue(Z,x+"leave",re,a,X),Y.target=st,Y.relatedTarget=z,Z=null,$i(X)===B&&(ue=new ue(U,x+"enter",le,a,X),ue.target=z,ue.relatedTarget=st,Z=ue),st=Z,re&&le)t:{for(ue=re,U=le,x=0,z=ue;z;z=qs(z))x++;for(z=0,Z=U;Z;Z=qs(Z))z++;for(;0<x-z;)ue=qs(ue),x--;for(;0<z-x;)U=qs(U),z--;for(;x--;){if(ue===U||U!==null&&ue===U.alternate)break t;ue=qs(ue),U=qs(U)}ue=null}else ue=null;re!==null&&_p(J,Y,re,ue,!1),le!==null&&st!==null&&_p(J,st,le,ue,!0)}}e:{if(Y=B?Ws(B):window,re=Y.nodeName&&Y.nodeName.toLowerCase(),re==="select"||re==="input"&&Y.type==="file")var de=vE;else if(Xf(Y))if(Zf)de=IE;else{de=wE;var ge=EE}else(re=Y.nodeName)&&re.toLowerCase()==="input"&&(Y.type==="checkbox"||Y.type==="radio")&&(de=TE);if(de&&(de=de(n,B))){Jf(J,de,a,X);break e}ge&&ge(n,Y,B),n==="focusout"&&(ge=Y._wrapperState)&&ge.controlled&&Y.type==="number"&&ys(Y,"number",Y.value)}switch(ge=B?Ws(B):window,n){case"focusin":(Xf(ge)||ge.contentEditable==="true")&&(Bs=ge,Hc=B,la=null);break;case"focusout":la=Hc=Bs=null;break;case"mousedown":Wc=!0;break;case"contextmenu":case"mouseup":case"dragend":Wc=!1,ap(J,a,X);break;case"selectionchange":if(AE)break;case"keydown":case"keyup":ap(J,a,X)}var ye;if(at)e:{switch(n){case"compositionstart":var ve="onCompositionStart";break e;case"compositionend":ve="onCompositionEnd";break e;case"compositionupdate":ve="onCompositionUpdate";break e}ve=void 0}else zs?Qf(n,a)&&(ve="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(ve="onCompositionStart");ve&&(Bi&&a.locale!=="ko"&&(zs||ve!=="onCompositionStart"?ve==="onCompositionEnd"&&zs&&(ye=ta()):(rn=X,Ds="value"in rn?rn.value:rn.textContent,zs=!0)),ge=jl(B,ve),0<ge.length&&(ve=new ia(ve,n,null,a,X),J.push({event:ve,listeners:ge}),ye?ve.data=ye:(ye=Yf(a),ye!==null&&(ve.data=ye)))),(ye=sn?mE(n,a):gE(n,a))&&(B=jl(B,"onBeforeInput"),0<B.length&&(X=new ia("onBeforeInput","beforeinput",null,a,X),J.push({event:X,listeners:B}),X.data=ye))}gp(J,i)})}function ha(n,i,a){return{instance:n,listener:i,currentTarget:a}}function jl(n,i){for(var a=i+"Capture",c=[];n!==null;){var d=n,g=d.stateNode;d.tag===5&&g!==null&&(d=g,g=it(n,a),g!=null&&c.unshift(ha(n,g,d)),g=it(n,i),g!=null&&c.push(ha(n,g,d))),n=n.return}return c}function qs(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function _p(n,i,a,c,d){for(var g=i._reactName,v=[];a!==null&&a!==c;){var S=a,P=S.alternate,B=S.stateNode;if(P!==null&&P===c)break;S.tag===5&&B!==null&&(S=B,d?(P=it(a,g),P!=null&&v.unshift(ha(a,P,S))):d||(P=it(a,g),P!=null&&v.push(ha(a,P,S)))),a=a.return}v.length!==0&&n.push({event:i,listeners:v})}var NE=/\r\n?/g,xE=/\u0000|\uFFFD/g;function vp(n){return(typeof n=="string"?n:""+n).replace(NE,`
`).replace(xE,"")}function zl(n,i,a){if(i=vp(i),vp(n)!==i&&a)throw Error(t(425))}function Bl(){}var Jc=null,Zc=null;function eh(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var th=typeof setTimeout=="function"?setTimeout:void 0,DE=typeof clearTimeout=="function"?clearTimeout:void 0,Ep=typeof Promise=="function"?Promise:void 0,VE=typeof queueMicrotask=="function"?queueMicrotask:typeof Ep<"u"?function(n){return Ep.resolve(null).then(n).catch(LE)}:th;function LE(n){setTimeout(function(){throw n})}function nh(n,i){var a=i,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),kn(i);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);kn(i)}function Gr(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function wp(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}var Hs=Math.random().toString(36).slice(2),Gn="__reactFiber$"+Hs,da="__reactProps$"+Hs,yr="__reactContainer$"+Hs,rh="__reactEvents$"+Hs,OE="__reactListeners$"+Hs,ME="__reactHandles$"+Hs;function $i(n){var i=n[Gn];if(i)return i;for(var a=n.parentNode;a;){if(i=a[yr]||a[Gn]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=wp(n);n!==null;){if(a=n[Gn])return a;n=wp(n)}return i}n=a,a=n.parentNode}return null}function fa(n){return n=n[Gn]||n[yr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ws(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function $l(n){return n[da]||null}var ih=[],Ks=-1;function Qr(n){return{current:n}}function Ge(n){0>Ks||(n.current=ih[Ks],ih[Ks]=null,Ks--)}function We(n,i){Ks++,ih[Ks]=n.current,n.current=i}var Yr={},Vt=Qr(Yr),Gt=Qr(!1),qi=Yr;function Gs(n,i){var a=n.type.contextTypes;if(!a)return Yr;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===i)return c.__reactInternalMemoizedMaskedChildContext;var d={},g;for(g in a)d[g]=i[g];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=d),d}function Qt(n){return n=n.childContextTypes,n!=null}function ql(){Ge(Gt),Ge(Vt)}function Tp(n,i,a){if(Vt.current!==Yr)throw Error(t(168));We(Vt,i),We(Gt,a)}function Ip(n,i,a){var c=n.stateNode;if(i=i.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in i))throw Error(t(108,be(n)||"Unknown",d));return se({},a,c)}function Hl(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Yr,qi=Vt.current,We(Vt,n),We(Gt,Gt.current),!0}function Sp(n,i,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=Ip(n,i,qi),c.__reactInternalMemoizedMergedChildContext=n,Ge(Gt),Ge(Vt),We(Vt,n)):Ge(Gt),We(Gt,a)}var _r=null,Wl=!1,sh=!1;function Rp(n){_r===null?_r=[n]:_r.push(n)}function bE(n){Wl=!0,Rp(n)}function Xr(){if(!sh&&_r!==null){sh=!0;var n=0,i=Ne;try{var a=_r;for(Ne=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}_r=null,Wl=!1}catch(d){throw _r!==null&&(_r=_r.slice(n+1)),Cs(Oi,Xr),d}finally{Ne=i,sh=!1}}return null}var Qs=[],Ys=0,Kl=null,Gl=0,pn=[],mn=0,Hi=null,vr=1,Er="";function Wi(n,i){Qs[Ys++]=Gl,Qs[Ys++]=Kl,Kl=n,Gl=i}function Ap(n,i,a){pn[mn++]=vr,pn[mn++]=Er,pn[mn++]=Hi,Hi=n;var c=vr;n=Er;var d=32-Bt(c)-1;c&=~(1<<d),a+=1;var g=32-Bt(i)+d;if(30<g){var v=d-d%5;g=(c&(1<<v)-1).toString(32),c>>=v,d-=v,vr=1<<32-Bt(i)+d|a<<d|c,Er=g+n}else vr=1<<g|a<<d|c,Er=n}function oh(n){n.return!==null&&(Wi(n,1),Ap(n,1,0))}function ah(n){for(;n===Kl;)Kl=Qs[--Ys],Qs[Ys]=null,Gl=Qs[--Ys],Qs[Ys]=null;for(;n===Hi;)Hi=pn[--mn],pn[mn]=null,Er=pn[--mn],pn[mn]=null,vr=pn[--mn],pn[mn]=null}var on=null,an=null,Xe=!1,Dn=null;function Cp(n,i){var a=vn(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=n,i=n.deletions,i===null?(n.deletions=[a],n.flags|=16):i.push(a)}function Pp(n,i){switch(n.tag){case 5:var a=n.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,on=n,an=Gr(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,on=n,an=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=Hi!==null?{id:vr,overflow:Er}:null,n.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=vn(18,null,null,0),a.stateNode=i,a.return=n,n.child=a,on=n,an=null,!0):!1;default:return!1}}function lh(n){return(n.mode&1)!==0&&(n.flags&128)===0}function uh(n){if(Xe){var i=an;if(i){var a=i;if(!Pp(n,i)){if(lh(n))throw Error(t(418));i=Gr(a.nextSibling);var c=on;i&&Pp(n,i)?Cp(c,a):(n.flags=n.flags&-4097|2,Xe=!1,on=n)}}else{if(lh(n))throw Error(t(418));n.flags=n.flags&-4097|2,Xe=!1,on=n}}}function kp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;on=n}function Ql(n){if(n!==on)return!1;if(!Xe)return kp(n),Xe=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!eh(n.type,n.memoizedProps)),i&&(i=an)){if(lh(n))throw Np(),Error(t(418));for(;i;)Cp(n,i),i=Gr(i.nextSibling)}if(kp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(i===0){an=Gr(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}n=n.nextSibling}an=null}}else an=on?Gr(n.stateNode.nextSibling):null;return!0}function Np(){for(var n=an;n;)n=Gr(n.nextSibling)}function Xs(){an=on=null,Xe=!1}function ch(n){Dn===null?Dn=[n]:Dn.push(n)}var FE=he.ReactCurrentBatchConfig;function pa(n,i,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,g=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===g?i.ref:(i=function(v){var S=d.refs;v===null?delete S[g]:S[g]=v},i._stringRef=g,i)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function Yl(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function xp(n){var i=n._init;return i(n._payload)}function Dp(n){function i(U,x){if(n){var z=U.deletions;z===null?(U.deletions=[x],U.flags|=16):z.push(x)}}function a(U,x){if(!n)return null;for(;x!==null;)i(U,x),x=x.sibling;return null}function c(U,x){for(U=new Map;x!==null;)x.key!==null?U.set(x.key,x):U.set(x.index,x),x=x.sibling;return U}function d(U,x){return U=si(U,x),U.index=0,U.sibling=null,U}function g(U,x,z){return U.index=z,n?(z=U.alternate,z!==null?(z=z.index,z<x?(U.flags|=2,x):z):(U.flags|=2,x)):(U.flags|=1048576,x)}function v(U){return n&&U.alternate===null&&(U.flags|=2),U}function S(U,x,z,Z){return x===null||x.tag!==6?(x=td(z,U.mode,Z),x.return=U,x):(x=d(x,z),x.return=U,x)}function P(U,x,z,Z){var de=z.type;return de===N?X(U,x,z.props.children,Z,z.key):x!==null&&(x.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===Dt&&xp(de)===x.type)?(Z=d(x,z.props),Z.ref=pa(U,x,z),Z.return=U,Z):(Z=Eu(z.type,z.key,z.props,null,U.mode,Z),Z.ref=pa(U,x,z),Z.return=U,Z)}function B(U,x,z,Z){return x===null||x.tag!==4||x.stateNode.containerInfo!==z.containerInfo||x.stateNode.implementation!==z.implementation?(x=nd(z,U.mode,Z),x.return=U,x):(x=d(x,z.children||[]),x.return=U,x)}function X(U,x,z,Z,de){return x===null||x.tag!==7?(x=es(z,U.mode,Z,de),x.return=U,x):(x=d(x,z),x.return=U,x)}function J(U,x,z){if(typeof x=="string"&&x!==""||typeof x=="number")return x=td(""+x,U.mode,z),x.return=U,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Se:return z=Eu(x.type,x.key,x.props,null,U.mode,z),z.ref=pa(U,null,x),z.return=U,z;case we:return x=nd(x,U.mode,z),x.return=U,x;case Dt:var Z=x._init;return J(U,Z(x._payload),z)}if(lr(x)||me(x))return x=es(x,U.mode,z,null),x.return=U,x;Yl(U,x)}return null}function Y(U,x,z,Z){var de=x!==null?x.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return de!==null?null:S(U,x,""+z,Z);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case Se:return z.key===de?P(U,x,z,Z):null;case we:return z.key===de?B(U,x,z,Z):null;case Dt:return de=z._init,Y(U,x,de(z._payload),Z)}if(lr(z)||me(z))return de!==null?null:X(U,x,z,Z,null);Yl(U,z)}return null}function re(U,x,z,Z,de){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return U=U.get(z)||null,S(x,U,""+Z,de);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case Se:return U=U.get(Z.key===null?z:Z.key)||null,P(x,U,Z,de);case we:return U=U.get(Z.key===null?z:Z.key)||null,B(x,U,Z,de);case Dt:var ge=Z._init;return re(U,x,z,ge(Z._payload),de)}if(lr(Z)||me(Z))return U=U.get(z)||null,X(x,U,Z,de,null);Yl(x,Z)}return null}function le(U,x,z,Z){for(var de=null,ge=null,ye=x,ve=x=0,Tt=null;ye!==null&&ve<z.length;ve++){ye.index>ve?(Tt=ye,ye=null):Tt=ye.sibling;var Me=Y(U,ye,z[ve],Z);if(Me===null){ye===null&&(ye=Tt);break}n&&ye&&Me.alternate===null&&i(U,ye),x=g(Me,x,ve),ge===null?de=Me:ge.sibling=Me,ge=Me,ye=Tt}if(ve===z.length)return a(U,ye),Xe&&Wi(U,ve),de;if(ye===null){for(;ve<z.length;ve++)ye=J(U,z[ve],Z),ye!==null&&(x=g(ye,x,ve),ge===null?de=ye:ge.sibling=ye,ge=ye);return Xe&&Wi(U,ve),de}for(ye=c(U,ye);ve<z.length;ve++)Tt=re(ye,U,ve,z[ve],Z),Tt!==null&&(n&&Tt.alternate!==null&&ye.delete(Tt.key===null?ve:Tt.key),x=g(Tt,x,ve),ge===null?de=Tt:ge.sibling=Tt,ge=Tt);return n&&ye.forEach(function(oi){return i(U,oi)}),Xe&&Wi(U,ve),de}function ue(U,x,z,Z){var de=me(z);if(typeof de!="function")throw Error(t(150));if(z=de.call(z),z==null)throw Error(t(151));for(var ge=de=null,ye=x,ve=x=0,Tt=null,Me=z.next();ye!==null&&!Me.done;ve++,Me=z.next()){ye.index>ve?(Tt=ye,ye=null):Tt=ye.sibling;var oi=Y(U,ye,Me.value,Z);if(oi===null){ye===null&&(ye=Tt);break}n&&ye&&oi.alternate===null&&i(U,ye),x=g(oi,x,ve),ge===null?de=oi:ge.sibling=oi,ge=oi,ye=Tt}if(Me.done)return a(U,ye),Xe&&Wi(U,ve),de;if(ye===null){for(;!Me.done;ve++,Me=z.next())Me=J(U,Me.value,Z),Me!==null&&(x=g(Me,x,ve),ge===null?de=Me:ge.sibling=Me,ge=Me);return Xe&&Wi(U,ve),de}for(ye=c(U,ye);!Me.done;ve++,Me=z.next())Me=re(ye,U,ve,Me.value,Z),Me!==null&&(n&&Me.alternate!==null&&ye.delete(Me.key===null?ve:Me.key),x=g(Me,x,ve),ge===null?de=Me:ge.sibling=Me,ge=Me);return n&&ye.forEach(function(gw){return i(U,gw)}),Xe&&Wi(U,ve),de}function st(U,x,z,Z){if(typeof z=="object"&&z!==null&&z.type===N&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case Se:e:{for(var de=z.key,ge=x;ge!==null;){if(ge.key===de){if(de=z.type,de===N){if(ge.tag===7){a(U,ge.sibling),x=d(ge,z.props.children),x.return=U,U=x;break e}}else if(ge.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===Dt&&xp(de)===ge.type){a(U,ge.sibling),x=d(ge,z.props),x.ref=pa(U,ge,z),x.return=U,U=x;break e}a(U,ge);break}else i(U,ge);ge=ge.sibling}z.type===N?(x=es(z.props.children,U.mode,Z,z.key),x.return=U,U=x):(Z=Eu(z.type,z.key,z.props,null,U.mode,Z),Z.ref=pa(U,x,z),Z.return=U,U=Z)}return v(U);case we:e:{for(ge=z.key;x!==null;){if(x.key===ge)if(x.tag===4&&x.stateNode.containerInfo===z.containerInfo&&x.stateNode.implementation===z.implementation){a(U,x.sibling),x=d(x,z.children||[]),x.return=U,U=x;break e}else{a(U,x);break}else i(U,x);x=x.sibling}x=nd(z,U.mode,Z),x.return=U,U=x}return v(U);case Dt:return ge=z._init,st(U,x,ge(z._payload),Z)}if(lr(z))return le(U,x,z,Z);if(me(z))return ue(U,x,z,Z);Yl(U,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,x!==null&&x.tag===6?(a(U,x.sibling),x=d(x,z),x.return=U,U=x):(a(U,x),x=td(z,U.mode,Z),x.return=U,U=x),v(U)):a(U,x)}return st}var Js=Dp(!0),Vp=Dp(!1),Xl=Qr(null),Jl=null,Zs=null,hh=null;function dh(){hh=Zs=Jl=null}function fh(n){var i=Xl.current;Ge(Xl),n._currentValue=i}function ph(n,i,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===a)break;n=n.return}}function eo(n,i){Jl=n,hh=Zs=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&i&&(Yt=!0),n.firstContext=null)}function gn(n){var i=n._currentValue;if(hh!==n)if(n={context:n,memoizedValue:i,next:null},Zs===null){if(Jl===null)throw Error(t(308));Zs=n,Jl.dependencies={lanes:0,firstContext:n}}else Zs=Zs.next=n;return i}var Ki=null;function mh(n){Ki===null?Ki=[n]:Ki.push(n)}function Lp(n,i,a,c){var d=i.interleaved;return d===null?(a.next=a,mh(i)):(a.next=d.next,d.next=a),i.interleaved=a,wr(n,c)}function wr(n,i){n.lanes|=i;var a=n.alternate;for(a!==null&&(a.lanes|=i),a=n,n=n.return;n!==null;)n.childLanes|=i,a=n.alternate,a!==null&&(a.childLanes|=i),a=n,n=n.return;return a.tag===3?a.stateNode:null}var Jr=!1;function gh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Op(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Tr(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function Zr(n,i,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,Oe&2){var d=c.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),c.pending=i,wr(n,a)}return d=c.interleaved,d===null?(i.next=i,mh(c)):(i.next=d.next,d.next=i),c.interleaved=i,wr(n,a)}function Zl(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,Br(n,a)}}function Mp(n,i){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var v={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?d=g=v:g=g.next=v,a=a.next}while(a!==null);g===null?d=g=i:g=g.next=i}else d=g=i;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}function eu(n,i,a,c){var d=n.updateQueue;Jr=!1;var g=d.firstBaseUpdate,v=d.lastBaseUpdate,S=d.shared.pending;if(S!==null){d.shared.pending=null;var P=S,B=P.next;P.next=null,v===null?g=B:v.next=B,v=P;var X=n.alternate;X!==null&&(X=X.updateQueue,S=X.lastBaseUpdate,S!==v&&(S===null?X.firstBaseUpdate=B:S.next=B,X.lastBaseUpdate=P))}if(g!==null){var J=d.baseState;v=0,X=B=P=null,S=g;do{var Y=S.lane,re=S.eventTime;if((c&Y)===Y){X!==null&&(X=X.next={eventTime:re,lane:0,tag:S.tag,payload:S.payload,callback:S.callback,next:null});e:{var le=n,ue=S;switch(Y=i,re=a,ue.tag){case 1:if(le=ue.payload,typeof le=="function"){J=le.call(re,J,Y);break e}J=le;break e;case 3:le.flags=le.flags&-65537|128;case 0:if(le=ue.payload,Y=typeof le=="function"?le.call(re,J,Y):le,Y==null)break e;J=se({},J,Y);break e;case 2:Jr=!0}}S.callback!==null&&S.lane!==0&&(n.flags|=64,Y=d.effects,Y===null?d.effects=[S]:Y.push(S))}else re={eventTime:re,lane:Y,tag:S.tag,payload:S.payload,callback:S.callback,next:null},X===null?(B=X=re,P=J):X=X.next=re,v|=Y;if(S=S.next,S===null){if(S=d.shared.pending,S===null)break;Y=S,S=Y.next,Y.next=null,d.lastBaseUpdate=Y,d.shared.pending=null}}while(!0);if(X===null&&(P=J),d.baseState=P,d.firstBaseUpdate=B,d.lastBaseUpdate=X,i=d.shared.interleaved,i!==null){d=i;do v|=d.lane,d=d.next;while(d!==i)}else g===null&&(d.shared.lanes=0);Yi|=v,n.lanes=v,n.memoizedState=J}}function bp(n,i,a){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var c=n[i],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var ma={},Qn=Qr(ma),ga=Qr(ma),ya=Qr(ma);function Gi(n){if(n===ma)throw Error(t(174));return n}function yh(n,i){switch(We(ya,i),We(ga,n),We(Qn,ma),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:dt(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=dt(i,n)}Ge(Qn),We(Qn,i)}function to(){Ge(Qn),Ge(ga),Ge(ya)}function Fp(n){Gi(ya.current);var i=Gi(Qn.current),a=dt(i,n.type);i!==a&&(We(ga,n),We(Qn,a))}function _h(n){ga.current===n&&(Ge(Qn),Ge(ga))}var Je=Qr(0);function tu(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if(i.flags&128)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var vh=[];function Eh(){for(var n=0;n<vh.length;n++)vh[n]._workInProgressVersionPrimary=null;vh.length=0}var nu=he.ReactCurrentDispatcher,wh=he.ReactCurrentBatchConfig,Qi=0,Ze=null,pt=null,Et=null,ru=!1,_a=!1,va=0,UE=0;function Lt(){throw Error(t(321))}function Th(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!xn(n[a],i[a]))return!1;return!0}function Ih(n,i,a,c,d,g){if(Qi=g,Ze=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,nu.current=n===null||n.memoizedState===null?$E:qE,n=a(c,d),_a){g=0;do{if(_a=!1,va=0,25<=g)throw Error(t(301));g+=1,Et=pt=null,i.updateQueue=null,nu.current=HE,n=a(c,d)}while(_a)}if(nu.current=ou,i=pt!==null&&pt.next!==null,Qi=0,Et=pt=Ze=null,ru=!1,i)throw Error(t(300));return n}function Sh(){var n=va!==0;return va=0,n}function Yn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Et===null?Ze.memoizedState=Et=n:Et=Et.next=n,Et}function yn(){if(pt===null){var n=Ze.alternate;n=n!==null?n.memoizedState:null}else n=pt.next;var i=Et===null?Ze.memoizedState:Et.next;if(i!==null)Et=i,pt=n;else{if(n===null)throw Error(t(310));pt=n,n={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},Et===null?Ze.memoizedState=Et=n:Et=Et.next=n}return Et}function Ea(n,i){return typeof i=="function"?i(n):i}function Rh(n){var i=yn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=pt,d=c.baseQueue,g=a.pending;if(g!==null){if(d!==null){var v=d.next;d.next=g.next,g.next=v}c.baseQueue=d=g,a.pending=null}if(d!==null){g=d.next,c=c.baseState;var S=v=null,P=null,B=g;do{var X=B.lane;if((Qi&X)===X)P!==null&&(P=P.next={lane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),c=B.hasEagerState?B.eagerState:n(c,B.action);else{var J={lane:X,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null};P===null?(S=P=J,v=c):P=P.next=J,Ze.lanes|=X,Yi|=X}B=B.next}while(B!==null&&B!==g);P===null?v=c:P.next=S,xn(c,i.memoizedState)||(Yt=!0),i.memoizedState=c,i.baseState=v,i.baseQueue=P,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do g=d.lane,Ze.lanes|=g,Yi|=g,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function Ah(n){var i=yn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,g=i.memoizedState;if(d!==null){a.pending=null;var v=d=d.next;do g=n(g,v.action),v=v.next;while(v!==d);xn(g,i.memoizedState)||(Yt=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),a.lastRenderedState=g}return[g,c]}function Up(){}function jp(n,i){var a=Ze,c=yn(),d=i(),g=!xn(c.memoizedState,d);if(g&&(c.memoizedState=d,Yt=!0),c=c.queue,Ch($p.bind(null,a,c,n),[n]),c.getSnapshot!==i||g||Et!==null&&Et.memoizedState.tag&1){if(a.flags|=2048,wa(9,Bp.bind(null,a,c,d,i),void 0,null),wt===null)throw Error(t(349));Qi&30||zp(a,i,d)}return d}function zp(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=Ze.updateQueue,i===null?(i={lastEffect:null,stores:null},Ze.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function Bp(n,i,a,c){i.value=a,i.getSnapshot=c,qp(i)&&Hp(n)}function $p(n,i,a){return a(function(){qp(i)&&Hp(n)})}function qp(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!xn(n,a)}catch{return!0}}function Hp(n){var i=wr(n,1);i!==null&&Mn(i,n,1,-1)}function Wp(n){var i=Yn();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ea,lastRenderedState:n},i.queue=n,n=n.dispatch=BE.bind(null,Ze,n),[i.memoizedState,n]}function wa(n,i,a,c){return n={tag:n,create:i,destroy:a,deps:c,next:null},i=Ze.updateQueue,i===null?(i={lastEffect:null,stores:null},Ze.updateQueue=i,i.lastEffect=n.next=n):(a=i.lastEffect,a===null?i.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,i.lastEffect=n)),n}function Kp(){return yn().memoizedState}function iu(n,i,a,c){var d=Yn();Ze.flags|=n,d.memoizedState=wa(1|i,a,void 0,c===void 0?null:c)}function su(n,i,a,c){var d=yn();c=c===void 0?null:c;var g=void 0;if(pt!==null){var v=pt.memoizedState;if(g=v.destroy,c!==null&&Th(c,v.deps)){d.memoizedState=wa(i,a,g,c);return}}Ze.flags|=n,d.memoizedState=wa(1|i,a,g,c)}function Gp(n,i){return iu(8390656,8,n,i)}function Ch(n,i){return su(2048,8,n,i)}function Qp(n,i){return su(4,2,n,i)}function Yp(n,i){return su(4,4,n,i)}function Xp(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Jp(n,i,a){return a=a!=null?a.concat([n]):null,su(4,4,Xp.bind(null,i,n),a)}function Ph(){}function Zp(n,i){var a=yn();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&Th(i,c[1])?c[0]:(a.memoizedState=[n,i],n)}function em(n,i){var a=yn();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&Th(i,c[1])?c[0]:(n=n(),a.memoizedState=[n,i],n)}function tm(n,i,a){return Qi&21?(xn(a,i)||(a=Fi(),Ze.lanes|=a,Yi|=a,n.baseState=!0),i):(n.baseState&&(n.baseState=!1,Yt=!0),n.memoizedState=a)}function jE(n,i){var a=Ne;Ne=a!==0&&4>a?a:4,n(!0);var c=wh.transition;wh.transition={};try{n(!1),i()}finally{Ne=a,wh.transition=c}}function nm(){return yn().memoizedState}function zE(n,i,a){var c=ri(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},rm(n))im(i,a);else if(a=Lp(n,i,a,c),a!==null){var d=Ht();Mn(a,n,c,d),sm(a,i,c)}}function BE(n,i,a){var c=ri(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(rm(n))im(i,d);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var v=i.lastRenderedState,S=g(v,a);if(d.hasEagerState=!0,d.eagerState=S,xn(S,v)){var P=i.interleaved;P===null?(d.next=d,mh(i)):(d.next=P.next,P.next=d),i.interleaved=d;return}}catch{}finally{}a=Lp(n,i,d,c),a!==null&&(d=Ht(),Mn(a,n,c,d),sm(a,i,c))}}function rm(n){var i=n.alternate;return n===Ze||i!==null&&i===Ze}function im(n,i){_a=ru=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function sm(n,i,a){if(a&4194240){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,Br(n,a)}}var ou={readContext:gn,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useInsertionEffect:Lt,useLayoutEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useMutableSource:Lt,useSyncExternalStore:Lt,useId:Lt,unstable_isNewReconciler:!1},$E={readContext:gn,useCallback:function(n,i){return Yn().memoizedState=[n,i===void 0?null:i],n},useContext:gn,useEffect:Gp,useImperativeHandle:function(n,i,a){return a=a!=null?a.concat([n]):null,iu(4194308,4,Xp.bind(null,i,n),a)},useLayoutEffect:function(n,i){return iu(4194308,4,n,i)},useInsertionEffect:function(n,i){return iu(4,2,n,i)},useMemo:function(n,i){var a=Yn();return i=i===void 0?null:i,n=n(),a.memoizedState=[n,i],n},useReducer:function(n,i,a){var c=Yn();return i=a!==void 0?a(i):i,c.memoizedState=c.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},c.queue=n,n=n.dispatch=zE.bind(null,Ze,n),[c.memoizedState,n]},useRef:function(n){var i=Yn();return n={current:n},i.memoizedState=n},useState:Wp,useDebugValue:Ph,useDeferredValue:function(n){return Yn().memoizedState=n},useTransition:function(){var n=Wp(!1),i=n[0];return n=jE.bind(null,n[1]),Yn().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,a){var c=Ze,d=Yn();if(Xe){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),wt===null)throw Error(t(349));Qi&30||zp(c,i,a)}d.memoizedState=a;var g={value:a,getSnapshot:i};return d.queue=g,Gp($p.bind(null,c,g,n),[n]),c.flags|=2048,wa(9,Bp.bind(null,c,g,a,i),void 0,null),a},useId:function(){var n=Yn(),i=wt.identifierPrefix;if(Xe){var a=Er,c=vr;a=(c&~(1<<32-Bt(c)-1)).toString(32)+a,i=":"+i+"R"+a,a=va++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=UE++,i=":"+i+"r"+a.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},qE={readContext:gn,useCallback:Zp,useContext:gn,useEffect:Ch,useImperativeHandle:Jp,useInsertionEffect:Qp,useLayoutEffect:Yp,useMemo:em,useReducer:Rh,useRef:Kp,useState:function(){return Rh(Ea)},useDebugValue:Ph,useDeferredValue:function(n){var i=yn();return tm(i,pt.memoizedState,n)},useTransition:function(){var n=Rh(Ea)[0],i=yn().memoizedState;return[n,i]},useMutableSource:Up,useSyncExternalStore:jp,useId:nm,unstable_isNewReconciler:!1},HE={readContext:gn,useCallback:Zp,useContext:gn,useEffect:Ch,useImperativeHandle:Jp,useInsertionEffect:Qp,useLayoutEffect:Yp,useMemo:em,useReducer:Ah,useRef:Kp,useState:function(){return Ah(Ea)},useDebugValue:Ph,useDeferredValue:function(n){var i=yn();return pt===null?i.memoizedState=n:tm(i,pt.memoizedState,n)},useTransition:function(){var n=Ah(Ea)[0],i=yn().memoizedState;return[n,i]},useMutableSource:Up,useSyncExternalStore:jp,useId:nm,unstable_isNewReconciler:!1};function Vn(n,i){if(n&&n.defaultProps){i=se({},i),n=n.defaultProps;for(var a in n)i[a]===void 0&&(i[a]=n[a]);return i}return i}function kh(n,i,a,c){i=n.memoizedState,a=a(c,i),a=a==null?i:se({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var au={isMounted:function(n){return(n=n._reactInternals)?Sn(n)===n:!1},enqueueSetState:function(n,i,a){n=n._reactInternals;var c=Ht(),d=ri(n),g=Tr(c,d);g.payload=i,a!=null&&(g.callback=a),i=Zr(n,g,d),i!==null&&(Mn(i,n,d,c),Zl(i,n,d))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var c=Ht(),d=ri(n),g=Tr(c,d);g.tag=1,g.payload=i,a!=null&&(g.callback=a),i=Zr(n,g,d),i!==null&&(Mn(i,n,d,c),Zl(i,n,d))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=Ht(),c=ri(n),d=Tr(a,c);d.tag=2,i!=null&&(d.callback=i),i=Zr(n,d,c),i!==null&&(Mn(i,n,c,a),Zl(i,n,c))}};function om(n,i,a,c,d,g,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,g,v):i.prototype&&i.prototype.isPureReactComponent?!aa(a,c)||!aa(d,g):!0}function am(n,i,a){var c=!1,d=Yr,g=i.contextType;return typeof g=="object"&&g!==null?g=gn(g):(d=Qt(i)?qi:Vt.current,c=i.contextTypes,g=(c=c!=null)?Gs(n,d):Yr),i=new i(a,g),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=au,n.stateNode=i,i._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=g),i}function lm(n,i,a,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,c),i.state!==n&&au.enqueueReplaceState(i,i.state,null)}function Nh(n,i,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},gh(n);var g=i.contextType;typeof g=="object"&&g!==null?d.context=gn(g):(g=Qt(i)?qi:Vt.current,d.context=Gs(n,g)),d.state=n.memoizedState,g=i.getDerivedStateFromProps,typeof g=="function"&&(kh(n,i,g,a),d.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(i=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),i!==d.state&&au.enqueueReplaceState(d,d.state,null),eu(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function no(n,i){try{var a="",c=i;do a+=Ae(c),c=c.return;while(c);var d=a}catch(g){d=`
Error generating stack: `+g.message+`
`+g.stack}return{value:n,source:i,stack:d,digest:null}}function xh(n,i,a){return{value:n,source:null,stack:a??null,digest:i??null}}function Dh(n,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var WE=typeof WeakMap=="function"?WeakMap:Map;function um(n,i,a){a=Tr(-1,a),a.tag=3,a.payload={element:null};var c=i.value;return a.callback=function(){pu||(pu=!0,Kh=c),Dh(n,i)},a}function cm(n,i,a){a=Tr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=i.value;a.payload=function(){return c(d)},a.callback=function(){Dh(n,i)}}var g=n.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){Dh(n,i),typeof c!="function"&&(ti===null?ti=new Set([this]):ti.add(this));var v=i.stack;this.componentDidCatch(i.value,{componentStack:v!==null?v:""})}),a}function hm(n,i,a){var c=n.pingCache;if(c===null){c=n.pingCache=new WE;var d=new Set;c.set(i,d)}else d=c.get(i),d===void 0&&(d=new Set,c.set(i,d));d.has(a)||(d.add(a),n=ow.bind(null,n,i,a),i.then(n,n))}function dm(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function fm(n,i,a,c,d){return n.mode&1?(n.flags|=65536,n.lanes=d,n):(n===i?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=Tr(-1,1),i.tag=2,Zr(a,i,1))),a.lanes|=1),n)}var KE=he.ReactCurrentOwner,Yt=!1;function qt(n,i,a,c){i.child=n===null?Vp(i,null,a,c):Js(i,n.child,a,c)}function pm(n,i,a,c,d){a=a.render;var g=i.ref;return eo(i,d),c=Ih(n,i,a,c,g,d),a=Sh(),n!==null&&!Yt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,Ir(n,i,d)):(Xe&&a&&oh(i),i.flags|=1,qt(n,i,c,d),i.child)}function mm(n,i,a,c,d){if(n===null){var g=a.type;return typeof g=="function"&&!ed(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=g,gm(n,i,g,c,d)):(n=Eu(a.type,null,c,i,i.mode,d),n.ref=i.ref,n.return=i,i.child=n)}if(g=n.child,!(n.lanes&d)){var v=g.memoizedProps;if(a=a.compare,a=a!==null?a:aa,a(v,c)&&n.ref===i.ref)return Ir(n,i,d)}return i.flags|=1,n=si(g,c),n.ref=i.ref,n.return=i,i.child=n}function gm(n,i,a,c,d){if(n!==null){var g=n.memoizedProps;if(aa(g,c)&&n.ref===i.ref)if(Yt=!1,i.pendingProps=c=g,(n.lanes&d)!==0)n.flags&131072&&(Yt=!0);else return i.lanes=n.lanes,Ir(n,i,d)}return Vh(n,i,a,c,d)}function ym(n,i,a){var c=i.pendingProps,d=c.children,g=n!==null?n.memoizedState:null;if(c.mode==="hidden")if(!(i.mode&1))i.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(io,ln),ln|=a;else{if(!(a&1073741824))return n=g!==null?g.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,We(io,ln),ln|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=g!==null?g.baseLanes:a,We(io,ln),ln|=c}else g!==null?(c=g.baseLanes|a,i.memoizedState=null):c=a,We(io,ln),ln|=c;return qt(n,i,d,a),i.child}function _m(n,i){var a=i.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function Vh(n,i,a,c,d){var g=Qt(a)?qi:Vt.current;return g=Gs(i,g),eo(i,d),a=Ih(n,i,a,c,g,d),c=Sh(),n!==null&&!Yt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~d,Ir(n,i,d)):(Xe&&c&&oh(i),i.flags|=1,qt(n,i,a,d),i.child)}function vm(n,i,a,c,d){if(Qt(a)){var g=!0;Hl(i)}else g=!1;if(eo(i,d),i.stateNode===null)uu(n,i),am(i,a,c),Nh(i,a,c,d),c=!0;else if(n===null){var v=i.stateNode,S=i.memoizedProps;v.props=S;var P=v.context,B=a.contextType;typeof B=="object"&&B!==null?B=gn(B):(B=Qt(a)?qi:Vt.current,B=Gs(i,B));var X=a.getDerivedStateFromProps,J=typeof X=="function"||typeof v.getSnapshotBeforeUpdate=="function";J||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==c||P!==B)&&lm(i,v,c,B),Jr=!1;var Y=i.memoizedState;v.state=Y,eu(i,c,v,d),P=i.memoizedState,S!==c||Y!==P||Gt.current||Jr?(typeof X=="function"&&(kh(i,a,X,c),P=i.memoizedState),(S=Jr||om(i,a,S,c,Y,P,B))?(J||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(i.flags|=4194308)):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=P),v.props=c,v.state=P,v.context=B,c=S):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{v=i.stateNode,Op(n,i),S=i.memoizedProps,B=i.type===i.elementType?S:Vn(i.type,S),v.props=B,J=i.pendingProps,Y=v.context,P=a.contextType,typeof P=="object"&&P!==null?P=gn(P):(P=Qt(a)?qi:Vt.current,P=Gs(i,P));var re=a.getDerivedStateFromProps;(X=typeof re=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==J||Y!==P)&&lm(i,v,c,P),Jr=!1,Y=i.memoizedState,v.state=Y,eu(i,c,v,d);var le=i.memoizedState;S!==J||Y!==le||Gt.current||Jr?(typeof re=="function"&&(kh(i,a,re,c),le=i.memoizedState),(B=Jr||om(i,a,B,c,Y,le,P)||!1)?(X||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,le,P),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,le,P)),typeof v.componentDidUpdate=="function"&&(i.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof v.componentDidUpdate!="function"||S===n.memoizedProps&&Y===n.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&Y===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=le),v.props=c,v.state=le,v.context=P,c=B):(typeof v.componentDidUpdate!="function"||S===n.memoizedProps&&Y===n.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&Y===n.memoizedState||(i.flags|=1024),c=!1)}return Lh(n,i,a,c,g,d)}function Lh(n,i,a,c,d,g){_m(n,i);var v=(i.flags&128)!==0;if(!c&&!v)return d&&Sp(i,a,!1),Ir(n,i,g);c=i.stateNode,KE.current=i;var S=v&&typeof a.getDerivedStateFromError!="function"?null:c.render();return i.flags|=1,n!==null&&v?(i.child=Js(i,n.child,null,g),i.child=Js(i,null,S,g)):qt(n,i,S,g),i.memoizedState=c.state,d&&Sp(i,a,!0),i.child}function Em(n){var i=n.stateNode;i.pendingContext?Tp(n,i.pendingContext,i.pendingContext!==i.context):i.context&&Tp(n,i.context,!1),yh(n,i.containerInfo)}function wm(n,i,a,c,d){return Xs(),ch(d),i.flags|=256,qt(n,i,a,c),i.child}var Oh={dehydrated:null,treeContext:null,retryLane:0};function Mh(n){return{baseLanes:n,cachePool:null,transitions:null}}function Tm(n,i,a){var c=i.pendingProps,d=Je.current,g=!1,v=(i.flags&128)!==0,S;if((S=v)||(S=n!==null&&n.memoizedState===null?!1:(d&2)!==0),S?(g=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),We(Je,d&1),n===null)return uh(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(i.mode&1?n.data==="$!"?i.lanes=8:i.lanes=1073741824:i.lanes=1,null):(v=c.children,n=c.fallback,g?(c=i.mode,g=i.child,v={mode:"hidden",children:v},!(c&1)&&g!==null?(g.childLanes=0,g.pendingProps=v):g=wu(v,c,0,null),n=es(n,c,a,null),g.return=i,n.return=i,g.sibling=n,i.child=g,i.child.memoizedState=Mh(a),i.memoizedState=Oh,n):bh(i,v));if(d=n.memoizedState,d!==null&&(S=d.dehydrated,S!==null))return GE(n,i,v,c,S,d,a);if(g){g=c.fallback,v=i.mode,d=n.child,S=d.sibling;var P={mode:"hidden",children:c.children};return!(v&1)&&i.child!==d?(c=i.child,c.childLanes=0,c.pendingProps=P,i.deletions=null):(c=si(d,P),c.subtreeFlags=d.subtreeFlags&14680064),S!==null?g=si(S,g):(g=es(g,v,a,null),g.flags|=2),g.return=i,c.return=i,c.sibling=g,i.child=c,c=g,g=i.child,v=n.child.memoizedState,v=v===null?Mh(a):{baseLanes:v.baseLanes|a,cachePool:null,transitions:v.transitions},g.memoizedState=v,g.childLanes=n.childLanes&~a,i.memoizedState=Oh,c}return g=n.child,n=g.sibling,c=si(g,{mode:"visible",children:c.children}),!(i.mode&1)&&(c.lanes=a),c.return=i,c.sibling=null,n!==null&&(a=i.deletions,a===null?(i.deletions=[n],i.flags|=16):a.push(n)),i.child=c,i.memoizedState=null,c}function bh(n,i){return i=wu({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function lu(n,i,a,c){return c!==null&&ch(c),Js(i,n.child,null,a),n=bh(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function GE(n,i,a,c,d,g,v){if(a)return i.flags&256?(i.flags&=-257,c=xh(Error(t(422))),lu(n,i,v,c)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(g=c.fallback,d=i.mode,c=wu({mode:"visible",children:c.children},d,0,null),g=es(g,d,v,null),g.flags|=2,c.return=i,g.return=i,c.sibling=g,i.child=c,i.mode&1&&Js(i,n.child,null,v),i.child.memoizedState=Mh(v),i.memoizedState=Oh,g);if(!(i.mode&1))return lu(n,i,v,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var S=c.dgst;return c=S,g=Error(t(419)),c=xh(g,c,void 0),lu(n,i,v,c)}if(S=(v&n.childLanes)!==0,Yt||S){if(c=wt,c!==null){switch(v&-v){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=d&(c.suspendedLanes|v)?0:d,d!==0&&d!==g.retryLane&&(g.retryLane=d,wr(n,d),Mn(c,n,d,-1))}return Zh(),c=xh(Error(t(421))),lu(n,i,v,c)}return d.data==="$?"?(i.flags|=128,i.child=n.child,i=aw.bind(null,n),d._reactRetry=i,null):(n=g.treeContext,an=Gr(d.nextSibling),on=i,Xe=!0,Dn=null,n!==null&&(pn[mn++]=vr,pn[mn++]=Er,pn[mn++]=Hi,vr=n.id,Er=n.overflow,Hi=i),i=bh(i,c.children),i.flags|=4096,i)}function Im(n,i,a){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),ph(n.return,i,a)}function Fh(n,i,a,c,d){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(g.isBackwards=i,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=a,g.tailMode=d)}function Sm(n,i,a){var c=i.pendingProps,d=c.revealOrder,g=c.tail;if(qt(n,i,c.children,a),c=Je.current,c&2)c=c&1|2,i.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Im(n,a,i);else if(n.tag===19)Im(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(We(Je,c),!(i.mode&1))i.memoizedState=null;else switch(d){case"forwards":for(a=i.child,d=null;a!==null;)n=a.alternate,n!==null&&tu(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=i.child,i.child=null):(d=a.sibling,a.sibling=null),Fh(i,!1,d,a,g);break;case"backwards":for(a=null,d=i.child,i.child=null;d!==null;){if(n=d.alternate,n!==null&&tu(n)===null){i.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}Fh(i,!0,a,null,g);break;case"together":Fh(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function uu(n,i){!(i.mode&1)&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function Ir(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),Yi|=i.lanes,!(a&i.childLanes))return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,a=si(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=si(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function QE(n,i,a){switch(i.tag){case 3:Em(i),Xs();break;case 5:Fp(i);break;case 1:Qt(i.type)&&Hl(i);break;case 4:yh(i,i.stateNode.containerInfo);break;case 10:var c=i.type._context,d=i.memoizedProps.value;We(Xl,c._currentValue),c._currentValue=d;break;case 13:if(c=i.memoizedState,c!==null)return c.dehydrated!==null?(We(Je,Je.current&1),i.flags|=128,null):a&i.child.childLanes?Tm(n,i,a):(We(Je,Je.current&1),n=Ir(n,i,a),n!==null?n.sibling:null);We(Je,Je.current&1);break;case 19:if(c=(a&i.childLanes)!==0,n.flags&128){if(c)return Sm(n,i,a);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),We(Je,Je.current),c)break;return null;case 22:case 23:return i.lanes=0,ym(n,i,a)}return Ir(n,i,a)}var Rm,Uh,Am,Cm;Rm=function(n,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Uh=function(){},Am=function(n,i,a,c){var d=n.memoizedProps;if(d!==c){n=i.stateNode,Gi(Qn.current);var g=null;switch(a){case"input":d=Ci(n,d),c=Ci(n,c),g=[];break;case"select":d=se({},d,{value:void 0}),c=se({},c,{value:void 0}),g=[];break;case"textarea":d=Mo(n,d),c=Mo(n,c),g=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=Bl)}Bo(a,c);var v;a=null;for(B in d)if(!c.hasOwnProperty(B)&&d.hasOwnProperty(B)&&d[B]!=null)if(B==="style"){var S=d[B];for(v in S)S.hasOwnProperty(v)&&(a||(a={}),a[v]="")}else B!=="dangerouslySetInnerHTML"&&B!=="children"&&B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(o.hasOwnProperty(B)?g||(g=[]):(g=g||[]).push(B,null));for(B in c){var P=c[B];if(S=d!=null?d[B]:void 0,c.hasOwnProperty(B)&&P!==S&&(P!=null||S!=null))if(B==="style")if(S){for(v in S)!S.hasOwnProperty(v)||P&&P.hasOwnProperty(v)||(a||(a={}),a[v]="");for(v in P)P.hasOwnProperty(v)&&S[v]!==P[v]&&(a||(a={}),a[v]=P[v])}else a||(g||(g=[]),g.push(B,a)),a=P;else B==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,S=S?S.__html:void 0,P!=null&&S!==P&&(g=g||[]).push(B,P)):B==="children"?typeof P!="string"&&typeof P!="number"||(g=g||[]).push(B,""+P):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&(o.hasOwnProperty(B)?(P!=null&&B==="onScroll"&&Ke("scroll",n),g||S===P||(g=[])):(g=g||[]).push(B,P))}a&&(g=g||[]).push("style",a);var B=g;(i.updateQueue=B)&&(i.flags|=4)}},Cm=function(n,i,a,c){a!==c&&(i.flags|=4)};function Ta(n,i){if(!Xe)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Ot(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(i)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,i}function YE(n,i,a){var c=i.pendingProps;switch(ah(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(i),null;case 1:return Qt(i.type)&&ql(),Ot(i),null;case 3:return c=i.stateNode,to(),Ge(Gt),Ge(Vt),Eh(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(Ql(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&!(i.flags&256)||(i.flags|=1024,Dn!==null&&(Yh(Dn),Dn=null))),Uh(n,i),Ot(i),null;case 5:_h(i);var d=Gi(ya.current);if(a=i.type,n!==null&&i.stateNode!=null)Am(n,i,a,c,d),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!c){if(i.stateNode===null)throw Error(t(166));return Ot(i),null}if(n=Gi(Qn.current),Ql(i)){c=i.stateNode,a=i.type;var g=i.memoizedProps;switch(c[Gn]=i,c[da]=g,n=(i.mode&1)!==0,a){case"dialog":Ke("cancel",c),Ke("close",c);break;case"iframe":case"object":case"embed":Ke("load",c);break;case"video":case"audio":for(d=0;d<ua.length;d++)Ke(ua[d],c);break;case"source":Ke("error",c);break;case"img":case"image":case"link":Ke("error",c),Ke("load",c);break;case"details":Ke("toggle",c);break;case"input":gs(c,g),Ke("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!g.multiple},Ke("invalid",c);break;case"textarea":_s(c,g),Ke("invalid",c)}Bo(a,g),d=null;for(var v in g)if(g.hasOwnProperty(v)){var S=g[v];v==="children"?typeof S=="string"?c.textContent!==S&&(g.suppressHydrationWarning!==!0&&zl(c.textContent,S,n),d=["children",S]):typeof S=="number"&&c.textContent!==""+S&&(g.suppressHydrationWarning!==!0&&zl(c.textContent,S,n),d=["children",""+S]):o.hasOwnProperty(v)&&S!=null&&v==="onScroll"&&Ke("scroll",c)}switch(a){case"input":ar(c),fl(c,g,!0);break;case"textarea":ar(c),bo(c);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(c.onclick=Bl)}c=d,i.updateQueue=c,c!==null&&(i.flags|=4)}else{v=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=ht(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=v.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=v.createElement(a,{is:c.is}):(n=v.createElement(a),a==="select"&&(v=n,c.multiple?v.multiple=!0:c.size&&(v.size=c.size))):n=v.createElementNS(n,a),n[Gn]=i,n[da]=c,Rm(n,i,!1,!1),i.stateNode=n;e:{switch(v=$o(a,c),a){case"dialog":Ke("cancel",n),Ke("close",n),d=c;break;case"iframe":case"object":case"embed":Ke("load",n),d=c;break;case"video":case"audio":for(d=0;d<ua.length;d++)Ke(ua[d],n);d=c;break;case"source":Ke("error",n),d=c;break;case"img":case"image":case"link":Ke("error",n),Ke("load",n),d=c;break;case"details":Ke("toggle",n),d=c;break;case"input":gs(n,c),d=Ci(n,c),Ke("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=se({},c,{value:void 0}),Ke("invalid",n);break;case"textarea":_s(n,c),d=Mo(n,c),Ke("invalid",n);break;default:d=c}Bo(a,d),S=d;for(g in S)if(S.hasOwnProperty(g)){var P=S[g];g==="style"?jo(n,P):g==="dangerouslySetInnerHTML"?(P=P?P.__html:void 0,P!=null&&Fo(n,P)):g==="children"?typeof P=="string"?(a!=="textarea"||P!=="")&&br(n,P):typeof P=="number"&&br(n,""+P):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?P!=null&&g==="onScroll"&&Ke("scroll",n):P!=null&&ne(n,g,P,v))}switch(a){case"input":ar(n),fl(n,c,!1);break;case"textarea":ar(n),bo(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Fe(c.value));break;case"select":n.multiple=!!c.multiple,g=c.value,g!=null?ur(n,!!c.multiple,g,!1):c.defaultValue!=null&&ur(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=Bl)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Ot(i),null;case 6:if(n&&i.stateNode!=null)Cm(n,i,n.memoizedProps,c);else{if(typeof c!="string"&&i.stateNode===null)throw Error(t(166));if(a=Gi(ya.current),Gi(Qn.current),Ql(i)){if(c=i.stateNode,a=i.memoizedProps,c[Gn]=i,(g=c.nodeValue!==a)&&(n=on,n!==null))switch(n.tag){case 3:zl(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&zl(c.nodeValue,a,(n.mode&1)!==0)}g&&(i.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[Gn]=i,i.stateNode=c}return Ot(i),null;case 13:if(Ge(Je),c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Xe&&an!==null&&i.mode&1&&!(i.flags&128))Np(),Xs(),i.flags|=98560,g=!1;else if(g=Ql(i),c!==null&&c.dehydrated!==null){if(n===null){if(!g)throw Error(t(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[Gn]=i}else Xs(),!(i.flags&128)&&(i.memoizedState=null),i.flags|=4;Ot(i),g=!1}else Dn!==null&&(Yh(Dn),Dn=null),g=!0;if(!g)return i.flags&65536?i:null}return i.flags&128?(i.lanes=a,i):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(i.child.flags|=8192,i.mode&1&&(n===null||Je.current&1?mt===0&&(mt=3):Zh())),i.updateQueue!==null&&(i.flags|=4),Ot(i),null);case 4:return to(),Uh(n,i),n===null&&ca(i.stateNode.containerInfo),Ot(i),null;case 10:return fh(i.type._context),Ot(i),null;case 17:return Qt(i.type)&&ql(),Ot(i),null;case 19:if(Ge(Je),g=i.memoizedState,g===null)return Ot(i),null;if(c=(i.flags&128)!==0,v=g.rendering,v===null)if(c)Ta(g,!1);else{if(mt!==0||n!==null&&n.flags&128)for(n=i.child;n!==null;){if(v=tu(n),v!==null){for(i.flags|=128,Ta(g,!1),c=v.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),i.subtreeFlags=0,c=a,a=i.child;a!==null;)g=a,n=c,g.flags&=14680066,v=g.alternate,v===null?(g.childLanes=0,g.lanes=n,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=v.childLanes,g.lanes=v.lanes,g.child=v.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=v.memoizedProps,g.memoizedState=v.memoizedState,g.updateQueue=v.updateQueue,g.type=v.type,n=v.dependencies,g.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return We(Je,Je.current&1|2),i.child}n=n.sibling}g.tail!==null&&He()>so&&(i.flags|=128,c=!0,Ta(g,!1),i.lanes=4194304)}else{if(!c)if(n=tu(v),n!==null){if(i.flags|=128,c=!0,a=n.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),Ta(g,!0),g.tail===null&&g.tailMode==="hidden"&&!v.alternate&&!Xe)return Ot(i),null}else 2*He()-g.renderingStartTime>so&&a!==1073741824&&(i.flags|=128,c=!0,Ta(g,!1),i.lanes=4194304);g.isBackwards?(v.sibling=i.child,i.child=v):(a=g.last,a!==null?a.sibling=v:i.child=v,g.last=v)}return g.tail!==null?(i=g.tail,g.rendering=i,g.tail=i.sibling,g.renderingStartTime=He(),i.sibling=null,a=Je.current,We(Je,c?a&1|2:a&1),i):(Ot(i),null);case 22:case 23:return Jh(),c=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(i.flags|=8192),c&&i.mode&1?ln&1073741824&&(Ot(i),i.subtreeFlags&6&&(i.flags|=8192)):Ot(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function XE(n,i){switch(ah(i),i.tag){case 1:return Qt(i.type)&&ql(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return to(),Ge(Gt),Ge(Vt),Eh(),n=i.flags,n&65536&&!(n&128)?(i.flags=n&-65537|128,i):null;case 5:return _h(i),null;case 13:if(Ge(Je),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));Xs()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return Ge(Je),null;case 4:return to(),null;case 10:return fh(i.type._context),null;case 22:case 23:return Jh(),null;case 24:return null;default:return null}}var cu=!1,Mt=!1,JE=typeof WeakSet=="function"?WeakSet:Set,ae=null;function ro(n,i){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){nt(n,i,c)}else a.current=null}function jh(n,i,a){try{a()}catch(c){nt(n,i,c)}}var Pm=!1;function ZE(n,i){if(Jc=Hr,n=op(),qc(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var v=0,S=-1,P=-1,B=0,X=0,J=n,Y=null;t:for(;;){for(var re;J!==a||d!==0&&J.nodeType!==3||(S=v+d),J!==g||c!==0&&J.nodeType!==3||(P=v+c),J.nodeType===3&&(v+=J.nodeValue.length),(re=J.firstChild)!==null;)Y=J,J=re;for(;;){if(J===n)break t;if(Y===a&&++B===d&&(S=v),Y===g&&++X===c&&(P=v),(re=J.nextSibling)!==null)break;J=Y,Y=J.parentNode}J=re}a=S===-1||P===-1?null:{start:S,end:P}}else a=null}a=a||{start:0,end:0}}else a=null;for(Zc={focusedElem:n,selectionRange:a},Hr=!1,ae=i;ae!==null;)if(i=ae,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,ae=n;else for(;ae!==null;){i=ae;try{var le=i.alternate;if(i.flags&1024)switch(i.tag){case 0:case 11:case 15:break;case 1:if(le!==null){var ue=le.memoizedProps,st=le.memoizedState,U=i.stateNode,x=U.getSnapshotBeforeUpdate(i.elementType===i.type?ue:Vn(i.type,ue),st);U.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var z=i.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Z){nt(i,i.return,Z)}if(n=i.sibling,n!==null){n.return=i.return,ae=n;break}ae=i.return}return le=Pm,Pm=!1,le}function Ia(n,i,a){var c=i.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var g=d.destroy;d.destroy=void 0,g!==void 0&&jh(i,a,g)}d=d.next}while(d!==c)}}function hu(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==i)}}function zh(n){var i=n.ref;if(i!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof i=="function"?i(n):i.current=n}}function km(n){var i=n.alternate;i!==null&&(n.alternate=null,km(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[Gn],delete i[da],delete i[rh],delete i[OE],delete i[ME])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Nm(n){return n.tag===5||n.tag===3||n.tag===4}function xm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Nm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Bh(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(n,i):a.insertBefore(n,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(n,a)):(i=a,i.appendChild(n)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Bl));else if(c!==4&&(n=n.child,n!==null))for(Bh(n,i,a),n=n.sibling;n!==null;)Bh(n,i,a),n=n.sibling}function $h(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for($h(n,i,a),n=n.sibling;n!==null;)$h(n,i,a),n=n.sibling}var At=null,Ln=!1;function ei(n,i,a){for(a=a.child;a!==null;)Dm(n,i,a),a=a.sibling}function Dm(n,i,a){if(tn&&typeof tn.onCommitFiberUnmount=="function")try{tn.onCommitFiberUnmount(Mi,a)}catch{}switch(a.tag){case 5:Mt||ro(a,i);case 6:var c=At,d=Ln;At=null,ei(n,i,a),At=c,Ln=d,At!==null&&(Ln?(n=At,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):At.removeChild(a.stateNode));break;case 18:At!==null&&(Ln?(n=At,a=a.stateNode,n.nodeType===8?nh(n.parentNode,a):n.nodeType===1&&nh(n,a),kn(n)):nh(At,a.stateNode));break;case 4:c=At,d=Ln,At=a.stateNode.containerInfo,Ln=!0,ei(n,i,a),At=c,Ln=d;break;case 0:case 11:case 14:case 15:if(!Mt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var g=d,v=g.destroy;g=g.tag,v!==void 0&&(g&2||g&4)&&jh(a,i,v),d=d.next}while(d!==c)}ei(n,i,a);break;case 1:if(!Mt&&(ro(a,i),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(S){nt(a,i,S)}ei(n,i,a);break;case 21:ei(n,i,a);break;case 22:a.mode&1?(Mt=(c=Mt)||a.memoizedState!==null,ei(n,i,a),Mt=c):ei(n,i,a);break;default:ei(n,i,a)}}function Vm(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new JE),i.forEach(function(c){var d=lw.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function On(n,i){var a=i.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var g=n,v=i,S=v;e:for(;S!==null;){switch(S.tag){case 5:At=S.stateNode,Ln=!1;break e;case 3:At=S.stateNode.containerInfo,Ln=!0;break e;case 4:At=S.stateNode.containerInfo,Ln=!0;break e}S=S.return}if(At===null)throw Error(t(160));Dm(g,v,d),At=null,Ln=!1;var P=d.alternate;P!==null&&(P.return=null),d.return=null}catch(B){nt(d,i,B)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Lm(i,n),i=i.sibling}function Lm(n,i){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(On(i,n),Xn(n),c&4){try{Ia(3,n,n.return),hu(3,n)}catch(ue){nt(n,n.return,ue)}try{Ia(5,n,n.return)}catch(ue){nt(n,n.return,ue)}}break;case 1:On(i,n),Xn(n),c&512&&a!==null&&ro(a,a.return);break;case 5:if(On(i,n),Xn(n),c&512&&a!==null&&ro(a,a.return),n.flags&32){var d=n.stateNode;try{br(d,"")}catch(ue){nt(n,n.return,ue)}}if(c&4&&(d=n.stateNode,d!=null)){var g=n.memoizedProps,v=a!==null?a.memoizedProps:g,S=n.type,P=n.updateQueue;if(n.updateQueue=null,P!==null)try{S==="input"&&g.type==="radio"&&g.name!=null&&Lo(d,g),$o(S,v);var B=$o(S,g);for(v=0;v<P.length;v+=2){var X=P[v],J=P[v+1];X==="style"?jo(d,J):X==="dangerouslySetInnerHTML"?Fo(d,J):X==="children"?br(d,J):ne(d,X,J,B)}switch(S){case"input":Oo(d,g);break;case"textarea":vs(d,g);break;case"select":var Y=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!g.multiple;var re=g.value;re!=null?ur(d,!!g.multiple,re,!1):Y!==!!g.multiple&&(g.defaultValue!=null?ur(d,!!g.multiple,g.defaultValue,!0):ur(d,!!g.multiple,g.multiple?[]:"",!1))}d[da]=g}catch(ue){nt(n,n.return,ue)}}break;case 6:if(On(i,n),Xn(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,g=n.memoizedProps;try{d.nodeValue=g}catch(ue){nt(n,n.return,ue)}}break;case 3:if(On(i,n),Xn(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{kn(i.containerInfo)}catch(ue){nt(n,n.return,ue)}break;case 4:On(i,n),Xn(n);break;case 13:On(i,n),Xn(n),d=n.child,d.flags&8192&&(g=d.memoizedState!==null,d.stateNode.isHidden=g,!g||d.alternate!==null&&d.alternate.memoizedState!==null||(Wh=He())),c&4&&Vm(n);break;case 22:if(X=a!==null&&a.memoizedState!==null,n.mode&1?(Mt=(B=Mt)||X,On(i,n),Mt=B):On(i,n),Xn(n),c&8192){if(B=n.memoizedState!==null,(n.stateNode.isHidden=B)&&!X&&n.mode&1)for(ae=n,X=n.child;X!==null;){for(J=ae=X;ae!==null;){switch(Y=ae,re=Y.child,Y.tag){case 0:case 11:case 14:case 15:Ia(4,Y,Y.return);break;case 1:ro(Y,Y.return);var le=Y.stateNode;if(typeof le.componentWillUnmount=="function"){c=Y,a=Y.return;try{i=c,le.props=i.memoizedProps,le.state=i.memoizedState,le.componentWillUnmount()}catch(ue){nt(c,a,ue)}}break;case 5:ro(Y,Y.return);break;case 22:if(Y.memoizedState!==null){bm(J);continue}}re!==null?(re.return=Y,ae=re):bm(J)}X=X.sibling}e:for(X=null,J=n;;){if(J.tag===5){if(X===null){X=J;try{d=J.stateNode,B?(g=d.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(S=J.stateNode,P=J.memoizedProps.style,v=P!=null&&P.hasOwnProperty("display")?P.display:null,S.style.display=Uo("display",v))}catch(ue){nt(n,n.return,ue)}}}else if(J.tag===6){if(X===null)try{J.stateNode.nodeValue=B?"":J.memoizedProps}catch(ue){nt(n,n.return,ue)}}else if((J.tag!==22&&J.tag!==23||J.memoizedState===null||J===n)&&J.child!==null){J.child.return=J,J=J.child;continue}if(J===n)break e;for(;J.sibling===null;){if(J.return===null||J.return===n)break e;X===J&&(X=null),J=J.return}X===J&&(X=null),J.sibling.return=J.return,J=J.sibling}}break;case 19:On(i,n),Xn(n),c&4&&Vm(n);break;case 21:break;default:On(i,n),Xn(n)}}function Xn(n){var i=n.flags;if(i&2){try{e:{for(var a=n.return;a!==null;){if(Nm(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(br(d,""),c.flags&=-33);var g=xm(n);$h(n,g,d);break;case 3:case 4:var v=c.stateNode.containerInfo,S=xm(n);Bh(n,S,v);break;default:throw Error(t(161))}}catch(P){nt(n,n.return,P)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function ew(n,i,a){ae=n,Om(n)}function Om(n,i,a){for(var c=(n.mode&1)!==0;ae!==null;){var d=ae,g=d.child;if(d.tag===22&&c){var v=d.memoizedState!==null||cu;if(!v){var S=d.alternate,P=S!==null&&S.memoizedState!==null||Mt;S=cu;var B=Mt;if(cu=v,(Mt=P)&&!B)for(ae=d;ae!==null;)v=ae,P=v.child,v.tag===22&&v.memoizedState!==null?Fm(d):P!==null?(P.return=v,ae=P):Fm(d);for(;g!==null;)ae=g,Om(g),g=g.sibling;ae=d,cu=S,Mt=B}Mm(n)}else d.subtreeFlags&8772&&g!==null?(g.return=d,ae=g):Mm(n)}}function Mm(n){for(;ae!==null;){var i=ae;if(i.flags&8772){var a=i.alternate;try{if(i.flags&8772)switch(i.tag){case 0:case 11:case 15:Mt||hu(5,i);break;case 1:var c=i.stateNode;if(i.flags&4&&!Mt)if(a===null)c.componentDidMount();else{var d=i.elementType===i.type?a.memoizedProps:Vn(i.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var g=i.updateQueue;g!==null&&bp(i,g,c);break;case 3:var v=i.updateQueue;if(v!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}bp(i,v,a)}break;case 5:var S=i.stateNode;if(a===null&&i.flags&4){a=S;var P=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":P.autoFocus&&a.focus();break;case"img":P.src&&(a.src=P.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var B=i.alternate;if(B!==null){var X=B.memoizedState;if(X!==null){var J=X.dehydrated;J!==null&&kn(J)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Mt||i.flags&512&&zh(i)}catch(Y){nt(i,i.return,Y)}}if(i===n){ae=null;break}if(a=i.sibling,a!==null){a.return=i.return,ae=a;break}ae=i.return}}function bm(n){for(;ae!==null;){var i=ae;if(i===n){ae=null;break}var a=i.sibling;if(a!==null){a.return=i.return,ae=a;break}ae=i.return}}function Fm(n){for(;ae!==null;){var i=ae;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{hu(4,i)}catch(P){nt(i,a,P)}break;case 1:var c=i.stateNode;if(typeof c.componentDidMount=="function"){var d=i.return;try{c.componentDidMount()}catch(P){nt(i,d,P)}}var g=i.return;try{zh(i)}catch(P){nt(i,g,P)}break;case 5:var v=i.return;try{zh(i)}catch(P){nt(i,v,P)}}}catch(P){nt(i,i.return,P)}if(i===n){ae=null;break}var S=i.sibling;if(S!==null){S.return=i.return,ae=S;break}ae=i.return}}var tw=Math.ceil,du=he.ReactCurrentDispatcher,qh=he.ReactCurrentOwner,_n=he.ReactCurrentBatchConfig,Oe=0,wt=null,lt=null,Ct=0,ln=0,io=Qr(0),mt=0,Sa=null,Yi=0,fu=0,Hh=0,Ra=null,Xt=null,Wh=0,so=1/0,Sr=null,pu=!1,Kh=null,ti=null,mu=!1,ni=null,gu=0,Aa=0,Gh=null,yu=-1,_u=0;function Ht(){return Oe&6?He():yu!==-1?yu:yu=He()}function ri(n){return n.mode&1?Oe&2&&Ct!==0?Ct&-Ct:FE.transition!==null?(_u===0&&(_u=Fi()),_u):(n=Ne,n!==0||(n=window.event,n=n===void 0?16:ea(n.type)),n):1}function Mn(n,i,a,c){if(50<Aa)throw Aa=0,Gh=null,Error(t(185));zr(n,a,c),(!(Oe&2)||n!==wt)&&(n===wt&&(!(Oe&2)&&(fu|=a),mt===4&&ii(n,Ct)),Jt(n,c),a===1&&Oe===0&&!(i.mode&1)&&(so=He()+500,Wl&&Xr()))}function Jt(n,i){var a=n.callbackNode;dr(n,i);var c=bi(n,n===wt?Ct:0);if(c===0)a!==null&&Qo(a),n.callbackNode=null,n.callbackPriority=0;else if(i=c&-c,n.callbackPriority!==i){if(a!=null&&Qo(a),i===1)n.tag===0?bE(jm.bind(null,n)):Rp(jm.bind(null,n)),VE(function(){!(Oe&6)&&Xr()}),a=null;else{switch($r(c)){case 1:a=Oi;break;case 4:a=Fr;break;case 16:a=hn;break;case 536870912:a=_l;break;default:a=hn}a=Gm(a,Um.bind(null,n))}n.callbackPriority=i,n.callbackNode=a}}function Um(n,i){if(yu=-1,_u=0,Oe&6)throw Error(t(327));var a=n.callbackNode;if(oo()&&n.callbackNode!==a)return null;var c=bi(n,n===wt?Ct:0);if(c===0)return null;if(c&30||c&n.expiredLanes||i)i=vu(n,c);else{i=c;var d=Oe;Oe|=2;var g=Bm();(wt!==n||Ct!==i)&&(Sr=null,so=He()+500,Ji(n,i));do try{iw();break}catch(S){zm(n,S)}while(!0);dh(),du.current=g,Oe=d,lt!==null?i=0:(wt=null,Ct=0,i=mt)}if(i!==0){if(i===2&&(d=nn(n),d!==0&&(c=d,i=Qh(n,d))),i===1)throw a=Sa,Ji(n,0),ii(n,c),Jt(n,He()),a;if(i===6)ii(n,c);else{if(d=n.current.alternate,!(c&30)&&!nw(d)&&(i=vu(n,c),i===2&&(g=nn(n),g!==0&&(c=g,i=Qh(n,g))),i===1))throw a=Sa,Ji(n,0),ii(n,c),Jt(n,He()),a;switch(n.finishedWork=d,n.finishedLanes=c,i){case 0:case 1:throw Error(t(345));case 2:Zi(n,Xt,Sr);break;case 3:if(ii(n,c),(c&130023424)===c&&(i=Wh+500-He(),10<i)){if(bi(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){Ht(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=th(Zi.bind(null,n,Xt,Sr),i);break}Zi(n,Xt,Sr);break;case 4:if(ii(n,c),(c&4194240)===c)break;for(i=n.eventTimes,d=-1;0<c;){var v=31-Bt(c);g=1<<v,v=i[v],v>d&&(d=v),c&=~g}if(c=d,c=He()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*tw(c/1960))-c,10<c){n.timeoutHandle=th(Zi.bind(null,n,Xt,Sr),c);break}Zi(n,Xt,Sr);break;case 5:Zi(n,Xt,Sr);break;default:throw Error(t(329))}}}return Jt(n,He()),n.callbackNode===a?Um.bind(null,n):null}function Qh(n,i){var a=Ra;return n.current.memoizedState.isDehydrated&&(Ji(n,i).flags|=256),n=vu(n,i),n!==2&&(i=Xt,Xt=a,i!==null&&Yh(i)),n}function Yh(n){Xt===null?Xt=n:Xt.push.apply(Xt,n)}function nw(n){for(var i=n;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],g=d.getSnapshot;d=d.value;try{if(!xn(g(),d))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ii(n,i){for(i&=~Hh,i&=~fu,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var a=31-Bt(i),c=1<<a;n[a]=-1,i&=~c}}function jm(n){if(Oe&6)throw Error(t(327));oo();var i=bi(n,0);if(!(i&1))return Jt(n,He()),null;var a=vu(n,i);if(n.tag!==0&&a===2){var c=nn(n);c!==0&&(i=c,a=Qh(n,c))}if(a===1)throw a=Sa,Ji(n,0),ii(n,i),Jt(n,He()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,Zi(n,Xt,Sr),Jt(n,He()),null}function Xh(n,i){var a=Oe;Oe|=1;try{return n(i)}finally{Oe=a,Oe===0&&(so=He()+500,Wl&&Xr())}}function Xi(n){ni!==null&&ni.tag===0&&!(Oe&6)&&oo();var i=Oe;Oe|=1;var a=_n.transition,c=Ne;try{if(_n.transition=null,Ne=1,n)return n()}finally{Ne=c,_n.transition=a,Oe=i,!(Oe&6)&&Xr()}}function Jh(){ln=io.current,Ge(io)}function Ji(n,i){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,DE(a)),lt!==null)for(a=lt.return;a!==null;){var c=a;switch(ah(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&ql();break;case 3:to(),Ge(Gt),Ge(Vt),Eh();break;case 5:_h(c);break;case 4:to();break;case 13:Ge(Je);break;case 19:Ge(Je);break;case 10:fh(c.type._context);break;case 22:case 23:Jh()}a=a.return}if(wt=n,lt=n=si(n.current,null),Ct=ln=i,mt=0,Sa=null,Hh=fu=Yi=0,Xt=Ra=null,Ki!==null){for(i=0;i<Ki.length;i++)if(a=Ki[i],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,g=a.pending;if(g!==null){var v=g.next;g.next=d,c.next=v}a.pending=c}Ki=null}return n}function zm(n,i){do{var a=lt;try{if(dh(),nu.current=ou,ru){for(var c=Ze.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}ru=!1}if(Qi=0,Et=pt=Ze=null,_a=!1,va=0,qh.current=null,a===null||a.return===null){mt=1,Sa=i,lt=null;break}e:{var g=n,v=a.return,S=a,P=i;if(i=Ct,S.flags|=32768,P!==null&&typeof P=="object"&&typeof P.then=="function"){var B=P,X=S,J=X.tag;if(!(X.mode&1)&&(J===0||J===11||J===15)){var Y=X.alternate;Y?(X.updateQueue=Y.updateQueue,X.memoizedState=Y.memoizedState,X.lanes=Y.lanes):(X.updateQueue=null,X.memoizedState=null)}var re=dm(v);if(re!==null){re.flags&=-257,fm(re,v,S,g,i),re.mode&1&&hm(g,B,i),i=re,P=B;var le=i.updateQueue;if(le===null){var ue=new Set;ue.add(P),i.updateQueue=ue}else le.add(P);break e}else{if(!(i&1)){hm(g,B,i),Zh();break e}P=Error(t(426))}}else if(Xe&&S.mode&1){var st=dm(v);if(st!==null){!(st.flags&65536)&&(st.flags|=256),fm(st,v,S,g,i),ch(no(P,S));break e}}g=P=no(P,S),mt!==4&&(mt=2),Ra===null?Ra=[g]:Ra.push(g),g=v;do{switch(g.tag){case 3:g.flags|=65536,i&=-i,g.lanes|=i;var U=um(g,P,i);Mp(g,U);break e;case 1:S=P;var x=g.type,z=g.stateNode;if(!(g.flags&128)&&(typeof x.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(ti===null||!ti.has(z)))){g.flags|=65536,i&=-i,g.lanes|=i;var Z=cm(g,S,i);Mp(g,Z);break e}}g=g.return}while(g!==null)}qm(a)}catch(de){i=de,lt===a&&a!==null&&(lt=a=a.return);continue}break}while(!0)}function Bm(){var n=du.current;return du.current=ou,n===null?ou:n}function Zh(){(mt===0||mt===3||mt===2)&&(mt=4),wt===null||!(Yi&268435455)&&!(fu&268435455)||ii(wt,Ct)}function vu(n,i){var a=Oe;Oe|=2;var c=Bm();(wt!==n||Ct!==i)&&(Sr=null,Ji(n,i));do try{rw();break}catch(d){zm(n,d)}while(!0);if(dh(),Oe=a,du.current=c,lt!==null)throw Error(t(261));return wt=null,Ct=0,mt}function rw(){for(;lt!==null;)$m(lt)}function iw(){for(;lt!==null&&!gl();)$m(lt)}function $m(n){var i=Km(n.alternate,n,ln);n.memoizedProps=n.pendingProps,i===null?qm(n):lt=i,qh.current=null}function qm(n){var i=n;do{var a=i.alternate;if(n=i.return,i.flags&32768){if(a=XE(a,i),a!==null){a.flags&=32767,lt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{mt=6,lt=null;return}}else if(a=YE(a,i,ln),a!==null){lt=a;return}if(i=i.sibling,i!==null){lt=i;return}lt=i=n}while(i!==null);mt===0&&(mt=5)}function Zi(n,i,a){var c=Ne,d=_n.transition;try{_n.transition=null,Ne=1,sw(n,i,a,c)}finally{_n.transition=d,Ne=c}return null}function sw(n,i,a,c){do oo();while(ni!==null);if(Oe&6)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var g=a.lanes|a.childLanes;if($e(n,g),n===wt&&(lt=wt=null,Ct=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||mu||(mu=!0,Gm(hn,function(){return oo(),null})),g=(a.flags&15990)!==0,a.subtreeFlags&15990||g){g=_n.transition,_n.transition=null;var v=Ne;Ne=1;var S=Oe;Oe|=4,qh.current=null,ZE(n,a),Lm(a,n),RE(Zc),Hr=!!Jc,Zc=Jc=null,n.current=a,ew(a),Mc(),Oe=S,Ne=v,_n.transition=g}else n.current=a;if(mu&&(mu=!1,ni=n,gu=d),g=n.pendingLanes,g===0&&(ti=null),vl(a.stateNode),Jt(n,He()),i!==null)for(c=n.onRecoverableError,a=0;a<i.length;a++)d=i[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(pu)throw pu=!1,n=Kh,Kh=null,n;return gu&1&&n.tag!==0&&oo(),g=n.pendingLanes,g&1?n===Gh?Aa++:(Aa=0,Gh=n):Aa=0,Xr(),null}function oo(){if(ni!==null){var n=$r(gu),i=_n.transition,a=Ne;try{if(_n.transition=null,Ne=16>n?16:n,ni===null)var c=!1;else{if(n=ni,ni=null,gu=0,Oe&6)throw Error(t(331));var d=Oe;for(Oe|=4,ae=n.current;ae!==null;){var g=ae,v=g.child;if(ae.flags&16){var S=g.deletions;if(S!==null){for(var P=0;P<S.length;P++){var B=S[P];for(ae=B;ae!==null;){var X=ae;switch(X.tag){case 0:case 11:case 15:Ia(8,X,g)}var J=X.child;if(J!==null)J.return=X,ae=J;else for(;ae!==null;){X=ae;var Y=X.sibling,re=X.return;if(km(X),X===B){ae=null;break}if(Y!==null){Y.return=re,ae=Y;break}ae=re}}}var le=g.alternate;if(le!==null){var ue=le.child;if(ue!==null){le.child=null;do{var st=ue.sibling;ue.sibling=null,ue=st}while(ue!==null)}}ae=g}}if(g.subtreeFlags&2064&&v!==null)v.return=g,ae=v;else e:for(;ae!==null;){if(g=ae,g.flags&2048)switch(g.tag){case 0:case 11:case 15:Ia(9,g,g.return)}var U=g.sibling;if(U!==null){U.return=g.return,ae=U;break e}ae=g.return}}var x=n.current;for(ae=x;ae!==null;){v=ae;var z=v.child;if(v.subtreeFlags&2064&&z!==null)z.return=v,ae=z;else e:for(v=x;ae!==null;){if(S=ae,S.flags&2048)try{switch(S.tag){case 0:case 11:case 15:hu(9,S)}}catch(de){nt(S,S.return,de)}if(S===v){ae=null;break e}var Z=S.sibling;if(Z!==null){Z.return=S.return,ae=Z;break e}ae=S.return}}if(Oe=d,Xr(),tn&&typeof tn.onPostCommitFiberRoot=="function")try{tn.onPostCommitFiberRoot(Mi,n)}catch{}c=!0}return c}finally{Ne=a,_n.transition=i}}return!1}function Hm(n,i,a){i=no(a,i),i=um(n,i,1),n=Zr(n,i,1),i=Ht(),n!==null&&(zr(n,1,i),Jt(n,i))}function nt(n,i,a){if(n.tag===3)Hm(n,n,a);else for(;i!==null;){if(i.tag===3){Hm(i,n,a);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ti===null||!ti.has(c))){n=no(a,n),n=cm(i,n,1),i=Zr(i,n,1),n=Ht(),i!==null&&(zr(i,1,n),Jt(i,n));break}}i=i.return}}function ow(n,i,a){var c=n.pingCache;c!==null&&c.delete(i),i=Ht(),n.pingedLanes|=n.suspendedLanes&a,wt===n&&(Ct&a)===a&&(mt===4||mt===3&&(Ct&130023424)===Ct&&500>He()-Wh?Ji(n,0):Hh|=a),Jt(n,i)}function Wm(n,i){i===0&&(n.mode&1?(i=ks,ks<<=1,!(ks&130023424)&&(ks=4194304)):i=1);var a=Ht();n=wr(n,i),n!==null&&(zr(n,i,a),Jt(n,a))}function aw(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),Wm(n,a)}function lw(n,i){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(i),Wm(n,a)}var Km;Km=function(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps||Gt.current)Yt=!0;else{if(!(n.lanes&a)&&!(i.flags&128))return Yt=!1,QE(n,i,a);Yt=!!(n.flags&131072)}else Yt=!1,Xe&&i.flags&1048576&&Ap(i,Gl,i.index);switch(i.lanes=0,i.tag){case 2:var c=i.type;uu(n,i),n=i.pendingProps;var d=Gs(i,Vt.current);eo(i,a),d=Ih(null,i,c,n,d,a);var g=Sh();return i.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Qt(c)?(g=!0,Hl(i)):g=!1,i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,gh(i),d.updater=au,i.stateNode=d,d._reactInternals=i,Nh(i,c,n,a),i=Lh(null,i,c,!0,g,a)):(i.tag=0,Xe&&g&&oh(i),qt(null,i,d,a),i=i.child),i;case 16:c=i.elementType;e:{switch(uu(n,i),n=i.pendingProps,d=c._init,c=d(c._payload),i.type=c,d=i.tag=cw(c),n=Vn(c,n),d){case 0:i=Vh(null,i,c,n,a);break e;case 1:i=vm(null,i,c,n,a);break e;case 11:i=pm(null,i,c,n,a);break e;case 14:i=mm(null,i,c,Vn(c.type,n),a);break e}throw Error(t(306,c,""))}return i;case 0:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Vn(c,d),Vh(n,i,c,d,a);case 1:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Vn(c,d),vm(n,i,c,d,a);case 3:e:{if(Em(i),n===null)throw Error(t(387));c=i.pendingProps,g=i.memoizedState,d=g.element,Op(n,i),eu(i,c,null,a);var v=i.memoizedState;if(c=v.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){d=no(Error(t(423)),i),i=wm(n,i,c,a,d);break e}else if(c!==d){d=no(Error(t(424)),i),i=wm(n,i,c,a,d);break e}else for(an=Gr(i.stateNode.containerInfo.firstChild),on=i,Xe=!0,Dn=null,a=Vp(i,null,c,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Xs(),c===d){i=Ir(n,i,a);break e}qt(n,i,c,a)}i=i.child}return i;case 5:return Fp(i),n===null&&uh(i),c=i.type,d=i.pendingProps,g=n!==null?n.memoizedProps:null,v=d.children,eh(c,d)?v=null:g!==null&&eh(c,g)&&(i.flags|=32),_m(n,i),qt(n,i,v,a),i.child;case 6:return n===null&&uh(i),null;case 13:return Tm(n,i,a);case 4:return yh(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=Js(i,null,c,a):qt(n,i,c,a),i.child;case 11:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Vn(c,d),pm(n,i,c,d,a);case 7:return qt(n,i,i.pendingProps,a),i.child;case 8:return qt(n,i,i.pendingProps.children,a),i.child;case 12:return qt(n,i,i.pendingProps.children,a),i.child;case 10:e:{if(c=i.type._context,d=i.pendingProps,g=i.memoizedProps,v=d.value,We(Xl,c._currentValue),c._currentValue=v,g!==null)if(xn(g.value,v)){if(g.children===d.children&&!Gt.current){i=Ir(n,i,a);break e}}else for(g=i.child,g!==null&&(g.return=i);g!==null;){var S=g.dependencies;if(S!==null){v=g.child;for(var P=S.firstContext;P!==null;){if(P.context===c){if(g.tag===1){P=Tr(-1,a&-a),P.tag=2;var B=g.updateQueue;if(B!==null){B=B.shared;var X=B.pending;X===null?P.next=P:(P.next=X.next,X.next=P),B.pending=P}}g.lanes|=a,P=g.alternate,P!==null&&(P.lanes|=a),ph(g.return,a,i),S.lanes|=a;break}P=P.next}}else if(g.tag===10)v=g.type===i.type?null:g.child;else if(g.tag===18){if(v=g.return,v===null)throw Error(t(341));v.lanes|=a,S=v.alternate,S!==null&&(S.lanes|=a),ph(v,a,i),v=g.sibling}else v=g.child;if(v!==null)v.return=g;else for(v=g;v!==null;){if(v===i){v=null;break}if(g=v.sibling,g!==null){g.return=v.return,v=g;break}v=v.return}g=v}qt(n,i,d.children,a),i=i.child}return i;case 9:return d=i.type,c=i.pendingProps.children,eo(i,a),d=gn(d),c=c(d),i.flags|=1,qt(n,i,c,a),i.child;case 14:return c=i.type,d=Vn(c,i.pendingProps),d=Vn(c.type,d),mm(n,i,c,d,a);case 15:return gm(n,i,i.type,i.pendingProps,a);case 17:return c=i.type,d=i.pendingProps,d=i.elementType===c?d:Vn(c,d),uu(n,i),i.tag=1,Qt(c)?(n=!0,Hl(i)):n=!1,eo(i,a),am(i,c,d),Nh(i,c,d,a),Lh(null,i,c,!0,n,a);case 19:return Sm(n,i,a);case 22:return ym(n,i,a)}throw Error(t(156,i.tag))};function Gm(n,i){return Cs(n,i)}function uw(n,i,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(n,i,a,c){return new uw(n,i,a,c)}function ed(n){return n=n.prototype,!(!n||!n.isReactComponent)}function cw(n){if(typeof n=="function")return ed(n)?1:0;if(n!=null){if(n=n.$$typeof,n===b)return 11;if(n===xt)return 14}return 2}function si(n,i){var a=n.alternate;return a===null?(a=vn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Eu(n,i,a,c,d,g){var v=2;if(c=n,typeof n=="function")ed(n)&&(v=1);else if(typeof n=="string")v=5;else e:switch(n){case N:return es(a.children,d,g,i);case I:v=8,d|=8;break;case R:return n=vn(12,a,i,d|2),n.elementType=R,n.lanes=g,n;case C:return n=vn(13,a,i,d),n.elementType=C,n.lanes=g,n;case rt:return n=vn(19,a,i,d),n.elementType=rt,n.lanes=g,n;case ze:return wu(a,d,g,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case k:v=10;break e;case D:v=9;break e;case b:v=11;break e;case xt:v=14;break e;case Dt:v=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=vn(v,a,i,d),i.elementType=n,i.type=c,i.lanes=g,i}function es(n,i,a,c){return n=vn(7,n,c,i),n.lanes=a,n}function wu(n,i,a,c){return n=vn(22,n,c,i),n.elementType=ze,n.lanes=a,n.stateNode={isHidden:!1},n}function td(n,i,a){return n=vn(6,n,null,i),n.lanes=a,n}function nd(n,i,a){return i=vn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function hw(n,i,a,c,d){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jr(0),this.expirationTimes=jr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jr(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function rd(n,i,a,c,d,g,v,S,P){return n=new hw(n,i,a,S,P),i===1?(i=1,g===!0&&(i|=8)):i=0,g=vn(3,null,null,i),n.current=g,g.stateNode=n,g.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},gh(g),n}function dw(n,i,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:we,key:c==null?null:""+c,children:n,containerInfo:i,implementation:a}}function Qm(n){if(!n)return Yr;n=n._reactInternals;e:{if(Sn(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Qt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Qt(a))return Ip(n,a,i)}return i}function Ym(n,i,a,c,d,g,v,S,P){return n=rd(a,c,!0,n,d,g,v,S,P),n.context=Qm(null),a=n.current,c=Ht(),d=ri(a),g=Tr(c,d),g.callback=i??null,Zr(a,g,d),n.current.lanes=d,zr(n,d,c),Jt(n,c),n}function Tu(n,i,a,c){var d=i.current,g=Ht(),v=ri(d);return a=Qm(a),i.context===null?i.context=a:i.pendingContext=a,i=Tr(g,v),i.payload={element:n},c=c===void 0?null:c,c!==null&&(i.callback=c),n=Zr(d,i,v),n!==null&&(Mn(n,d,v,g),Zl(n,d,v)),v}function Iu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Xm(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function id(n,i){Xm(n,i),(n=n.alternate)&&Xm(n,i)}var Jm=typeof reportError=="function"?reportError:function(n){console.error(n)};function sd(n){this._internalRoot=n}Su.prototype.render=sd.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));Tu(n,i,null,null)},Su.prototype.unmount=sd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;Xi(function(){Tu(null,n,null,null)}),i[yr]=null}};function Su(n){this._internalRoot=n}Su.prototype.unstable_scheduleHydration=function(n){if(n){var i=Sl();n={blockedOn:null,target:n,priority:i};for(var a=0;a<qn.length&&i!==0&&i<qn[a].priority;a++);qn.splice(a,0,n),a===0&&Cl(n)}};function od(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Ru(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Zm(){}function fw(n,i,a,c,d){if(d){if(typeof c=="function"){var g=c;c=function(){var B=Iu(v);g.call(B)}}var v=Ym(i,c,n,0,null,!1,!1,"",Zm);return n._reactRootContainer=v,n[yr]=v.current,ca(n.nodeType===8?n.parentNode:n),Xi(),v}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var S=c;c=function(){var B=Iu(P);S.call(B)}}var P=rd(n,0,!1,null,null,!1,!1,"",Zm);return n._reactRootContainer=P,n[yr]=P.current,ca(n.nodeType===8?n.parentNode:n),Xi(function(){Tu(i,P,a,c)}),P}function Au(n,i,a,c,d){var g=a._reactRootContainer;if(g){var v=g;if(typeof d=="function"){var S=d;d=function(){var P=Iu(v);S.call(P)}}Tu(i,v,n,d)}else v=fw(a,i,n,d,c);return Iu(v)}Tl=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var a=Ur(i.pendingLanes);a!==0&&(Br(i,a|1),Jt(i,He()),!(Oe&6)&&(so=He()+500,Xr()))}break;case 13:Xi(function(){var c=wr(n,1);if(c!==null){var d=Ht();Mn(c,n,1,d)}}),id(n,1)}},Ns=function(n){if(n.tag===13){var i=wr(n,134217728);if(i!==null){var a=Ht();Mn(i,n,134217728,a)}id(n,134217728)}},Il=function(n){if(n.tag===13){var i=ri(n),a=wr(n,i);if(a!==null){var c=Ht();Mn(a,n,i,c)}id(n,i)}},Sl=function(){return Ne},Rl=function(n,i){var a=Ne;try{return Ne=n,i()}finally{Ne=a}},ws=function(n,i,a){switch(i){case"input":if(Oo(n,a),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var c=a[i];if(c!==n&&c.form===n.form){var d=$l(c);if(!d)throw Error(t(90));ms(c),Oo(c,d)}}}break;case"textarea":vs(n,a);break;case"select":i=a.value,i!=null&&ur(n,!!a.multiple,i,!1)}},xi=Xh,Ho=Xi;var pw={usingClientEntryPoint:!1,Events:[fa,Ws,$l,Bn,qo,Xh]},Ca={findFiberByHostInstance:$i,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},mw={bundleType:Ca.bundleType,version:Ca.version,rendererPackageName:Ca.rendererPackageName,rendererConfig:Ca.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:he.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Go(n),n===null?null:n.stateNode},findFiberByHostInstance:Ca.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cu.isDisabled&&Cu.supportsFiber)try{Mi=Cu.inject(mw),tn=Cu}catch{}}return Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pw,Zt.createPortal=function(n,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!od(i))throw Error(t(200));return dw(n,i,null,a)},Zt.createRoot=function(n,i){if(!od(n))throw Error(t(299));var a=!1,c="",d=Jm;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),i=rd(n,1,!1,null,null,a,!1,c,d),n[yr]=i.current,ca(n.nodeType===8?n.parentNode:n),new sd(i)},Zt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Go(i),n=n===null?null:n.stateNode,n},Zt.flushSync=function(n){return Xi(n)},Zt.hydrate=function(n,i,a){if(!Ru(i))throw Error(t(200));return Au(null,n,i,!0,a)},Zt.hydrateRoot=function(n,i,a){if(!od(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,g="",v=Jm;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),i=Ym(i,null,n,1,a??null,d,!1,g,v),n[yr]=i.current,ca(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,d]:i.mutableSourceEagerHydrationData.push(a,d);return new Su(i)},Zt.render=function(n,i,a){if(!Ru(i))throw Error(t(200));return Au(null,n,i,!1,a)},Zt.unmountComponentAtNode=function(n){if(!Ru(n))throw Error(t(40));return n._reactRootContainer?(Xi(function(){Au(null,null,n,!1,function(){n._reactRootContainer=null,n[yr]=null})}),!0):!1},Zt.unstable_batchedUpdates=Xh,Zt.unstable_renderSubtreeIntoContainer=function(n,i,a,c){if(!Ru(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Au(n,i,a,!1,c)},Zt.version="18.3.1-next-f1338f8080-20240426",Zt}var ag;function Iw(){if(ag)return ud.exports;ag=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),ud.exports=Tw(),ud.exports}var lg;function Sw(){if(lg)return Pu;lg=1;var r=Iw();return Pu.createRoot=r.createRoot,Pu.hydrateRoot=r.hydrateRoot,Pu}var Rw=Sw(),ka={},ug;function Aw(){if(ug)return ka;ug=1,Object.defineProperty(ka,"__esModule",{value:!0}),ka.parse=h,ka.serialize=y;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,l=(()=>{const A=function(){};return A.prototype=Object.create(null),A})();function h(A,V){const L=new l,j=A.length;if(j<2)return L;const O=(V==null?void 0:V.decode)||E;let H=0;do{const G=A.indexOf("=",H);if(G===-1)break;const ne=A.indexOf(";",H),he=ne===-1?j:ne;if(G>he){H=A.lastIndexOf(";",G-1)+1;continue}const Se=f(A,H,G),we=p(A,G,Se),N=A.slice(Se,we);if(L[N]===void 0){let I=f(A,G+1,he),R=p(A,he,I);const k=O(A.slice(I,R));L[N]=k}H=he+1}while(H<j);return L}function f(A,V,L){do{const j=A.charCodeAt(V);if(j!==32&&j!==9)return V}while(++V<L);return L}function p(A,V,L){for(;V>L;){const j=A.charCodeAt(--V);if(j!==32&&j!==9)return V+1}return L}function y(A,V,L){const j=(L==null?void 0:L.encode)||encodeURIComponent;if(!r.test(A))throw new TypeError(`argument name is invalid: ${A}`);const O=j(V);if(!e.test(O))throw new TypeError(`argument val is invalid: ${V}`);let H=A+"="+O;if(!L)return H;if(L.maxAge!==void 0){if(!Number.isInteger(L.maxAge))throw new TypeError(`option maxAge is invalid: ${L.maxAge}`);H+="; Max-Age="+L.maxAge}if(L.domain){if(!t.test(L.domain))throw new TypeError(`option domain is invalid: ${L.domain}`);H+="; Domain="+L.domain}if(L.path){if(!s.test(L.path))throw new TypeError(`option path is invalid: ${L.path}`);H+="; Path="+L.path}if(L.expires){if(!T(L.expires)||!Number.isFinite(L.expires.valueOf()))throw new TypeError(`option expires is invalid: ${L.expires}`);H+="; Expires="+L.expires.toUTCString()}if(L.httpOnly&&(H+="; HttpOnly"),L.secure&&(H+="; Secure"),L.partitioned&&(H+="; Partitioned"),L.priority)switch(typeof L.priority=="string"?L.priority.toLowerCase():void 0){case"low":H+="; Priority=Low";break;case"medium":H+="; Priority=Medium";break;case"high":H+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${L.priority}`)}if(L.sameSite)switch(typeof L.sameSite=="string"?L.sameSite.toLowerCase():L.sameSite){case!0:case"strict":H+="; SameSite=Strict";break;case"lax":H+="; SameSite=Lax";break;case"none":H+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${L.sameSite}`)}return H}function E(A){if(A.indexOf("%")===-1)return A;try{return decodeURIComponent(A)}catch{return A}}function T(A){return o.call(A)==="[object Date]"}return ka}Aw();/**
 * react-router v7.1.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var cg="popstate";function Cw(r={}){function e(o,l){let{pathname:h="/",search:f="",hash:p=""}=us(o.location.hash.substring(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),Ad("",{pathname:h,search:f,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(o,l){let h=o.document.querySelector("base"),f="";if(h&&h.getAttribute("href")){let p=o.location.href,y=p.indexOf("#");f=y===-1?p:p.slice(0,y)}return f+"#"+(typeof l=="string"?l:Ba(l))}function s(o,l){Fn(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return kw(e,t,s,r)}function et(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Fn(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Pw(){return Math.random().toString(36).substring(2,10)}function hg(r,e){return{usr:r.state,key:r.key,idx:e}}function Ad(r,e,t=null,s){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?us(e):e,state:t,key:e&&e.key||s||Pw()}}function Ba({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function us(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let s=r.indexOf("?");s>=0&&(e.search=r.substring(s),r=r.substring(0,s)),r&&(e.pathname=r)}return e}function kw(r,e,t,s={}){let{window:o=document.defaultView,v5Compat:l=!1}=s,h=o.history,f="POP",p=null,y=E();y==null&&(y=0,h.replaceState({...h.state,idx:y},""));function E(){return(h.state||{idx:null}).idx}function T(){f="POP";let O=E(),H=O==null?null:O-y;y=O,p&&p({action:f,location:j.location,delta:H})}function A(O,H){f="PUSH";let G=Ad(j.location,O,H);t(G,O),y=E()+1;let ne=hg(G,y),he=j.createHref(G);try{h.pushState(ne,"",he)}catch(Se){if(Se instanceof DOMException&&Se.name==="DataCloneError")throw Se;o.location.assign(he)}l&&p&&p({action:f,location:j.location,delta:1})}function V(O,H){f="REPLACE";let G=Ad(j.location,O,H);t(G,O),y=E();let ne=hg(G,y),he=j.createHref(G);h.replaceState(ne,"",he),l&&p&&p({action:f,location:j.location,delta:0})}function L(O){let H=o.location.origin!=="null"?o.location.origin:o.location.href,G=typeof O=="string"?O:Ba(O);return G=G.replace(/ $/,"%20"),et(H,`No window.location.(origin|href) available to create URL for href: ${G}`),new URL(G,H)}let j={get action(){return f},get location(){return r(o,h)},listen(O){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(cg,T),p=O,()=>{o.removeEventListener(cg,T),p=null}},createHref(O){return e(o,O)},createURL:L,encodeLocation(O){let H=L(O);return{pathname:H.pathname,search:H.search,hash:H.hash}},push:A,replace:V,go(O){return h.go(O)}};return j}function My(r,e,t="/"){return Nw(r,e,t,!1)}function Nw(r,e,t,s){let o=typeof e=="string"?us(e):e,l=_i(o.pathname||"/",t);if(l==null)return null;let h=by(r);xw(h);let f=null;for(let p=0;f==null&&p<h.length;++p){let y=Bw(l);f=jw(h[p],y,s)}return f}function by(r,e=[],t=[],s=""){let o=(l,h,f)=>{let p={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};p.relativePath.startsWith("/")&&(et(p.relativePath.startsWith(s),`Absolute route path "${p.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(s.length));let y=Pr([s,p.relativePath]),E=t.concat(p);l.children&&l.children.length>0&&(et(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),by(l.children,e,E,y)),!(l.path==null&&!l.index)&&e.push({path:y,score:Fw(y,l.index),routesMeta:E})};return r.forEach((l,h)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))o(l,h);else for(let p of Fy(l.path))o(l,h,p)}),e}function Fy(r){let e=r.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return o?[l,""]:[l];let h=Fy(s.join("/")),f=[];return f.push(...h.map(p=>p===""?l:[l,p].join("/"))),o&&f.push(...h),f.map(p=>r.startsWith("/")&&p===""?"/":p)}function xw(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:Uw(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var Dw=/^:[\w-]+$/,Vw=3,Lw=2,Ow=1,Mw=10,bw=-2,dg=r=>r==="*";function Fw(r,e){let t=r.split("/"),s=t.length;return t.some(dg)&&(s+=bw),e&&(s+=Lw),t.filter(o=>!dg(o)).reduce((o,l)=>o+(Dw.test(l)?Vw:l===""?Ow:Mw),s)}function Uw(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function jw(r,e,t=!1){let{routesMeta:s}=r,o={},l="/",h=[];for(let f=0;f<s.length;++f){let p=s[f],y=f===s.length-1,E=l==="/"?e:e.slice(l.length)||"/",T=Yu({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},E),A=p.route;if(!T&&y&&t&&!s[s.length-1].route.index&&(T=Yu({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},E)),!T)return null;Object.assign(o,T.params),h.push({params:o,pathname:Pr([l,T.pathname]),pathnameBase:Ww(Pr([l,T.pathnameBase])),route:A}),T.pathnameBase!=="/"&&(l=Pr([l,T.pathnameBase]))}return h}function Yu(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,s]=zw(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],h=l.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:s.reduce((y,{paramName:E,isOptional:T},A)=>{if(E==="*"){let L=f[A]||"";h=l.slice(0,l.length-L.length).replace(/(.)\/+$/,"$1")}const V=f[A];return T&&!V?y[E]=void 0:y[E]=(V||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:h,pattern:r}}function zw(r,e=!1,t=!0){Fn(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,f,p)=>(s.push({paramName:f,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function Bw(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Fn(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function _i(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=r.charAt(t);return s&&s!=="/"?null:r.slice(t)||"/"}function $w(r,e="/"){let{pathname:t,search:s="",hash:o=""}=typeof r=="string"?us(r):r;return{pathname:t?t.startsWith("/")?t:qw(t,e):e,search:Kw(s),hash:Gw(o)}}function qw(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function dd(r,e,t,s){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Hw(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Uy(r){let e=Hw(r);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function jy(r,e,t,s=!1){let o;typeof r=="string"?o=us(r):(o={...r},et(!o.pathname||!o.pathname.includes("?"),dd("?","pathname","search",o)),et(!o.pathname||!o.pathname.includes("#"),dd("#","pathname","hash",o)),et(!o.search||!o.search.includes("#"),dd("#","search","hash",o)));let l=r===""||o.pathname==="",h=l?"/":o.pathname,f;if(h==null)f=t;else{let T=e.length-1;if(!s&&h.startsWith("..")){let A=h.split("/");for(;A[0]==="..";)A.shift(),T-=1;o.pathname=A.join("/")}f=T>=0?e[T]:"/"}let p=$w(o,f),y=h&&h!=="/"&&h.endsWith("/"),E=(l||h===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(y||E)&&(p.pathname+="/"),p}var Pr=r=>r.join("/").replace(/\/\/+/g,"/"),Ww=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),Kw=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,Gw=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function Qw(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var zy=["POST","PUT","PATCH","DELETE"];new Set(zy);var Yw=["GET",...zy];new Set(Yw);var Ao=q.createContext(null);Ao.displayName="DataRouter";var mc=q.createContext(null);mc.displayName="DataRouterState";var By=q.createContext({isTransitioning:!1});By.displayName="ViewTransition";var Xw=q.createContext(new Map);Xw.displayName="Fetchers";var Jw=q.createContext(null);Jw.displayName="Await";var or=q.createContext(null);or.displayName="Navigation";var Ja=q.createContext(null);Ja.displayName="Location";var Lr=q.createContext({outlet:null,matches:[],isDataRoute:!1});Lr.displayName="Route";var Zd=q.createContext(null);Zd.displayName="RouteError";function Zw(r,{relative:e}={}){et(Za(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=q.useContext(or),{hash:o,pathname:l,search:h}=tl(r,{relative:e}),f=l;return t!=="/"&&(f=l==="/"?t:Pr([t,l])),s.createHref({pathname:f,search:h,hash:o})}function Za(){return q.useContext(Ja)!=null}function Si(){return et(Za(),"useLocation() may be used only in the context of a <Router> component."),q.useContext(Ja).location}var $y="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function qy(r){q.useContext(or).static||q.useLayoutEffect(r)}function el(){let{isDataRoute:r}=q.useContext(Lr);return r?dT():eT()}function eT(){et(Za(),"useNavigate() may be used only in the context of a <Router> component.");let r=q.useContext(Ao),{basename:e,navigator:t}=q.useContext(or),{matches:s}=q.useContext(Lr),{pathname:o}=Si(),l=JSON.stringify(Uy(s)),h=q.useRef(!1);return qy(()=>{h.current=!0}),q.useCallback((p,y={})=>{if(Fn(h.current,$y),!h.current)return;if(typeof p=="number"){t.go(p);return}let E=jy(p,JSON.parse(l),o,y.relative==="path");r==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:Pr([e,E.pathname])),(y.replace?t.replace:t.push)(E,y.state,y)},[e,t,l,o,r])}q.createContext(null);function tl(r,{relative:e}={}){let{matches:t}=q.useContext(Lr),{pathname:s}=Si(),o=JSON.stringify(Uy(t));return q.useMemo(()=>jy(r,JSON.parse(o),s,e==="path"),[r,o,s,e])}function tT(r,e){return Hy(r,e)}function Hy(r,e,t,s){var H;et(Za(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=q.useContext(or),{matches:l}=q.useContext(Lr),h=l[l.length-1],f=h?h.params:{},p=h?h.pathname:"/",y=h?h.pathnameBase:"/",E=h&&h.route;{let G=E&&E.path||"";Wy(p,!E||G.endsWith("*")||G.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${G}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${G}"> to <Route path="${G==="/"?"*":`${G}/*`}">.`)}let T=Si(),A;if(e){let G=typeof e=="string"?us(e):e;et(y==="/"||((H=G.pathname)==null?void 0:H.startsWith(y)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${G.pathname}" was given in the \`location\` prop.`),A=G}else A=T;let V=A.pathname||"/",L=V;if(y!=="/"){let G=y.replace(/^\//,"").split("/");L="/"+V.replace(/^\//,"").split("/").slice(G.length).join("/")}let j=My(r,{pathname:L});Fn(E||j!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),Fn(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let O=oT(j&&j.map(G=>Object.assign({},G,{params:Object.assign({},f,G.params),pathname:Pr([y,o.encodeLocation?o.encodeLocation(G.pathname).pathname:G.pathname]),pathnameBase:G.pathnameBase==="/"?y:Pr([y,o.encodeLocation?o.encodeLocation(G.pathnameBase).pathname:G.pathnameBase])})),l,t,s);return e&&O?q.createElement(Ja.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},O):O}function nT(){let r=hT(),e=Qw(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},l={padding:"2px 4px",backgroundColor:s},h=null;return console.error("Error handled by React Router default ErrorBoundary:",r),h=q.createElement(q.Fragment,null,q.createElement("p",null," Hey developer "),q.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",q.createElement("code",{style:l},"ErrorBoundary")," or"," ",q.createElement("code",{style:l},"errorElement")," prop on your route.")),q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},e),t?q.createElement("pre",{style:o},t):null,h)}var rT=q.createElement(nT,null),iT=class extends q.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){console.error("React Router caught the following error during render",r,e)}render(){return this.state.error!==void 0?q.createElement(Lr.Provider,{value:this.props.routeContext},q.createElement(Zd.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function sT({routeContext:r,match:e,children:t}){let s=q.useContext(Ao);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),q.createElement(Lr.Provider,{value:r},t)}function oT(r,e=[],t=null,s=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let o=r,l=t==null?void 0:t.errors;if(l!=null){let p=o.findIndex(y=>y.route.id&&(l==null?void 0:l[y.route.id])!==void 0);et(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let h=!1,f=-1;if(t)for(let p=0;p<o.length;p++){let y=o[p];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(f=p),y.route.id){let{loaderData:E,errors:T}=t,A=y.route.loader&&!E.hasOwnProperty(y.route.id)&&(!T||T[y.route.id]===void 0);if(y.route.lazy||A){h=!0,f>=0?o=o.slice(0,f+1):o=[o[0]];break}}}return o.reduceRight((p,y,E)=>{let T,A=!1,V=null,L=null;t&&(T=l&&y.route.id?l[y.route.id]:void 0,V=y.route.errorElement||rT,h&&(f<0&&E===0?(Wy("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,L=null):f===E&&(A=!0,L=y.route.hydrateFallbackElement||null)));let j=e.concat(o.slice(0,E+1)),O=()=>{let H;return T?H=V:A?H=L:y.route.Component?H=q.createElement(y.route.Component,null):y.route.element?H=y.route.element:H=p,q.createElement(sT,{match:y,routeContext:{outlet:p,matches:j,isDataRoute:t!=null},children:H})};return t&&(y.route.ErrorBoundary||y.route.errorElement||E===0)?q.createElement(iT,{location:t.location,revalidation:t.revalidation,component:V,error:T,children:O(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):O()},null)}function ef(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function aT(r){let e=q.useContext(Ao);return et(e,ef(r)),e}function lT(r){let e=q.useContext(mc);return et(e,ef(r)),e}function uT(r){let e=q.useContext(Lr);return et(e,ef(r)),e}function tf(r){let e=uT(r),t=e.matches[e.matches.length-1];return et(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function cT(){return tf("useRouteId")}function hT(){var s;let r=q.useContext(Zd),e=lT("useRouteError"),t=tf("useRouteError");return r!==void 0?r:(s=e.errors)==null?void 0:s[t]}function dT(){let{router:r}=aT("useNavigate"),e=tf("useNavigate"),t=q.useRef(!1);return qy(()=>{t.current=!0}),q.useCallback(async(o,l={})=>{Fn(t.current,$y),t.current&&(typeof o=="number"?r.navigate(o):await r.navigate(o,{fromRouteId:e,...l}))},[r,e])}var fg={};function Wy(r,e,t){!e&&!fg[r]&&(fg[r]=!0,Fn(!1,t))}q.memo(fT);function fT({routes:r,future:e,state:t}){return Hy(r,void 0,t,e)}function bu(r){et(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function pT({basename:r="/",children:e=null,location:t,navigationType:s="POP",navigator:o,static:l=!1}){et(!Za(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=r.replace(/^\/*/,"/"),f=q.useMemo(()=>({basename:h,navigator:o,static:l,future:{}}),[h,o,l]);typeof t=="string"&&(t=us(t));let{pathname:p="/",search:y="",hash:E="",state:T=null,key:A="default"}=t,V=q.useMemo(()=>{let L=_i(p,h);return L==null?null:{location:{pathname:L,search:y,hash:E,state:T,key:A},navigationType:s}},[h,p,y,E,T,A,s]);return Fn(V!=null,`<Router basename="${h}"> is not able to match the URL "${p}${y}${E}" because it does not start with the basename, so the <Router> won't render anything.`),V==null?null:q.createElement(or.Provider,{value:f},q.createElement(Ja.Provider,{children:e,value:V}))}function mT({children:r,location:e}){return tT(Cd(r),e)}function Cd(r,e=[]){let t=[];return q.Children.forEach(r,(s,o)=>{if(!q.isValidElement(s))return;let l=[...e,o];if(s.type===q.Fragment){t.push.apply(t,Cd(s.props.children,l));return}et(s.type===bu,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),et(!s.props.index||!s.props.children,"An index route cannot have child routes.");let h={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=Cd(s.props.children,l)),t.push(h)}),t}var Fu="get",Uu="application/x-www-form-urlencoded";function gc(r){return r!=null&&typeof r.tagName=="string"}function gT(r){return gc(r)&&r.tagName.toLowerCase()==="button"}function yT(r){return gc(r)&&r.tagName.toLowerCase()==="form"}function _T(r){return gc(r)&&r.tagName.toLowerCase()==="input"}function vT(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function ET(r,e){return r.button===0&&(!e||e==="_self")&&!vT(r)}var ku=null;function wT(){if(ku===null)try{new FormData(document.createElement("form"),0),ku=!1}catch{ku=!0}return ku}var TT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function fd(r){return r!=null&&!TT.has(r)?(Fn(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Uu}"`),null):r}function IT(r,e){let t,s,o,l,h;if(yT(r)){let f=r.getAttribute("action");s=f?_i(f,e):null,t=r.getAttribute("method")||Fu,o=fd(r.getAttribute("enctype"))||Uu,l=new FormData(r)}else if(gT(r)||_T(r)&&(r.type==="submit"||r.type==="image")){let f=r.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=r.getAttribute("formaction")||f.getAttribute("action");if(s=p?_i(p,e):null,t=r.getAttribute("formmethod")||f.getAttribute("method")||Fu,o=fd(r.getAttribute("formenctype"))||fd(f.getAttribute("enctype"))||Uu,l=new FormData(f,r),!wT()){let{name:y,type:E,value:T}=r;if(E==="image"){let A=y?`${y}.`:"";l.append(`${A}x`,"0"),l.append(`${A}y`,"0")}else y&&l.append(y,T)}}else{if(gc(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Fu,s=null,o=Uu,h=r}return l&&o==="text/plain"&&(h=l,l=void 0),{action:s,method:t.toLowerCase(),encType:o,formData:l,body:h}}function nf(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}async function ST(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function RT(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function AT(r,e,t){let s=await Promise.all(r.map(async o=>{let l=e.routes[o.route.id];if(l){let h=await ST(l,t);return h.links?h.links():[]}return[]}));return NT(s.flat(1).filter(RT).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function pg(r,e,t,s,o,l){let h=(p,y)=>t[y]?p.route.id!==t[y].route.id:!0,f=(p,y)=>{var E;return t[y].pathname!==p.pathname||((E=t[y].route.path)==null?void 0:E.endsWith("*"))&&t[y].params["*"]!==p.params["*"]};return l==="assets"?e.filter((p,y)=>h(p,y)||f(p,y)):l==="data"?e.filter((p,y)=>{var T;let E=s.routes[p.route.id];if(!E||!E.hasLoader)return!1;if(h(p,y)||f(p,y))return!0;if(p.route.shouldRevalidate){let A=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((T=t[0])==null?void 0:T.params)||{},nextUrl:new URL(r,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof A=="boolean")return A}return!0}):[]}function CT(r,e){return PT(r.map(t=>{let s=e.routes[t.route.id];if(!s)return[];let o=[s.module];return s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function PT(r){return[...new Set(r)]}function kT(r){let e={},t=Object.keys(r).sort();for(let s of t)e[s]=r[s];return e}function NT(r,e){let t=new Set;return new Set(e),r.reduce((s,o)=>{let l=JSON.stringify(kT(o));return t.has(l)||(t.add(l),s.push({key:l,link:o})),s},[])}function xT(r){let e=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function DT(){let r=q.useContext(Ao);return nf(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function VT(){let r=q.useContext(mc);return nf(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var rf=q.createContext(void 0);rf.displayName="FrameworkContext";function Ky(){let r=q.useContext(rf);return nf(r,"You must render this element inside a <HydratedRouter> element"),r}function LT(r,e){let t=q.useContext(rf),[s,o]=q.useState(!1),[l,h]=q.useState(!1),{onFocus:f,onBlur:p,onMouseEnter:y,onMouseLeave:E,onTouchStart:T}=e,A=q.useRef(null);q.useEffect(()=>{if(r==="render"&&h(!0),r==="viewport"){let j=H=>{H.forEach(G=>{h(G.isIntersecting)})},O=new IntersectionObserver(j,{threshold:.5});return A.current&&O.observe(A.current),()=>{O.disconnect()}}},[r]),q.useEffect(()=>{if(s){let j=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(j)}}},[s]);let V=()=>{o(!0)},L=()=>{o(!1),h(!1)};return t?r!=="intent"?[l,A,{}]:[l,A,{onFocus:Na(f,V),onBlur:Na(p,L),onMouseEnter:Na(y,V),onMouseLeave:Na(E,L),onTouchStart:Na(T,V)}]:[!1,A,{}]}function Na(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function OT({page:r,...e}){let{router:t}=DT(),s=q.useMemo(()=>My(t.routes,r,t.basename),[t.routes,r,t.basename]);return s?q.createElement(bT,{page:r,matches:s,...e}):null}function MT(r){let{manifest:e,routeModules:t}=Ky(),[s,o]=q.useState([]);return q.useEffect(()=>{let l=!1;return AT(r,e,t).then(h=>{l||o(h)}),()=>{l=!0}},[r,e,t]),s}function bT({page:r,matches:e,...t}){let s=Si(),{manifest:o,routeModules:l}=Ky(),{loaderData:h,matches:f}=VT(),p=q.useMemo(()=>pg(r,e,f,o,s,"data"),[r,e,f,o,s]),y=q.useMemo(()=>pg(r,e,f,o,s,"assets"),[r,e,f,o,s]),E=q.useMemo(()=>{if(r===s.pathname+s.search+s.hash)return[];let V=new Set,L=!1;if(e.forEach(O=>{var G;let H=o.routes[O.route.id];!H||!H.hasLoader||(!p.some(ne=>ne.route.id===O.route.id)&&O.route.id in h&&((G=l[O.route.id])!=null&&G.shouldRevalidate)||H.hasClientLoader?L=!0:V.add(O.route.id))}),V.size===0)return[];let j=xT(r);return L&&V.size>0&&j.searchParams.set("_routes",e.filter(O=>V.has(O.route.id)).map(O=>O.route.id).join(",")),[j.pathname+j.search]},[h,s,o,p,e,r,l]),T=q.useMemo(()=>CT(y,o),[y,o]),A=MT(y);return q.createElement(q.Fragment,null,E.map(V=>q.createElement("link",{key:V,rel:"prefetch",as:"fetch",href:V,...t})),T.map(V=>q.createElement("link",{key:V,rel:"modulepreload",href:V,...t})),A.map(({key:V,link:L})=>q.createElement("link",{key:V,...L})))}function FT(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Gy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Gy&&(window.__reactRouterVersion="7.1.3")}catch{}function UT({basename:r,children:e,window:t}){let s=q.useRef();s.current==null&&(s.current=Cw({window:t,v5Compat:!0}));let o=s.current,[l,h]=q.useState({action:o.action,location:o.location}),f=q.useCallback(p=>{q.startTransition(()=>h(p))},[h]);return q.useLayoutEffect(()=>o.listen(f),[o,f]),q.createElement(pT,{basename:r,children:e,location:l.location,navigationType:l.action,navigator:o})}var Qy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Yy=q.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:o,reloadDocument:l,replace:h,state:f,target:p,to:y,preventScrollReset:E,viewTransition:T,...A},V){let{basename:L}=q.useContext(or),j=typeof y=="string"&&Qy.test(y),O,H=!1;if(typeof y=="string"&&j&&(O=y,Gy))try{let R=new URL(window.location.href),k=y.startsWith("//")?new URL(R.protocol+y):new URL(y),D=_i(k.pathname,L);k.origin===R.origin&&D!=null?y=D+k.search+k.hash:H=!0}catch{Fn(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let G=Zw(y,{relative:o}),[ne,he,Se]=LT(s,A),we=$T(y,{replace:h,state:f,target:p,preventScrollReset:E,relative:o,viewTransition:T});function N(R){e&&e(R),R.defaultPrevented||we(R)}let I=q.createElement("a",{...A,...Se,href:O||G,onClick:H||l?e:N,ref:FT(V,he),target:p,"data-discover":!j&&t==="render"?"true":void 0});return ne&&!j?q.createElement(q.Fragment,null,I,q.createElement(OT,{page:G})):I});Yy.displayName="Link";var jT=q.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:o=!1,style:l,to:h,viewTransition:f,children:p,...y},E){let T=tl(h,{relative:y.relative}),A=Si(),V=q.useContext(mc),{navigator:L,basename:j}=q.useContext(or),O=V!=null&&GT(T)&&f===!0,H=L.encodeLocation?L.encodeLocation(T).pathname:T.pathname,G=A.pathname,ne=V&&V.navigation&&V.navigation.location?V.navigation.location.pathname:null;t||(G=G.toLowerCase(),ne=ne?ne.toLowerCase():null,H=H.toLowerCase()),ne&&j&&(ne=_i(ne,j)||ne);const he=H!=="/"&&H.endsWith("/")?H.length-1:H.length;let Se=G===H||!o&&G.startsWith(H)&&G.charAt(he)==="/",we=ne!=null&&(ne===H||!o&&ne.startsWith(H)&&ne.charAt(H.length)==="/"),N={isActive:Se,isPending:we,isTransitioning:O},I=Se?e:void 0,R;typeof s=="function"?R=s(N):R=[s,Se?"active":null,we?"pending":null,O?"transitioning":null].filter(Boolean).join(" ");let k=typeof l=="function"?l(N):l;return q.createElement(Yy,{...y,"aria-current":I,className:R,ref:E,style:k,to:h,viewTransition:f},typeof p=="function"?p(N):p)});jT.displayName="NavLink";var zT=q.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:o,state:l,method:h=Fu,action:f,onSubmit:p,relative:y,preventScrollReset:E,viewTransition:T,...A},V)=>{let L=WT(),j=KT(f,{relative:y}),O=h.toLowerCase()==="get"?"get":"post",H=typeof f=="string"&&Qy.test(f),G=ne=>{if(p&&p(ne),ne.defaultPrevented)return;ne.preventDefault();let he=ne.nativeEvent.submitter,Se=(he==null?void 0:he.getAttribute("formmethod"))||h;L(he||ne.currentTarget,{fetcherKey:e,method:Se,navigate:t,replace:o,state:l,relative:y,preventScrollReset:E,viewTransition:T})};return q.createElement("form",{ref:V,method:O,action:j,onSubmit:s?p:G,...A,"data-discover":!H&&r==="render"?"true":void 0})});zT.displayName="Form";function BT(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Xy(r){let e=q.useContext(Ao);return et(e,BT(r)),e}function $T(r,{target:e,replace:t,state:s,preventScrollReset:o,relative:l,viewTransition:h}={}){let f=el(),p=Si(),y=tl(r,{relative:l});return q.useCallback(E=>{if(ET(E,e)){E.preventDefault();let T=t!==void 0?t:Ba(p)===Ba(y);f(r,{replace:T,state:s,preventScrollReset:o,relative:l,viewTransition:h})}},[p,f,y,t,s,e,r,o,l,h])}var qT=0,HT=()=>`__${String(++qT)}__`;function WT(){let{router:r}=Xy("useSubmit"),{basename:e}=q.useContext(or),t=cT();return q.useCallback(async(s,o={})=>{let{action:l,method:h,encType:f,formData:p,body:y}=IT(s,e);if(o.navigate===!1){let E=o.fetcherKey||HT();await r.fetch(E,t,o.action||l,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||h,formEncType:o.encType||f,flushSync:o.flushSync})}else await r.navigate(o.action||l,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||h,formEncType:o.encType||f,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,e,t])}function KT(r,{relative:e}={}){let{basename:t}=q.useContext(or),s=q.useContext(Lr);et(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),l={...tl(r||".",{relative:e})},h=Si();if(r==null){l.search=h.search;let f=new URLSearchParams(l.search),p=f.getAll("index");if(p.some(E=>E==="")){f.delete("index"),p.filter(T=>T).forEach(T=>f.append("index",T));let E=f.toString();l.search=E?`?${E}`:""}}return(!r||r===".")&&o.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Pr([t,l.pathname])),Ba(l)}function GT(r,e={}){let t=q.useContext(By);et(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Xy("useViewTransitionState"),o=tl(r,{relative:e.relative});if(!t.isTransitioning)return!1;let l=_i(t.currentLocation.pathname,s)||t.currentLocation.pathname,h=_i(t.nextLocation.pathname,s)||t.nextLocation.pathname;return Yu(o.pathname,h)!=null||Yu(o.pathname,l)!=null}new TextEncoder;var mg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},QT=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const o=r[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],f=r[t++],p=((o&7)<<18|(l&63)<<12|(h&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const l=r[t++],h=r[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},Zy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,f=h?r[o+1]:0,p=o+2<r.length,y=p?r[o+2]:0,E=l>>2,T=(l&3)<<4|f>>4;let A=(f&15)<<2|y>>6,V=y&63;p||(V=64,h||(A=64)),s.push(t[E],t[T],t[A],t[V])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Jy(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):QT(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],f=o<r.length?t[r.charAt(o)]:0;++o;const y=o<r.length?t[r.charAt(o)]:64;++o;const T=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||f==null||y==null||T==null)throw new YT;const A=l<<2|f>>4;if(s.push(A),y!==64){const V=f<<4&240|y>>2;if(s.push(V),T!==64){const L=y<<6&192|T;s.push(L)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class YT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const XT=function(r){const e=Jy(r);return Zy.encodeByteArray(e,!0)},Xu=function(r){return XT(r).replace(/\./g,"")},e_=function(r){try{return Zy.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT=()=>JT().__FIREBASE_DEFAULTS__,eI=()=>{if(typeof process>"u"||typeof mg>"u")return;const r=mg.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},tI=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&e_(r[1]);return e&&JSON.parse(e)},yc=()=>{try{return ZT()||eI()||tI()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},t_=r=>{var e,t;return(t=(e=yc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},nI=r=>{const e=t_(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},n_=()=>{var r;return(r=yc())===null||r===void 0?void 0:r.config},r_=r=>{var e;return(e=yc())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iI(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[Xu(JSON.stringify(t)),Xu(JSON.stringify(h)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(jt())}function oI(){var r;const e=(r=yc())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function aI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function lI(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function uI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cI(){const r=jt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function hI(){return!oI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dI(){try{return typeof indexedDB=="object"}catch{return!1}}function fI(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI="FirebaseError";class Or extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=pI,Object.setPrototypeOf(this,Or.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nl.prototype.create)}}class nl{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?mI(l,s):"Error",f=`${this.serviceName}: ${h} (${o}).`;return new Or(o,f,s)}}function mI(r,e){return r.replace(gI,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const gI=/\{\$([^}]+)}/g;function yI(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Ju(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=r[o],h=e[o];if(gg(l)&&gg(h)){if(!Ju(l,h))return!1}else if(l!==h)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function gg(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function xa(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,l]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function Da(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function _I(r,e){const t=new vI(r,e);return t.subscribe.bind(t)}class vI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");EI(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=pd),o.error===void 0&&(o.error=pd),o.complete===void 0&&(o.complete=pd);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function EI(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function pd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(r){return r&&r._delegate?r._delegate:r}class ss{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new rI;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(II(e))try{this.getOrInitializeService({instanceIdentifier:ns})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=ns){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ns){return this.instances.has(e)}getOptions(e=ns){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,h]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);s===f&&h.resolve(o)}return o}onInit(e,t){var s;const o=this.normalizeInstanceIdentifier(t),l=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;l.add(e),this.onInitCallbacks.set(o,l);const h=this.instances.get(o);return h&&e(h,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:TI(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ns){return this.component?this.component.multipleInstances?e:ns:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function TI(r){return r===ns?void 0:r}function II(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new wI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Pe||(Pe={}));const RI={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},AI=Pe.INFO,CI={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},PI=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=CI[e];if(o)console[o](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class sf{constructor(e){this.name=e,this._logLevel=AI,this._logHandler=PI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?RI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}const kI=(r,e)=>e.some(t=>r instanceof t);let yg,_g;function NI(){return yg||(yg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xI(){return _g||(_g=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const i_=new WeakMap,Pd=new WeakMap,s_=new WeakMap,md=new WeakMap,of=new WeakMap;function DI(r){const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(fi(r.result)),o()},h=()=>{s(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&i_.set(t,r)}).catch(()=>{}),of.set(e,r),e}function VI(r){if(Pd.has(r))return;const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});Pd.set(r,e)}let kd={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Pd.get(r);if(e==="objectStoreNames")return r.objectStoreNames||s_.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return fi(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function LI(r){kd=r(kd)}function OI(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(gd(this),e,...t);return s_.set(s,e.sort?e.sort():[e]),fi(s)}:xI().includes(r)?function(...e){return r.apply(gd(this),e),fi(i_.get(this))}:function(...e){return fi(r.apply(gd(this),e))}}function MI(r){return typeof r=="function"?OI(r):(r instanceof IDBTransaction&&VI(r),kI(r,NI())?new Proxy(r,kd):r)}function fi(r){if(r instanceof IDBRequest)return DI(r);if(md.has(r))return md.get(r);const e=MI(r);return e!==r&&(md.set(r,e),of.set(e,r)),e}const gd=r=>of.get(r);function bI(r,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),f=fi(h);return s&&h.addEventListener("upgradeneeded",p=>{s(fi(h.result),p.oldVersion,p.newVersion,fi(h.transaction),p)}),t&&h.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),f.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),f}const FI=["get","getKey","getAll","getAllKeys","count"],UI=["put","add","delete","clear"],yd=new Map;function vg(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(yd.get(e))return yd.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=UI.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||FI.includes(t)))return;const l=async function(h,...f){const p=this.transaction(h,o?"readwrite":"readonly");let y=p.store;return s&&(y=y.index(f.shift())),(await Promise.all([y[t](...f),o&&p.done]))[0]};return yd.set(e,l),l}LI(r=>({...r,get:(e,t,s)=>vg(e,t)||r.get(e,t,s),has:(e,t)=>!!vg(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(zI(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function zI(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Nd="@firebase/app",Eg="0.10.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr=new sf("@firebase/app"),BI="@firebase/app-compat",$I="@firebase/analytics-compat",qI="@firebase/analytics",HI="@firebase/app-check-compat",WI="@firebase/app-check",KI="@firebase/auth",GI="@firebase/auth-compat",QI="@firebase/database",YI="@firebase/data-connect",XI="@firebase/database-compat",JI="@firebase/functions",ZI="@firebase/functions-compat",eS="@firebase/installations",tS="@firebase/installations-compat",nS="@firebase/messaging",rS="@firebase/messaging-compat",iS="@firebase/performance",sS="@firebase/performance-compat",oS="@firebase/remote-config",aS="@firebase/remote-config-compat",lS="@firebase/storage",uS="@firebase/storage-compat",cS="@firebase/firestore",hS="@firebase/vertexai",dS="@firebase/firestore-compat",fS="firebase",pS="11.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xd="[DEFAULT]",mS={[Nd]:"fire-core",[BI]:"fire-core-compat",[qI]:"fire-analytics",[$I]:"fire-analytics-compat",[WI]:"fire-app-check",[HI]:"fire-app-check-compat",[KI]:"fire-auth",[GI]:"fire-auth-compat",[QI]:"fire-rtdb",[YI]:"fire-data-connect",[XI]:"fire-rtdb-compat",[JI]:"fire-fn",[ZI]:"fire-fn-compat",[eS]:"fire-iid",[tS]:"fire-iid-compat",[nS]:"fire-fcm",[rS]:"fire-fcm-compat",[iS]:"fire-perf",[sS]:"fire-perf-compat",[oS]:"fire-rc",[aS]:"fire-rc-compat",[lS]:"fire-gcs",[uS]:"fire-gcs-compat",[cS]:"fire-fst",[dS]:"fire-fst-compat",[hS]:"fire-vertex","fire-js":"fire-js",[fS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zu=new Map,gS=new Map,Dd=new Map;function wg(r,e){try{r.container.addComponent(e)}catch(t){Nr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function _o(r){const e=r.name;if(Dd.has(e))return Nr.debug(`There were multiple attempts to register component ${e}.`),!1;Dd.set(e,r);for(const t of Zu.values())wg(t,r);for(const t of gS.values())wg(t,r);return!0}function af(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Zn(r){return r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},pi=new nl("app","Firebase",yS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ss("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co=pS;function o_(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:xd,automaticDataCollectionEnabled:!1},e),o=s.name;if(typeof o!="string"||!o)throw pi.create("bad-app-name",{appName:String(o)});if(t||(t=n_()),!t)throw pi.create("no-options");const l=Zu.get(o);if(l){if(Ju(t,l.options)&&Ju(s,l.config))return l;throw pi.create("duplicate-app",{appName:o})}const h=new SI(o);for(const p of Dd.values())h.addComponent(p);const f=new _S(t,s,h);return Zu.set(o,f),f}function a_(r=xd){const e=Zu.get(r);if(!e&&r===xd&&n_())return o_();if(!e)throw pi.create("no-app",{appName:r});return e}function mi(r,e,t){var s;let o=(s=mS[r])!==null&&s!==void 0?s:r;t&&(o+=`-${t}`);const l=o.match(/\s|\//),h=e.match(/\s|\//);if(l||h){const f=[`Unable to register library "${o}" with version "${e}":`];l&&f.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&h&&f.push("and"),h&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Nr.warn(f.join(" "));return}_o(new ss(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS="firebase-heartbeat-database",ES=1,$a="firebase-heartbeat-store";let _d=null;function l_(){return _d||(_d=bI(vS,ES,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore($a)}catch(t){console.warn(t)}}}}).catch(r=>{throw pi.create("idb-open",{originalErrorMessage:r.message})})),_d}async function wS(r){try{const t=(await l_()).transaction($a),s=await t.objectStore($a).get(u_(r));return await t.done,s}catch(e){if(e instanceof Or)Nr.warn(e.message);else{const t=pi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Nr.warn(t.message)}}}async function Tg(r,e){try{const s=(await l_()).transaction($a,"readwrite");await s.objectStore($a).put(e,u_(r)),await s.done}catch(t){if(t instanceof Or)Nr.warn(t.message);else{const s=pi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Nr.warn(s.message)}}}function u_(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS=1024,IS=30*24*60*60*1e3;class SS{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new AS(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Ig();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(h=>{const f=new Date(h.date).valueOf();return Date.now()-f<=IS}),this._storage.overwrite(this._heartbeatsCache))}catch(s){Nr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Ig(),{heartbeatsToSend:s,unsentEntries:o}=RS(this._heartbeatsCache.heartbeats),l=Xu(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Nr.warn(t),""}}}function Ig(){return new Date().toISOString().substring(0,10)}function RS(r,e=TS){const t=[];let s=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),Sg(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Sg(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class AS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dI()?fI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await wS(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Tg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Tg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Sg(r){return Xu(JSON.stringify({version:2,heartbeats:r})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CS(r){_o(new ss("platform-logger",e=>new jI(e),"PRIVATE")),_o(new ss("heartbeat",e=>new SS(e),"PRIVATE")),mi(Nd,Eg,r),mi(Nd,Eg,"esm2017"),mi("fire-js","")}CS("");var PS="firebase",kS="11.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mi(PS,kS,"app");var Rg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gi,c_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,I){function R(){}R.prototype=I.prototype,N.D=I.prototype,N.prototype=new R,N.prototype.constructor=N,N.C=function(k,D,b){for(var C=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)C[rt-2]=arguments[rt];return I.prototype[D].apply(k,C)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,I,R){R||(R=0);var k=Array(16);if(typeof I=="string")for(var D=0;16>D;++D)k[D]=I.charCodeAt(R++)|I.charCodeAt(R++)<<8|I.charCodeAt(R++)<<16|I.charCodeAt(R++)<<24;else for(D=0;16>D;++D)k[D]=I[R++]|I[R++]<<8|I[R++]<<16|I[R++]<<24;I=N.g[0],R=N.g[1],D=N.g[2];var b=N.g[3],C=I+(b^R&(D^b))+k[0]+3614090360&4294967295;I=R+(C<<7&4294967295|C>>>25),C=b+(D^I&(R^D))+k[1]+3905402710&4294967295,b=I+(C<<12&4294967295|C>>>20),C=D+(R^b&(I^R))+k[2]+606105819&4294967295,D=b+(C<<17&4294967295|C>>>15),C=R+(I^D&(b^I))+k[3]+3250441966&4294967295,R=D+(C<<22&4294967295|C>>>10),C=I+(b^R&(D^b))+k[4]+4118548399&4294967295,I=R+(C<<7&4294967295|C>>>25),C=b+(D^I&(R^D))+k[5]+1200080426&4294967295,b=I+(C<<12&4294967295|C>>>20),C=D+(R^b&(I^R))+k[6]+2821735955&4294967295,D=b+(C<<17&4294967295|C>>>15),C=R+(I^D&(b^I))+k[7]+4249261313&4294967295,R=D+(C<<22&4294967295|C>>>10),C=I+(b^R&(D^b))+k[8]+1770035416&4294967295,I=R+(C<<7&4294967295|C>>>25),C=b+(D^I&(R^D))+k[9]+2336552879&4294967295,b=I+(C<<12&4294967295|C>>>20),C=D+(R^b&(I^R))+k[10]+4294925233&4294967295,D=b+(C<<17&4294967295|C>>>15),C=R+(I^D&(b^I))+k[11]+2304563134&4294967295,R=D+(C<<22&4294967295|C>>>10),C=I+(b^R&(D^b))+k[12]+1804603682&4294967295,I=R+(C<<7&4294967295|C>>>25),C=b+(D^I&(R^D))+k[13]+4254626195&4294967295,b=I+(C<<12&4294967295|C>>>20),C=D+(R^b&(I^R))+k[14]+2792965006&4294967295,D=b+(C<<17&4294967295|C>>>15),C=R+(I^D&(b^I))+k[15]+1236535329&4294967295,R=D+(C<<22&4294967295|C>>>10),C=I+(D^b&(R^D))+k[1]+4129170786&4294967295,I=R+(C<<5&4294967295|C>>>27),C=b+(R^D&(I^R))+k[6]+3225465664&4294967295,b=I+(C<<9&4294967295|C>>>23),C=D+(I^R&(b^I))+k[11]+643717713&4294967295,D=b+(C<<14&4294967295|C>>>18),C=R+(b^I&(D^b))+k[0]+3921069994&4294967295,R=D+(C<<20&4294967295|C>>>12),C=I+(D^b&(R^D))+k[5]+3593408605&4294967295,I=R+(C<<5&4294967295|C>>>27),C=b+(R^D&(I^R))+k[10]+38016083&4294967295,b=I+(C<<9&4294967295|C>>>23),C=D+(I^R&(b^I))+k[15]+3634488961&4294967295,D=b+(C<<14&4294967295|C>>>18),C=R+(b^I&(D^b))+k[4]+3889429448&4294967295,R=D+(C<<20&4294967295|C>>>12),C=I+(D^b&(R^D))+k[9]+568446438&4294967295,I=R+(C<<5&4294967295|C>>>27),C=b+(R^D&(I^R))+k[14]+3275163606&4294967295,b=I+(C<<9&4294967295|C>>>23),C=D+(I^R&(b^I))+k[3]+4107603335&4294967295,D=b+(C<<14&4294967295|C>>>18),C=R+(b^I&(D^b))+k[8]+1163531501&4294967295,R=D+(C<<20&4294967295|C>>>12),C=I+(D^b&(R^D))+k[13]+2850285829&4294967295,I=R+(C<<5&4294967295|C>>>27),C=b+(R^D&(I^R))+k[2]+4243563512&4294967295,b=I+(C<<9&4294967295|C>>>23),C=D+(I^R&(b^I))+k[7]+1735328473&4294967295,D=b+(C<<14&4294967295|C>>>18),C=R+(b^I&(D^b))+k[12]+2368359562&4294967295,R=D+(C<<20&4294967295|C>>>12),C=I+(R^D^b)+k[5]+4294588738&4294967295,I=R+(C<<4&4294967295|C>>>28),C=b+(I^R^D)+k[8]+2272392833&4294967295,b=I+(C<<11&4294967295|C>>>21),C=D+(b^I^R)+k[11]+1839030562&4294967295,D=b+(C<<16&4294967295|C>>>16),C=R+(D^b^I)+k[14]+4259657740&4294967295,R=D+(C<<23&4294967295|C>>>9),C=I+(R^D^b)+k[1]+2763975236&4294967295,I=R+(C<<4&4294967295|C>>>28),C=b+(I^R^D)+k[4]+1272893353&4294967295,b=I+(C<<11&4294967295|C>>>21),C=D+(b^I^R)+k[7]+4139469664&4294967295,D=b+(C<<16&4294967295|C>>>16),C=R+(D^b^I)+k[10]+3200236656&4294967295,R=D+(C<<23&4294967295|C>>>9),C=I+(R^D^b)+k[13]+681279174&4294967295,I=R+(C<<4&4294967295|C>>>28),C=b+(I^R^D)+k[0]+3936430074&4294967295,b=I+(C<<11&4294967295|C>>>21),C=D+(b^I^R)+k[3]+3572445317&4294967295,D=b+(C<<16&4294967295|C>>>16),C=R+(D^b^I)+k[6]+76029189&4294967295,R=D+(C<<23&4294967295|C>>>9),C=I+(R^D^b)+k[9]+3654602809&4294967295,I=R+(C<<4&4294967295|C>>>28),C=b+(I^R^D)+k[12]+3873151461&4294967295,b=I+(C<<11&4294967295|C>>>21),C=D+(b^I^R)+k[15]+530742520&4294967295,D=b+(C<<16&4294967295|C>>>16),C=R+(D^b^I)+k[2]+3299628645&4294967295,R=D+(C<<23&4294967295|C>>>9),C=I+(D^(R|~b))+k[0]+4096336452&4294967295,I=R+(C<<6&4294967295|C>>>26),C=b+(R^(I|~D))+k[7]+1126891415&4294967295,b=I+(C<<10&4294967295|C>>>22),C=D+(I^(b|~R))+k[14]+2878612391&4294967295,D=b+(C<<15&4294967295|C>>>17),C=R+(b^(D|~I))+k[5]+4237533241&4294967295,R=D+(C<<21&4294967295|C>>>11),C=I+(D^(R|~b))+k[12]+1700485571&4294967295,I=R+(C<<6&4294967295|C>>>26),C=b+(R^(I|~D))+k[3]+2399980690&4294967295,b=I+(C<<10&4294967295|C>>>22),C=D+(I^(b|~R))+k[10]+4293915773&4294967295,D=b+(C<<15&4294967295|C>>>17),C=R+(b^(D|~I))+k[1]+2240044497&4294967295,R=D+(C<<21&4294967295|C>>>11),C=I+(D^(R|~b))+k[8]+1873313359&4294967295,I=R+(C<<6&4294967295|C>>>26),C=b+(R^(I|~D))+k[15]+4264355552&4294967295,b=I+(C<<10&4294967295|C>>>22),C=D+(I^(b|~R))+k[6]+2734768916&4294967295,D=b+(C<<15&4294967295|C>>>17),C=R+(b^(D|~I))+k[13]+1309151649&4294967295,R=D+(C<<21&4294967295|C>>>11),C=I+(D^(R|~b))+k[4]+4149444226&4294967295,I=R+(C<<6&4294967295|C>>>26),C=b+(R^(I|~D))+k[11]+3174756917&4294967295,b=I+(C<<10&4294967295|C>>>22),C=D+(I^(b|~R))+k[2]+718787259&4294967295,D=b+(C<<15&4294967295|C>>>17),C=R+(b^(D|~I))+k[9]+3951481745&4294967295,N.g[0]=N.g[0]+I&4294967295,N.g[1]=N.g[1]+(D+(C<<21&4294967295|C>>>11))&4294967295,N.g[2]=N.g[2]+D&4294967295,N.g[3]=N.g[3]+b&4294967295}s.prototype.u=function(N,I){I===void 0&&(I=N.length);for(var R=I-this.blockSize,k=this.B,D=this.h,b=0;b<I;){if(D==0)for(;b<=R;)o(this,N,b),b+=this.blockSize;if(typeof N=="string"){for(;b<I;)if(k[D++]=N.charCodeAt(b++),D==this.blockSize){o(this,k),D=0;break}}else for(;b<I;)if(k[D++]=N[b++],D==this.blockSize){o(this,k),D=0;break}}this.h=D,this.o+=I},s.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var I=1;I<N.length-8;++I)N[I]=0;var R=8*this.o;for(I=N.length-8;I<N.length;++I)N[I]=R&255,R/=256;for(this.u(N),N=Array(16),I=R=0;4>I;++I)for(var k=0;32>k;k+=8)N[R++]=this.g[I]>>>k&255;return N};function l(N,I){var R=f;return Object.prototype.hasOwnProperty.call(R,N)?R[N]:R[N]=I(N)}function h(N,I){this.h=I;for(var R=[],k=!0,D=N.length-1;0<=D;D--){var b=N[D]|0;k&&b==I||(R[D]=b,k=!1)}this.g=R}var f={};function p(N){return-128<=N&&128>N?l(N,function(I){return new h([I|0],0>I?-1:0)}):new h([N|0],0>N?-1:0)}function y(N){if(isNaN(N)||!isFinite(N))return T;if(0>N)return O(y(-N));for(var I=[],R=1,k=0;N>=R;k++)I[k]=N/R|0,R*=4294967296;return new h(I,0)}function E(N,I){if(N.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(N.charAt(0)=="-")return O(E(N.substring(1),I));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=y(Math.pow(I,8)),k=T,D=0;D<N.length;D+=8){var b=Math.min(8,N.length-D),C=parseInt(N.substring(D,D+b),I);8>b?(b=y(Math.pow(I,b)),k=k.j(b).add(y(C))):(k=k.j(R),k=k.add(y(C)))}return k}var T=p(0),A=p(1),V=p(16777216);r=h.prototype,r.m=function(){if(j(this))return-O(this).m();for(var N=0,I=1,R=0;R<this.g.length;R++){var k=this.i(R);N+=(0<=k?k:4294967296+k)*I,I*=4294967296}return N},r.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(L(this))return"0";if(j(this))return"-"+O(this).toString(N);for(var I=y(Math.pow(N,6)),R=this,k="";;){var D=he(R,I).g;R=H(R,D.j(I));var b=((0<R.g.length?R.g[0]:R.h)>>>0).toString(N);if(R=D,L(R))return b+k;for(;6>b.length;)b="0"+b;k=b+k}},r.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function L(N){if(N.h!=0)return!1;for(var I=0;I<N.g.length;I++)if(N.g[I]!=0)return!1;return!0}function j(N){return N.h==-1}r.l=function(N){return N=H(this,N),j(N)?-1:L(N)?0:1};function O(N){for(var I=N.g.length,R=[],k=0;k<I;k++)R[k]=~N.g[k];return new h(R,~N.h).add(A)}r.abs=function(){return j(this)?O(this):this},r.add=function(N){for(var I=Math.max(this.g.length,N.g.length),R=[],k=0,D=0;D<=I;D++){var b=k+(this.i(D)&65535)+(N.i(D)&65535),C=(b>>>16)+(this.i(D)>>>16)+(N.i(D)>>>16);k=C>>>16,b&=65535,C&=65535,R[D]=C<<16|b}return new h(R,R[R.length-1]&-2147483648?-1:0)};function H(N,I){return N.add(O(I))}r.j=function(N){if(L(this)||L(N))return T;if(j(this))return j(N)?O(this).j(O(N)):O(O(this).j(N));if(j(N))return O(this.j(O(N)));if(0>this.l(V)&&0>N.l(V))return y(this.m()*N.m());for(var I=this.g.length+N.g.length,R=[],k=0;k<2*I;k++)R[k]=0;for(k=0;k<this.g.length;k++)for(var D=0;D<N.g.length;D++){var b=this.i(k)>>>16,C=this.i(k)&65535,rt=N.i(D)>>>16,xt=N.i(D)&65535;R[2*k+2*D]+=C*xt,G(R,2*k+2*D),R[2*k+2*D+1]+=b*xt,G(R,2*k+2*D+1),R[2*k+2*D+1]+=C*rt,G(R,2*k+2*D+1),R[2*k+2*D+2]+=b*rt,G(R,2*k+2*D+2)}for(k=0;k<I;k++)R[k]=R[2*k+1]<<16|R[2*k];for(k=I;k<2*I;k++)R[k]=0;return new h(R,0)};function G(N,I){for(;(N[I]&65535)!=N[I];)N[I+1]+=N[I]>>>16,N[I]&=65535,I++}function ne(N,I){this.g=N,this.h=I}function he(N,I){if(L(I))throw Error("division by zero");if(L(N))return new ne(T,T);if(j(N))return I=he(O(N),I),new ne(O(I.g),O(I.h));if(j(I))return I=he(N,O(I)),new ne(O(I.g),I.h);if(30<N.g.length){if(j(N)||j(I))throw Error("slowDivide_ only works with positive integers.");for(var R=A,k=I;0>=k.l(N);)R=Se(R),k=Se(k);var D=we(R,1),b=we(k,1);for(k=we(k,2),R=we(R,2);!L(k);){var C=b.add(k);0>=C.l(N)&&(D=D.add(R),b=C),k=we(k,1),R=we(R,1)}return I=H(N,D.j(I)),new ne(D,I)}for(D=T;0<=N.l(I);){for(R=Math.max(1,Math.floor(N.m()/I.m())),k=Math.ceil(Math.log(R)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),b=y(R),C=b.j(I);j(C)||0<C.l(N);)R-=k,b=y(R),C=b.j(I);L(b)&&(b=A),D=D.add(b),N=H(N,C)}return new ne(D,N)}r.A=function(N){return he(this,N).h},r.and=function(N){for(var I=Math.max(this.g.length,N.g.length),R=[],k=0;k<I;k++)R[k]=this.i(k)&N.i(k);return new h(R,this.h&N.h)},r.or=function(N){for(var I=Math.max(this.g.length,N.g.length),R=[],k=0;k<I;k++)R[k]=this.i(k)|N.i(k);return new h(R,this.h|N.h)},r.xor=function(N){for(var I=Math.max(this.g.length,N.g.length),R=[],k=0;k<I;k++)R[k]=this.i(k)^N.i(k);return new h(R,this.h^N.h)};function Se(N){for(var I=N.g.length+1,R=[],k=0;k<I;k++)R[k]=N.i(k)<<1|N.i(k-1)>>>31;return new h(R,N.h)}function we(N,I){var R=I>>5;I%=32;for(var k=N.g.length-R,D=[],b=0;b<k;b++)D[b]=0<I?N.i(b+R)>>>I|N.i(b+R+1)<<32-I:N.i(b+R);return new h(D,N.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,c_=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=E,gi=h}).apply(typeof Rg<"u"?Rg:typeof self<"u"?self:typeof window<"u"?window:{});var Nu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var h_,Va,d_,ju,Vd,f_,p_,m_;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,_){return u==Array.prototype||u==Object.prototype||(u[m]=_.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nu=="object"&&Nu];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=t(this);function o(u,m){if(m)e:{var _=s;u=u.split(".");for(var w=0;w<u.length-1;w++){var F=u[w];if(!(F in _))break e;_=_[F]}u=u[u.length-1],w=_[u],m=m(w),m!=w&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}function l(u,m){u instanceof String&&(u+="");var _=0,w=!1,F={next:function(){if(!w&&_<u.length){var $=_++;return{value:m($,u[$]),done:!1}}return w=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}o("Array.prototype.values",function(u){return u||function(){return l(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},f=this||self;function p(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function y(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function E(u,m,_){return u.call.apply(u.bind,arguments)}function T(u,m,_){if(!u)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,w),u.apply(m,F)}}return function(){return u.apply(m,arguments)}}function A(u,m,_){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:T,A.apply(null,arguments)}function V(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var w=_.slice();return w.push.apply(w,arguments),u.apply(this,w)}}function L(u,m){function _(){}_.prototype=m.prototype,u.aa=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(w,F,$){for(var ee=Array(arguments.length-2),je=2;je<arguments.length;je++)ee[je-2]=arguments[je];return m.prototype[F].apply(w,ee)}}function j(u){const m=u.length;if(0<m){const _=Array(m);for(let w=0;w<m;w++)_[w]=u[w];return _}return[]}function O(u,m){for(let _=1;_<arguments.length;_++){const w=arguments[_];if(p(w)){const F=u.length||0,$=w.length||0;u.length=F+$;for(let ee=0;ee<$;ee++)u[F+ee]=w[ee]}else u.push(w)}}class H{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function G(u){return/^[\s\xa0]*$/.test(u)}function ne(){var u=f.navigator;return u&&(u=u.userAgent)?u:""}function he(u){return he[" "](u),u}he[" "]=function(){};var Se=ne().indexOf("Gecko")!=-1&&!(ne().toLowerCase().indexOf("webkit")!=-1&&ne().indexOf("Edge")==-1)&&!(ne().indexOf("Trident")!=-1||ne().indexOf("MSIE")!=-1)&&ne().indexOf("Edge")==-1;function we(u,m,_){for(const w in u)m.call(_,u[w],w,u)}function N(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function I(u){const m={};for(const _ in u)m[_]=u[_];return m}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(u,m){let _,w;for(let F=1;F<arguments.length;F++){w=arguments[F];for(_ in w)u[_]=w[_];for(let $=0;$<R.length;$++)_=R[$],Object.prototype.hasOwnProperty.call(w,_)&&(u[_]=w[_])}}function D(u){var m=1;u=u.split(":");const _=[];for(;0<m&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function b(u){f.setTimeout(()=>{throw u},0)}function C(){var u=me;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class rt{constructor(){this.h=this.g=null}add(m,_){const w=xt.get();w.set(m,_),this.h?this.h.next=w:this.g=w,this.h=w}}var xt=new H(()=>new Dt,u=>u.reset());class Dt{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ze,te=!1,me=new rt,se=()=>{const u=f.Promise.resolve(void 0);ze=()=>{u.then(M)}};var M=()=>{for(var u;u=C();){try{u.h.call(u.g)}catch(_){b(_)}var m=xt;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}te=!1};function K(){this.s=this.s,this.C=this.C}K.prototype.s=!1,K.prototype.ma=function(){this.s||(this.s=!0,this.N())},K.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var Re=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};f.addEventListener("test",_,m),f.removeEventListener("test",_,m)}catch{}return u}();function Ae(u,m){if(fe.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,w=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(Se){e:{try{he(m.nodeName);var F=!0;break e}catch{}F=!1}F||(m=null)}}else _=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement);this.relatedTarget=m,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:De[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ae.aa.h.call(this)}}L(Ae,fe);var De={2:"touch",3:"pen",4:"mouse"};Ae.prototype.h=function(){Ae.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var be="closure_listenable_"+(1e6*Math.random()|0),Fe=0;function qe(u,m,_,w,F){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!w,this.ha=F,this.key=++Fe,this.da=this.fa=!1}function _t(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ar(u){this.src=u,this.g={},this.h=0}ar.prototype.add=function(u,m,_,w,F){var $=u.toString();u=this.g[$],u||(u=this.g[$]=[],this.h++);var ee=Mr(u,m,w,F);return-1<ee?(m=u[ee],_||(m.fa=!1)):(m=new qe(m,this.src,$,!!w,F),m.fa=_,u.push(m)),m};function ms(u,m){var _=m.type;if(_ in u.g){var w=u.g[_],F=Array.prototype.indexOf.call(w,m,void 0),$;($=0<=F)&&Array.prototype.splice.call(w,F,1),$&&(_t(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Mr(u,m,_,w){for(var F=0;F<u.length;++F){var $=u[F];if(!$.da&&$.listener==m&&$.capture==!!_&&$.ha==w)return F}return-1}var Ci="closure_lm_"+(1e6*Math.random()|0),gs={};function Lo(u,m,_,w,F){if(Array.isArray(m)){for(var $=0;$<m.length;$++)Lo(u,m[$],_,w,F);return null}return _=bo(_),u&&u[be]?u.K(m,_,y(w)?!!w.capture:!1,F):Oo(u,m,_,!1,w,F)}function Oo(u,m,_,w,F,$){if(!m)throw Error("Invalid event type");var ee=y(F)?!!F.capture:!!F,je=_s(u);if(je||(u[Ci]=je=new ar(u)),_=je.add(m,_,w,ee,$),_.proxy)return _;if(w=fl(),_.proxy=w,w.src=u,w.listener=_,u.addEventListener)Re||(F=ee),F===void 0&&(F=!1),u.addEventListener(m.toString(),w,F);else if(u.attachEvent)u.attachEvent(ur(m.toString()),w);else if(u.addListener&&u.removeListener)u.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return _}function fl(){function u(_){return m.call(u.src,u.listener,_)}const m=Mo;return u}function ys(u,m,_,w,F){if(Array.isArray(m))for(var $=0;$<m.length;$++)ys(u,m[$],_,w,F);else w=y(w)?!!w.capture:!!w,_=bo(_),u&&u[be]?(u=u.i,m=String(m).toString(),m in u.g&&($=u.g[m],_=Mr($,_,w,F),-1<_&&(_t($[_]),Array.prototype.splice.call($,_,1),$.length==0&&(delete u.g[m],u.h--)))):u&&(u=_s(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Mr(m,_,w,F)),(_=-1<u?m[u]:null)&&lr(_))}function lr(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[be])ms(m.i,u);else{var _=u.type,w=u.proxy;m.removeEventListener?m.removeEventListener(_,w,u.capture):m.detachEvent?m.detachEvent(ur(_),w):m.addListener&&m.removeListener&&m.removeListener(w),(_=_s(m))?(ms(_,u),_.h==0&&(_.src=null,m[Ci]=null)):_t(u)}}}function ur(u){return u in gs?gs[u]:gs[u]="on"+u}function Mo(u,m){if(u.da)u=!0;else{m=new Ae(m,this);var _=u.listener,w=u.ha||u.src;u.fa&&lr(u),u=_.call(w,m)}return u}function _s(u){return u=u[Ci],u instanceof ar?u:null}var vs="__closure_events_fn_"+(1e9*Math.random()>>>0);function bo(u){return typeof u=="function"?u:(u[vs]||(u[vs]=function(m){return u.handleEvent(m)}),u[vs])}function ht(){K.call(this),this.i=new ar(this),this.M=this,this.F=null}L(ht,K),ht.prototype[be]=!0,ht.prototype.removeEventListener=function(u,m,_,w){ys(this,u,m,_,w)};function dt(u,m){var _,w=u.F;if(w)for(_=[];w;w=w.F)_.push(w);if(u=u.M,w=m.type||m,typeof m=="string")m=new fe(m,u);else if(m instanceof fe)m.target=m.target||u;else{var F=m;m=new fe(w,u),k(m,F)}if(F=!0,_)for(var $=_.length-1;0<=$;$--){var ee=m.g=_[$];F=cr(ee,w,!0,m)&&F}if(ee=m.g=u,F=cr(ee,w,!0,m)&&F,F=cr(ee,w,!1,m)&&F,_)for($=0;$<_.length;$++)ee=m.g=_[$],F=cr(ee,w,!1,m)&&F}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var _=u.g[m],w=0;w<_.length;w++)_t(_[w]);delete u.g[m],u.h--}}this.F=null},ht.prototype.K=function(u,m,_,w){return this.i.add(String(u),m,!1,_,w)},ht.prototype.L=function(u,m,_,w){return this.i.add(String(u),m,!0,_,w)};function cr(u,m,_,w){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var F=!0,$=0;$<m.length;++$){var ee=m[$];if(ee&&!ee.da&&ee.capture==_){var je=ee.listener,ft=ee.ha||ee.src;ee.fa&&ms(u.i,ee),F=je.call(ft,w)!==!1&&F}}return F&&!w.defaultPrevented}function Fo(u,m,_){if(typeof u=="function")_&&(u=A(u,_));else if(u&&typeof u.handleEvent=="function")u=A(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:f.setTimeout(u,m||0)}function br(u){u.g=Fo(()=>{u.g=null,u.i&&(u.i=!1,br(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Pi extends K{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:br(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ki(u){K.call(this),this.h=u,this.g={}}L(ki,K);var Uo=[];function jo(u){we(u.g,function(m,_){this.g.hasOwnProperty(_)&&lr(m)},u),u.g={}}ki.prototype.N=function(){ki.aa.N.call(this),jo(this)},ki.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zo=f.JSON.stringify,Bo=f.JSON.parse,$o=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function Ni(){}Ni.prototype.h=null;function Es(u){return u.h||(u.h=u.i())}function ws(){}var cn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function zn(){fe.call(this,"d")}L(zn,fe);function Ts(){fe.call(this,"c")}L(Ts,fe);var Bn={},qo=null;function xi(){return qo=qo||new ht}Bn.La="serverreachability";function Ho(u){fe.call(this,Bn.La,u)}L(Ho,fe);function hr(u){const m=xi();dt(m,new Ho(m))}Bn.STAT_EVENT="statevent";function Wo(u,m){fe.call(this,Bn.STAT_EVENT,u),this.stat=m}L(Wo,fe);function it(u){const m=xi();dt(m,new Wo(m,u))}Bn.Ma="timingevent";function Is(u,m){fe.call(this,Bn.Ma,u),this.size=m}L(Is,fe);function Tn(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},m)}function Di(){this.g=!0}Di.prototype.xa=function(){this.g=!1};function Vi(u,m,_,w,F,$){u.info(function(){if(u.g)if($)for(var ee="",je=$.split("&"),ft=0;ft<je.length;ft++){var Ve=je[ft].split("=");if(1<Ve.length){var vt=Ve[0];Ve=Ve[1];var at=vt.split("_");ee=2<=at.length&&at[1]=="type"?ee+(vt+"="+Ve+"&"):ee+(vt+"=redacted&")}}else ee=null;else ee=$;return"XMLHTTP REQ ("+w+") [attempt "+F+"]: "+m+`
`+_+`
`+ee})}function Ss(u,m,_,w,F,$,ee){u.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+F+"]: "+m+`
`+_+`
`+$+" "+ee})}function In(u,m,_,w){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Oc(u,_)+(w?" "+w:"")})}function Ko(u,m){u.info(function(){return"TIMEOUT: "+m})}Di.prototype.info=function(){};function Oc(u,m){if(!u.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var w=_[u];if(!(2>w.length)){var F=w[1];if(Array.isArray(F)&&!(1>F.length)){var $=F[0];if($!="noop"&&$!="stop"&&$!="close")for(var ee=1;ee<F.length;ee++)F[ee]=""}}}}return zo(_)}catch{return m}}var Rs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},pl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Sn;function Li(){}L(Li,Ni),Li.prototype.g=function(){return new XMLHttpRequest},Li.prototype.i=function(){return{}},Sn=new Li;function Rn(u,m,_,w){this.j=u,this.i=m,this.l=_,this.R=w||1,this.U=new ki(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ml}function ml(){this.i=null,this.g="",this.h=!1}var Go={},As={};function Cs(u,m,_){u.L=1,u.v=Br(nn(m)),u.m=_,u.P=!0,Qo(u,null)}function Qo(u,m){u.F=Date.now(),He(u),u.A=nn(u.v);var _=u.A,w=u.R;Array.isArray(w)||(w=[String(w)]),qr(_.i,"t",w),u.C=0,_=u.j.J,u.h=new ml,u.g=Vl(u.j,_?m:null,!u.m),0<u.O&&(u.M=new Pi(A(u.Y,u,u.g),u.O)),m=u.U,_=u.g,w=u.ca;var F="readystatechange";Array.isArray(F)||(F&&(Uo[0]=F.toString()),F=Uo);for(var $=0;$<F.length;$++){var ee=Lo(_,F[$],w||m.handleEvent,!1,m.h||m);if(!ee)break;m.g[ee.key]=ee}m=u.H?I(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),hr(),Vi(u.i,u.u,u.A,u.l,u.R,u.m)}Rn.prototype.ca=function(u){u=u.target;const m=this.M;m&&Kt(u)==3?m.j():this.Y(u)},Rn.prototype.Y=function(u){try{if(u==this.g)e:{const at=Kt(this.g);var m=this.g.Ba();const fn=this.g.Z();if(!(3>at)&&(at!=3||this.g&&(this.h.h||this.g.oa()||ta(this.g)))){this.J||at!=4||m==7||(m==8||0>=fn?hr(3):hr(2)),Oi(this);var _=this.g.Z();this.X=_;t:if(gl(this)){var w=ta(this.g);u="";var F=w.length,$=Kt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){hn(this),Fr(this);var ee="";break t}this.h.i=new f.TextDecoder}for(m=0;m<F;m++)this.h.h=!0,u+=this.h.i.decode(w[m],{stream:!($&&m==F-1)});w.length=0,this.h.g+=u,this.C=0,ee=this.h.g}else ee=this.g.oa();if(this.o=_==200,Ss(this.i,this.u,this.A,this.l,this.R,at,_),this.o){if(this.T&&!this.K){t:{if(this.g){var je,ft=this.g;if((je=ft.g?ft.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(je)){var Ve=je;break t}}Ve=null}if(_=Ve)In(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Yo(this,_);else{this.o=!1,this.s=3,it(12),hn(this),Fr(this);break e}}if(this.P){_=!0;let sn;for(;!this.J&&this.C<ee.length;)if(sn=Mc(this,ee),sn==As){at==4&&(this.s=4,it(14),_=!1),In(this.i,this.l,null,"[Incomplete Response]");break}else if(sn==Go){this.s=4,it(15),In(this.i,this.l,ee,"[Invalid Chunk]"),_=!1;break}else In(this.i,this.l,sn,null),Yo(this,sn);if(gl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),at!=4||ee.length!=0||this.h.h||(this.s=1,it(16),_=!1),this.o=this.o&&_,!_)In(this.i,this.l,ee,"[Invalid Chunked Response]"),hn(this),Fr(this);else if(0<ee.length&&!this.W){this.W=!0;var vt=this.j;vt.g==this&&vt.ba&&!vt.M&&(vt.j.info("Great, no buffering proxy detected. Bytes received: "+ee.length),ra(vt),vt.M=!0,it(11))}}else In(this.i,this.l,ee,null),Yo(this,ee);at==4&&hn(this),this.o&&!this.J&&(at==4?Fs(this.j,this):(this.o=!1,He(this)))}else Vs(this.g),_==400&&0<ee.indexOf("Unknown SID")?(this.s=3,it(12)):(this.s=0,it(13)),hn(this),Fr(this)}}}catch{}finally{}};function gl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Mc(u,m){var _=u.C,w=m.indexOf(`
`,_);return w==-1?As:(_=Number(m.substring(_,w)),isNaN(_)?Go:(w+=1,w+_>m.length?As:(m=m.slice(w,w+_),u.C=w+_,m)))}Rn.prototype.cancel=function(){this.J=!0,hn(this)};function He(u){u.S=Date.now()+u.I,yl(u,u.I)}function yl(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Tn(A(u.ba,u),m)}function Oi(u){u.B&&(f.clearTimeout(u.B),u.B=null)}Rn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Ko(this.i,this.A),this.L!=2&&(hr(),it(17)),hn(this),this.s=2,Fr(this)):yl(this,this.S-u)};function Fr(u){u.j.G==0||u.J||Fs(u.j,u)}function hn(u){Oi(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,jo(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function Yo(u,m){try{var _=u.j;if(_.G!=0&&(_.g==u||Bt(_.h,u))){if(!u.K&&Bt(_.h,u)&&_.G==3){try{var w=_.Da.g.parse(m)}catch{w=null}if(Array.isArray(w)&&w.length==3){var F=w;if(F[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)bs(_),Nn(_);else break e;Ms(_),it(18)}}else _.za=F[1],0<_.za-_.T&&37500>F[2]&&_.F&&_.v==0&&!_.C&&(_.C=Tn(A(_.Za,_),6e3));if(1>=vl(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else gr(_,11)}else if((u.K||_.g==u)&&bs(_),!G(m))for(F=_.Da.g.parse(m),m=0;m<F.length;m++){let Ve=F[m];if(_.T=Ve[0],Ve=Ve[1],_.G==2)if(Ve[0]=="c"){_.K=Ve[1],_.ia=Ve[2];const vt=Ve[3];vt!=null&&(_.la=vt,_.j.info("VER="+_.la));const at=Ve[4];at!=null&&(_.Aa=at,_.j.info("SVER="+_.Aa));const fn=Ve[5];fn!=null&&typeof fn=="number"&&0<fn&&(w=1.5*fn,_.L=w,_.j.info("backChannelRequestTimeoutMs_="+w)),w=_;const sn=u.g;if(sn){const Bi=sn.g?sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bi){var $=w.h;$.g||Bi.indexOf("spdy")==-1&&Bi.indexOf("quic")==-1&&Bi.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Xo($,$.h),$.h=null))}if(w.D){const js=sn.g?sn.g.getResponseHeader("X-HTTP-Session-Id"):null;js&&(w.ya=js,$e(w.I,w.D,js))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),w=_;var ee=u;if(w.qa=Dl(w,w.J?w.ia:null,w.W),ee.K){El(w.h,ee);var je=ee,ft=w.L;ft&&(je.I=ft),je.B&&(Oi(je),He(je)),w.g=ee}else zi(w);0<_.i.length&&Wn(_)}else Ve[0]!="stop"&&Ve[0]!="close"||gr(_,7);else _.G==3&&(Ve[0]=="stop"||Ve[0]=="close"?Ve[0]=="stop"?gr(_,7):Rt(_):Ve[0]!="noop"&&_.l&&_.l.ta(Ve),_.v=0)}}hr(4)}catch{}}var _l=class{constructor(u,m){this.g=u,this.map=m}};function Mi(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function tn(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function vl(u){return u.h?1:u.g?u.g.size:0}function Bt(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Xo(u,m){u.g?u.g.add(m):u.h=m}function El(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Mi.prototype.cancel=function(){if(this.i=wl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function wl(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.D);return m}return j(u.i)}function Ps(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var m=[],_=u.length,w=0;w<_;w++)m.push(u[w]);return m}m=[],_=0;for(w in u)m[_++]=u[w];return m}function ks(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var m=[];u=u.length;for(var _=0;_<u;_++)m.push(_);return m}m=[],_=0;for(const w in u)m[_++]=w;return m}}}function Ur(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var _=ks(u),w=Ps(u),F=w.length,$=0;$<F;$++)m.call(void 0,w[$],_&&_[$],u)}var bi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bc(u,m){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var w=u[_].indexOf("="),F=null;if(0<=w){var $=u[_].substring(0,w);F=u[_].substring(w+1)}else $=u[_];m($,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function dr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof dr){this.h=u.h,Fi(this,u.j),this.o=u.o,this.g=u.g,jr(this,u.s),this.l=u.l;var m=u.i,_=new $n;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),zr(this,_),this.m=u.m}else u&&(m=String(u).match(bi))?(this.h=!1,Fi(this,m[1]||"",!0),this.o=Ne(m[2]||""),this.g=Ne(m[3]||"",!0),jr(this,m[4]),this.l=Ne(m[5]||"",!0),zr(this,m[6]||"",!0),this.m=Ne(m[7]||"")):(this.h=!1,this.i=new $n(null,this.h))}dr.prototype.toString=function(){var u=[],m=this.j;m&&u.push($r(m,Ns,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push($r(m,Ns,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push($r(_,_.charAt(0)=="/"?Sl:Il,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",$r(_,Jo)),u.join("")};function nn(u){return new dr(u)}function Fi(u,m,_){u.j=_?Ne(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function jr(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function zr(u,m,_){m instanceof $n?(u.i=m,qn(u.i,u.h)):(_||(m=$r(m,Rl)),u.i=new $n(m,u.h))}function $e(u,m,_){u.i.set(m,_)}function Br(u){return $e(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ne(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function $r(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,Tl),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Tl(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ns=/[#\/\?@]/g,Il=/[#\?:]/g,Sl=/[#\?]/g,Rl=/[#\?@]/g,Jo=/#/g;function $n(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function St(u){u.g||(u.g=new Map,u.h=0,u.i&&bc(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}r=$n.prototype,r.add=function(u,m){St(this),this.i=null,u=dn(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function An(u,m){St(u),m=dn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Cn(u,m){return St(u),m=dn(u,m),u.g.has(m)}r.forEach=function(u,m){St(this),this.g.forEach(function(_,w){_.forEach(function(F){u.call(m,F,w,this)},this)},this)},r.na=function(){St(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let w=0;w<m.length;w++){const F=u[w];for(let $=0;$<F.length;$++)_.push(m[w])}return _},r.V=function(u){St(this);let m=[];if(typeof u=="string")Cn(this,u)&&(m=m.concat(this.g.get(dn(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)m=m.concat(u[_])}return m},r.set=function(u,m){return St(this),this.i=null,u=dn(this,u),Cn(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function qr(u,m,_){An(u,m),0<_.length&&(u.i=null,u.g.set(dn(u,m),j(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var w=m[_];const $=encodeURIComponent(String(w)),ee=this.V(w);for(w=0;w<ee.length;w++){var F=$;ee[w]!==""&&(F+="="+encodeURIComponent(String(ee[w]))),u.push(F)}}return this.i=u.join("&")};function dn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function qn(u,m){m&&!u.j&&(St(u),u.i=null,u.g.forEach(function(_,w){var F=w.toLowerCase();w!=F&&(An(this,w),qr(this,F,_))},u)),u.j=m}function Fc(u,m){const _=new Di;if(f.Image){const w=new Image;w.onload=V(Wt,_,"TestLoadImage: loaded",!0,m,w),w.onerror=V(Wt,_,"TestLoadImage: error",!1,m,w),w.onabort=V(Wt,_,"TestLoadImage: abort",!1,m,w),w.ontimeout=V(Wt,_,"TestLoadImage: timeout",!1,m,w),f.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=u}else m(!1)}function Al(u,m){const _=new Di,w=new AbortController,F=setTimeout(()=>{w.abort(),Wt(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:w.signal}).then($=>{clearTimeout(F),$.ok?Wt(_,"TestPingServer: ok",!0,m):Wt(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(F),Wt(_,"TestPingServer: error",!1,m)})}function Wt(u,m,_,w,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),w(_)}catch{}}function Uc(){this.g=new $o}function Cl(u,m,_){const w=_||"";try{Ur(u,function(F,$){let ee=F;y(F)&&(ee=zo(F)),m.push(w+$+"="+encodeURIComponent(ee))})}catch(F){throw m.push(w+"type="+encodeURIComponent("_badmap")),F}}function fr(u){this.l=u.Ub||null,this.j=u.eb||!1}L(fr,Ni),fr.prototype.g=function(){return new Ui(this.l,this.j)},fr.prototype.i=function(u){return function(){return u}}({});function Ui(u,m){ht.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}L(Ui,ht),r=Ui.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,kn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||f).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Pn(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,kn(this)),this.g&&(this.readyState=3,kn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Pl(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Pl(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Pn(this):kn(this),this.readyState==3&&Pl(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,Pn(this))},r.Qa=function(u){this.g&&(this.response=u,Pn(this))},r.ga=function(){this.g&&Pn(this)};function Pn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,kn(u)}r.setRequestHeader=function(u,m){this.u.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function kn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ui.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function pr(u){let m="";return we(u,function(_,w){m+=w,m+=":",m+=_,m+=`\r
`}),m}function Hr(u,m,_){e:{for(w in _){var w=!1;break e}w=!0}w||(_=pr(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):$e(u,m,_))}function Ye(u){ht.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}L(Ye,ht);var jc=/^https?$/i,Zo=["POST","PUT"];r=Ye.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,m,_,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Sn.g(),this.v=this.o?Es(this.o):Es(Sn),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch($){ji(this,$);return}if(u=_||"",_=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var F in w)_.set(F,w[F]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const $ of w.keys())_.set($,w.get($));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(_.keys()).find($=>$.toLowerCase()=="content-type"),F=f.FormData&&u instanceof f.FormData,!(0<=Array.prototype.indexOf.call(Zo,m,void 0))||w||F||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,ee]of _)this.g.setRequestHeader($,ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ds(this),this.u=!0,this.g.send(u),this.u=!1}catch($){ji(this,$)}};function ji(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,xs(u),rn(u)}function xs(u){u.A||(u.A=!0,dt(u,"complete"),dt(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,dt(this,"complete"),dt(this,"abort"),rn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),rn(this,!0)),Ye.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?ea(this):this.bb())},r.bb=function(){ea(this)};function ea(u){if(u.h&&typeof h<"u"&&(!u.v[1]||Kt(u)!=4||u.Z()!=2)){if(u.u&&Kt(u)==4)Fo(u.Ea,0,u);else if(dt(u,"readystatechange"),Kt(u)==4){u.h=!1;try{const ee=u.Z();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var w;if(w=ee===0){var F=String(u.D).match(bi)[1]||null;!F&&f.self&&f.self.location&&(F=f.self.location.protocol.slice(0,-1)),w=!jc.test(F?F.toLowerCase():"")}_=w}if(_)dt(u,"complete"),dt(u,"success");else{u.m=6;try{var $=2<Kt(u)?u.g.statusText:""}catch{$=""}u.l=$+" ["+u.Z()+"]",xs(u)}}finally{rn(u)}}}}function rn(u,m){if(u.g){Ds(u);const _=u.g,w=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||dt(u,"ready");try{_.onreadystatechange=w}catch{}}}function Ds(u){u.I&&(f.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function Kt(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<Kt(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Bo(m)}};function ta(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Vs(u){const m={};u=(u.g&&2<=Kt(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<u.length;w++){if(G(u[w]))continue;var _=D(u[w]);const F=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const $=m[F]||[];m[F]=$,$.push(_)}N(m,function(w){return w.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Hn(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function na(u){this.Aa=0,this.i=[],this.j=new Di,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Hn("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Hn("baseRetryDelayMs",5e3,u),this.cb=Hn("retryDelaySeedMs",1e4,u),this.Wa=Hn("forwardChannelMaxRetries",2,u),this.wa=Hn("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Mi(u&&u.concurrentRequestLimit),this.Da=new Uc,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=na.prototype,r.la=8,r.G=1,r.connect=function(u,m,_,w){it(0),this.W=u,this.H=m||{},_&&w!==void 0&&(this.H.OSID=_,this.H.OAID=w),this.F=this.X,this.I=Dl(this,null,this.W),Wn(this)};function Rt(u){if(Ls(u),u.G==3){var m=u.U++,_=nn(u.I);if($e(_,"SID",u.K),$e(_,"RID",m),$e(_,"TYPE","terminate"),mr(u,_),m=new Rn(u,u.j,m),m.L=2,m.v=Br(nn(_)),_=!1,f.navigator&&f.navigator.sendBeacon)try{_=f.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&f.Image&&(new Image().src=m.v,_=!0),_||(m.g=Vl(m.j,null),m.g.ea(m.v)),m.F=Date.now(),He(m)}xl(u)}function Nn(u){u.g&&(ra(u),u.g.cancel(),u.g=null)}function Ls(u){Nn(u),u.u&&(f.clearTimeout(u.u),u.u=null),bs(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&f.clearTimeout(u.s),u.s=null)}function Wn(u){if(!tn(u.h)&&!u.s){u.s=!0;var m=u.Ga;ze||se(),te||(ze(),te=!0),me.add(m,u),u.B=0}}function zc(u,m){return vl(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Tn(A(u.Ga,u,m),Nl(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const F=new Rn(this,this.j,u);let $=this.o;if(this.S&&($?($=I($),k($,this.S)):$=this.S),this.m!==null||this.O||(F.H=$,$=null),this.P)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var w=this.i[_];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(m+=w,4096<m){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=Wr(this,F,m),_=nn(this.I),$e(_,"RID",u),$e(_,"CVER",22),this.D&&$e(_,"X-HTTP-Session-Id",this.D),mr(this,_),$&&(this.O?m="headers="+encodeURIComponent(String(pr($)))+"&"+m:this.m&&Hr(_,this.m,$)),Xo(this.h,F),this.Ua&&$e(_,"TYPE","init"),this.P?($e(_,"$req",m),$e(_,"SID","null"),F.T=!0,Cs(F,_,null)):Cs(F,_,m),this.G=2}}else this.G==3&&(u?Os(this,u):this.i.length==0||tn(this.h)||Os(this))};function Os(u,m){var _;m?_=m.l:_=u.U++;const w=nn(u.I);$e(w,"SID",u.K),$e(w,"RID",_),$e(w,"AID",u.T),mr(u,w),u.m&&u.o&&Hr(w,u.m,u.o),_=new Rn(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),m&&(u.i=m.D.concat(u.i)),m=Wr(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Xo(u.h,_),Cs(_,w,m)}function mr(u,m){u.H&&we(u.H,function(_,w){$e(m,w,_)}),u.l&&Ur({},function(_,w){$e(m,w,_)})}function Wr(u,m,_){_=Math.min(u.i.length,_);var w=u.l?A(u.l.Na,u.l,u):null;e:{var F=u.i;let $=-1;for(;;){const ee=["count="+_];$==-1?0<_?($=F[0].g,ee.push("ofs="+$)):$=0:ee.push("ofs="+$);let je=!0;for(let ft=0;ft<_;ft++){let Ve=F[ft].g;const vt=F[ft].map;if(Ve-=$,0>Ve)$=Math.max(0,F[ft].g-100),je=!1;else try{Cl(vt,ee,"req"+Ve+"_")}catch{w&&w(vt)}}if(je){w=ee.join("&");break e}}}return u=u.i.splice(0,_),m.D=u,w}function zi(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;ze||se(),te||(ze(),te=!0),me.add(m,u),u.v=0}}function Ms(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Tn(A(u.Fa,u),Nl(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,kl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Tn(A(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,it(10),Nn(this),kl(this))};function ra(u){u.A!=null&&(f.clearTimeout(u.A),u.A=null)}function kl(u){u.g=new Rn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=nn(u.qa);$e(m,"RID","rpc"),$e(m,"SID",u.K),$e(m,"AID",u.T),$e(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&$e(m,"TO",u.ja),$e(m,"TYPE","xmlhttp"),mr(u,m),u.m&&u.o&&Hr(m,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=Br(nn(m)),_.m=null,_.P=!0,Qo(_,u)}r.Za=function(){this.C!=null&&(this.C=null,Nn(this),Ms(this),it(19))};function bs(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function Fs(u,m){var _=null;if(u.g==m){bs(u),ra(u),u.g=null;var w=2}else if(Bt(u.h,m))_=m.D,El(u.h,m),w=1;else return;if(u.G!=0){if(m.o)if(w==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var F=u.B;w=xi(),dt(w,new Is(w,_)),Wn(u)}else zi(u);else if(F=m.s,F==3||F==0&&0<m.X||!(w==1&&zc(u,m)||w==2&&Ms(u)))switch(_&&0<_.length&&(m=u.h,m.i=m.i.concat(_)),F){case 1:gr(u,5);break;case 4:gr(u,10);break;case 3:gr(u,6);break;default:gr(u,2)}}}function Nl(u,m){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*m}function gr(u,m){if(u.j.info("Error code "+m),m==2){var _=A(u.fb,u),w=u.Xa;const F=!w;w=new dr(w||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Fi(w,"https"),Br(w),F?Fc(w.toString(),_):Al(w.toString(),_)}else it(2);u.G=0,u.l&&u.l.sa(m),xl(u),Ls(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),it(2)):(this.j.info("Failed to ping google.com"),it(1))};function xl(u){if(u.G=0,u.ka=[],u.l){const m=wl(u.h);(m.length!=0||u.i.length!=0)&&(O(u.ka,m),O(u.ka,u.i),u.h.i.length=0,j(u.i),u.i.length=0),u.l.ra()}}function Dl(u,m,_){var w=_ instanceof dr?nn(_):new dr(_);if(w.g!="")m&&(w.g=m+"."+w.g),jr(w,w.s);else{var F=f.location;w=F.protocol,m=m?m+"."+F.hostname:F.hostname,F=+F.port;var $=new dr(null);w&&Fi($,w),m&&($.g=m),F&&jr($,F),_&&($.l=_),w=$}return _=u.D,m=u.ya,_&&m&&$e(w,_,m),$e(w,"VER",u.la),mr(u,w),w}function Vl(u,m,_){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new Ye(new fr({eb:_})):new Ye(u.pa),m.Ha(u.J),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function ia(){}r=ia.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Us(){}Us.prototype.g=function(u,m){return new $t(u,m)};function $t(u,m){ht.call(this),this.g=new na(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!G(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!G(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Kn(this)}L($t,ht),$t.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},$t.prototype.close=function(){Rt(this.g)},$t.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=zo(u),u=_);m.i.push(new _l(m.Ya++,u)),m.G==3&&Wn(m)},$t.prototype.N=function(){this.g.l=null,delete this.j,Rt(this.g),delete this.g,$t.aa.N.call(this)};function Ll(u){zn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}L(Ll,zn);function Ol(){Ts.call(this),this.status=1}L(Ol,Ts);function Kn(u){this.g=u}L(Kn,ia),Kn.prototype.ua=function(){dt(this.g,"a")},Kn.prototype.ta=function(u){dt(this.g,new Ll(u))},Kn.prototype.sa=function(u){dt(this.g,new Ol)},Kn.prototype.ra=function(){dt(this.g,"b")},Us.prototype.createWebChannel=Us.prototype.g,$t.prototype.send=$t.prototype.o,$t.prototype.open=$t.prototype.m,$t.prototype.close=$t.prototype.close,m_=function(){return new Us},p_=function(){return xi()},f_=Bn,Vd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Rs.NO_ERROR=0,Rs.TIMEOUT=8,Rs.HTTP_ERROR=6,ju=Rs,pl.COMPLETE="complete",d_=pl,ws.EventType=cn,cn.OPEN="a",cn.CLOSE="b",cn.ERROR="c",cn.MESSAGE="d",ht.prototype.listen=ht.prototype.K,Va=ws,Ye.prototype.listenOnce=Ye.prototype.L,Ye.prototype.getLastError=Ye.prototype.Ka,Ye.prototype.getLastErrorCode=Ye.prototype.Ba,Ye.prototype.getStatus=Ye.prototype.Z,Ye.prototype.getResponseJson=Ye.prototype.Oa,Ye.prototype.getResponseText=Ye.prototype.oa,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Ha,h_=Ye}).apply(typeof Nu<"u"?Nu:typeof self<"u"?self:typeof window<"u"?window:{});const Ag="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ft.UNAUTHENTICATED=new Ft(null),Ft.GOOGLE_CREDENTIALS=new Ft("google-credentials-uid"),Ft.FIRST_PARTY=new Ft("first-party-uid"),Ft.MOCK_USER=new Ft("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Po="11.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const os=new sf("@firebase/firestore");function ao(){return os.logLevel}function oe(r,...e){if(os.logLevel<=Pe.DEBUG){const t=e.map(lf);os.debug(`Firestore (${Po}): ${r}`,...t)}}function xr(r,...e){if(os.logLevel<=Pe.ERROR){const t=e.map(lf);os.error(`Firestore (${Po}): ${r}`,...t)}}function vo(r,...e){if(os.logLevel<=Pe.WARN){const t=e.map(lf);os.warn(`Firestore (${Po}): ${r}`,...t)}}function lf(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(r="Unexpected state"){const e=`FIRESTORE (${Po}) INTERNAL ASSERTION FAILED: `+r;throw xr(e),new Error(e)}function Ue(r,e){r||Ee()}function Ie(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends Or{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class NS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ft.UNAUTHENTICATED))}shutdown(){}}class xS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class DS{constructor(e){this.t=e,this.currentUser=Ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ue(this.o===void 0);let s=this.i;const o=p=>this.i!==s?(s=this.i,t(p)):Promise.resolve();let l=new is;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new is,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const p=l;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},f=p=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(p=>f(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?f(p):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new is)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ue(typeof s.accessToken=="string"),new g_(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ue(e===null||typeof e=="string"),new Ft(e)}}class VS{constructor(e,t,s){this.l=e,this.h=t,this.P=s,this.type="FirstParty",this.user=Ft.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class LS{constructor(e,t,s){this.l=e,this.h=t,this.P=s}getToken(){return Promise.resolve(new VS(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ft.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class OS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class MS{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Ue(this.o===void 0);const s=l=>{l.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.R;return this.R=l.token,oe("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>s(l))};const o=l=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?o(l):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ue(typeof t.token=="string"),this.R=t.token,new OS(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bS(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const o=bS(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%e.length))}return s}}function xe(r,e){return r<e?-1:r>e?1:0}function Eo(r,e,t){return r.length===e.length&&r.every((s,o)=>t(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{static now(){return gt.fromMillis(Date.now())}static fromDate(e){return gt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new gt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ce(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ce(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ce(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?xe(this.nanoseconds,e.nanoseconds):xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{static fromTimestamp(e){return new Te(e)}static min(){return new Te(new gt(0,0))}static max(){return new Te(new gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ee(),s===void 0?s=e.length-t:s>e.length-t&&Ee(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Jn.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Jn?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=Jn.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Math.sign(e.length-t.length)}static compareSegments(e,t){const s=Jn.isNumericId(e),o=Jn.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?Jn.extractNumericId(e).compare(Jn.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return gi.fromString(e.substring(4,e.length-2))}}class Qe extends Jn{construct(e,t,s){return new Qe(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ce(Q.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(o=>o.length>0))}return new Qe(t)}static emptyPath(){return new Qe([])}}const FS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kt extends Jn{construct(e,t,s){return new kt(e,t,s)}static isValidIdentifier(e){return FS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new kt(["__name__"])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new ce(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let h=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new ce(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ce(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else f==="`"?(h=!h,o++):f!=="."||h?(s+=f,o++):(l(),o++)}if(l(),h)throw new ce(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kt(t)}static emptyPath(){return new kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.path=e}static fromPath(e){return new pe(Qe.fromString(e))}static fromName(e){return new pe(Qe.fromString(e).popFirst(5))}static empty(){return new pe(Qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Qe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new Qe(e.slice()))}}function US(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Te.fromTimestamp(s===1e9?new gt(t+1,0):new gt(t,s));return new vi(o,pe.empty(),e)}function jS(r){return new vi(r.readTime,r.key,-1)}class vi{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new vi(Te.min(),pe.empty(),-1)}static max(){return new vi(Te.max(),pe.empty(),-1)}}function zS(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=pe.comparator(r.documentKey,e.documentKey),t!==0?t:xe(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $S{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ko(r){if(r.code!==Q.FAILED_PRECONDITION||r.message!==BS)throw r;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ee(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new W((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof W?t:W.resolve(t)}catch(t){return W.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):W.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):W.reject(t)}static resolve(e){return new W((t,s)=>{t(e)})}static reject(e){return new W((t,s)=>{s(e)})}static waitFor(e){return new W((t,s)=>{let o=0,l=0,h=!1;e.forEach(f=>{++o,f.next(()=>{++l,h&&l===o&&t()},p=>s(p))}),h=!0,l===o&&t()})}static or(e){let t=W.resolve(!1);for(const s of e)t=t.next(o=>o?W.resolve(o):s());return t}static forEach(e,t){const s=[];return e.forEach((o,l)=>{s.push(t.call(this,o,l))}),this.waitFor(s)}static mapArray(e,t){return new W((s,o)=>{const l=e.length,h=new Array(l);let f=0;for(let p=0;p<l;p++){const y=p;t(e[y]).next(E=>{h[y]=E,++f,f===l&&s(h)},E=>o(E))}})}static doWhile(e,t){return new W((s,o)=>{const l=()=>{e()===!0?t().next(()=>{l()},o):s()};l()})}}function qS(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function No(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ie(s),this.se=s=>t.writeSequenceNumber(s))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}_c.oe=-1;function vc(r){return r==null}function ec(r){return r===0&&1/r==-1/0}function HS(r){return typeof r=="number"&&Number.isInteger(r)&&!ec(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Cg(e)),e=KS(r.get(t),e);return Cg(e)}function KS(r,e){let t=e;const s=r.length;for(let o=0;o<s;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case"":t+="";break;default:t+=l}}return t}function Cg(r){return r+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pg(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function cs(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function __(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e,t){this.comparator=e,this.root=t||Pt.EMPTY}insert(e,t){return new tt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Pt.BLACK,null,null))}remove(e){return new tt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xu(this.root,e,this.comparator,!1)}getReverseIterator(){return new xu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xu(this.root,e,this.comparator,!0)}}class xu{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pt{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??Pt.RED,this.left=o??Pt.EMPTY,this.right=l??Pt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new Pt(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Pt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Pt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ee();const e=this.left.check();if(e!==this.right.check())throw Ee();return e+(this.isRed()?0:1)}}Pt.EMPTY=null,Pt.RED=!0,Pt.BLACK=!1;Pt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee()}get value(){throw Ee()}get color(){throw Ee()}get left(){throw Ee()}get right(){throw Ee()}copy(e,t,s,o,l){return this}insert(e,t,s){return new Pt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.comparator=e,this.data=new tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new kg(this.data.getIterator())}getIteratorFrom(e){return new kg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof yt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new yt(this.comparator);return t.data=e,t}}class kg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.fields=e,e.sort(kt.comparator)}static empty(){return new bn([])}unionWith(e){let t=new yt(kt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new bn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Eo(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new v_("Invalid base64 string: "+l):l}}(e);return new Nt(t)}static fromUint8Array(e){const t=function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l}(e);return new Nt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nt.EMPTY_BYTE_STRING=new Nt("");const GS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ei(r){if(Ue(!!r),typeof r=="string"){let e=0;const t=GS.exec(r);if(Ue(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ot(r.seconds),nanos:ot(r.nanos)}}function ot(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function wi(r){return typeof r=="string"?Nt.fromBase64String(r):Nt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Ec(r){const e=r.mapValue.fields.__previous_value__;return uf(e)?Ec(e):e}function qa(r){const e=Ei(r.mapValue.fields.__local_write_time__.timestampValue);return new gt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e,t,s,o,l,h,f,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=f,this.longPollingOptions=p,this.useFetchStreams=y}}class Ha{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ha("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ha&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Du={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ti(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?uf(r)?4:XS(r)?9007199254740991:YS(r)?10:11:Ee()}function sr(r,e){if(r===e)return!0;const t=Ti(r);if(t!==Ti(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return qa(r).isEqual(qa(e));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=Ei(o.timestampValue),f=Ei(l.timestampValue);return h.seconds===f.seconds&&h.nanos===f.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,l){return wi(o.bytesValue).isEqual(wi(l.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,l){return ot(o.geoPointValue.latitude)===ot(l.geoPointValue.latitude)&&ot(o.geoPointValue.longitude)===ot(l.geoPointValue.longitude)}(r,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return ot(o.integerValue)===ot(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=ot(o.doubleValue),f=ot(l.doubleValue);return h===f?ec(h)===ec(f):isNaN(h)&&isNaN(f)}return!1}(r,e);case 9:return Eo(r.arrayValue.values||[],e.arrayValue.values||[],sr);case 10:case 11:return function(o,l){const h=o.mapValue.fields||{},f=l.mapValue.fields||{};if(Pg(h)!==Pg(f))return!1;for(const p in h)if(h.hasOwnProperty(p)&&(f[p]===void 0||!sr(h[p],f[p])))return!1;return!0}(r,e);default:return Ee()}}function Wa(r,e){return(r.values||[]).find(t=>sr(t,e))!==void 0}function wo(r,e){if(r===e)return 0;const t=Ti(r),s=Ti(e);if(t!==s)return xe(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return xe(r.booleanValue,e.booleanValue);case 2:return function(l,h){const f=ot(l.integerValue||l.doubleValue),p=ot(h.integerValue||h.doubleValue);return f<p?-1:f>p?1:f===p?0:isNaN(f)?isNaN(p)?0:-1:1}(r,e);case 3:return Ng(r.timestampValue,e.timestampValue);case 4:return Ng(qa(r),qa(e));case 5:return xe(r.stringValue,e.stringValue);case 6:return function(l,h){const f=wi(l),p=wi(h);return f.compareTo(p)}(r.bytesValue,e.bytesValue);case 7:return function(l,h){const f=l.split("/"),p=h.split("/");for(let y=0;y<f.length&&y<p.length;y++){const E=xe(f[y],p[y]);if(E!==0)return E}return xe(f.length,p.length)}(r.referenceValue,e.referenceValue);case 8:return function(l,h){const f=xe(ot(l.latitude),ot(h.latitude));return f!==0?f:xe(ot(l.longitude),ot(h.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return xg(r.arrayValue,e.arrayValue);case 10:return function(l,h){var f,p,y,E;const T=l.fields||{},A=h.fields||{},V=(f=T.value)===null||f===void 0?void 0:f.arrayValue,L=(p=A.value)===null||p===void 0?void 0:p.arrayValue,j=xe(((y=V==null?void 0:V.values)===null||y===void 0?void 0:y.length)||0,((E=L==null?void 0:L.values)===null||E===void 0?void 0:E.length)||0);return j!==0?j:xg(V,L)}(r.mapValue,e.mapValue);case 11:return function(l,h){if(l===Du.mapValue&&h===Du.mapValue)return 0;if(l===Du.mapValue)return 1;if(h===Du.mapValue)return-1;const f=l.fields||{},p=Object.keys(f),y=h.fields||{},E=Object.keys(y);p.sort(),E.sort();for(let T=0;T<p.length&&T<E.length;++T){const A=xe(p[T],E[T]);if(A!==0)return A;const V=wo(f[p[T]],y[E[T]]);if(V!==0)return V}return xe(p.length,E.length)}(r.mapValue,e.mapValue);default:throw Ee()}}function Ng(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return xe(r,e);const t=Ei(r),s=Ei(e),o=xe(t.seconds,s.seconds);return o!==0?o:xe(t.nanos,s.nanos)}function xg(r,e){const t=r.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=wo(t[o],s[o]);if(l)return l}return xe(t.length,s.length)}function To(r){return Ld(r)}function Ld(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const s=Ei(t);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return wi(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return pe.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=Ld(l);return s+"]"}(r.arrayValue):"mapValue"in r?function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of s)l?l=!1:o+=",",o+=`${h}:${Ld(t.fields[h])}`;return o+"}"}(r.mapValue):Ee()}function zu(r){switch(Ti(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ec(r);return e?16+zu(e):16;case 5:return 2*r.stringValue.length;case 6:return wi(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,l)=>o+zu(l),0)}(r.arrayValue);case 10:case 11:return function(s){let o=0;return cs(s.fields,(l,h)=>{o+=l.length+zu(h)}),o}(r.mapValue);default:throw Ee()}}function Dg(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Od(r){return!!r&&"integerValue"in r}function cf(r){return!!r&&"arrayValue"in r}function Vg(r){return!!r&&"nullValue"in r}function Lg(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Bu(r){return!!r&&"mapValue"in r}function YS(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function ba(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return cs(r.mapValue.fields,(t,s)=>e.mapValue.fields[t]=ba(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ba(r.arrayValue.values[t]);return e}return Object.assign({},r)}function XS(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.value=e}static empty(){return new wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Bu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ba(t)}setAll(e){let t=kt.emptyPath(),s={},o=[];e.forEach((h,f)=>{if(!t.isImmediateParentOf(f)){const p=this.getFieldsMap(t);this.applyChanges(p,s,o),s={},o=[],t=f.popLast()}h?s[f.lastSegment()]=ba(h):o.push(f.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());Bu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return sr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];Bu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){cs(t,(o,l)=>e[o]=l);for(const o of s)delete e[o]}clone(){return new wn(ba(this.value))}}function E_(r){const e=[];return cs(r.fields,(t,s)=>{const o=new kt([t]);if(Bu(s)){const l=E_(s.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)}),new bn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,t,s,o,l,h,f){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=h,this.documentState=f}static newInvalidDocument(e){return new Ut(e,0,Te.min(),Te.min(),Te.min(),wn.empty(),0)}static newFoundDocument(e,t,s,o){return new Ut(e,1,t,Te.min(),s,o,0)}static newNoDocument(e,t){return new Ut(e,2,t,Te.min(),Te.min(),wn.empty(),0)}static newUnknownDocument(e,t){return new Ut(e,3,t,Te.min(),Te.min(),wn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e,t){this.position=e,this.inclusive=t}}function Og(r,e,t){let s=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?s=pe.comparator(pe.fromName(h.referenceValue),t.key):s=wo(h,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function Mg(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!sr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e,t="asc"){this.field=e,this.dir=t}}function JS(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{}class ct extends w_{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new e0(e,t,s):t==="array-contains"?new r0(e,s):t==="in"?new i0(e,s):t==="not-in"?new s0(e,s):t==="array-contains-any"?new o0(e,s):new ct(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new t0(e,s):new n0(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(wo(t,this.value)):t!==null&&Ti(this.value)===Ti(t)&&this.matchesComparison(wo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Un extends w_{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Un(e,t)}matches(e){return T_(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function T_(r){return r.op==="and"}function I_(r){return ZS(r)&&T_(r)}function ZS(r){for(const e of r.filters)if(e instanceof Un)return!1;return!0}function Md(r){if(r instanceof ct)return r.field.canonicalString()+r.op.toString()+To(r.value);if(I_(r))return r.filters.map(e=>Md(e)).join(",");{const e=r.filters.map(t=>Md(t)).join(",");return`${r.op}(${e})`}}function S_(r,e){return r instanceof ct?function(s,o){return o instanceof ct&&s.op===o.op&&s.field.isEqual(o.field)&&sr(s.value,o.value)}(r,e):r instanceof Un?function(s,o){return o instanceof Un&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((l,h,f)=>l&&S_(h,o.filters[f]),!0):!1}(r,e):void Ee()}function R_(r){return r instanceof ct?function(t){return`${t.field.canonicalString()} ${t.op} ${To(t.value)}`}(r):r instanceof Un?function(t){return t.op.toString()+" {"+t.getFilters().map(R_).join(" ,")+"}"}(r):"Filter"}class e0 extends ct{constructor(e,t,s){super(e,t,s),this.key=pe.fromName(s.referenceValue)}matches(e){const t=pe.comparator(e.key,this.key);return this.matchesComparison(t)}}class t0 extends ct{constructor(e,t){super(e,"in",t),this.keys=A_("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class n0 extends ct{constructor(e,t){super(e,"not-in",t),this.keys=A_("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function A_(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(s=>pe.fromName(s.referenceValue))}class r0 extends ct{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return cf(t)&&Wa(t.arrayValue,this.value)}}class i0 extends ct{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Wa(this.value.arrayValue,t)}}class s0 extends ct{constructor(e,t){super(e,"not-in",t)}matches(e){if(Wa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Wa(this.value.arrayValue,t)}}class o0 extends ct{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!cf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Wa(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e,t=null,s=[],o=[],l=null,h=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=h,this.endAt=f,this.ue=null}}function bg(r,e=null,t=[],s=[],o=null,l=null,h=null){return new a0(r,e,t,s,o,l,h)}function hf(r){const e=Ie(r);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>Md(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(l){return l.field.canonicalString()+l.dir}(s)).join(","),vc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>To(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>To(s)).join(",")),e.ue=t}return e.ue}function df(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!JS(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!S_(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Mg(r.startAt,e.startAt)&&Mg(r.endAt,e.endAt)}function bd(r){return pe.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e,t=null,s=[],o=[],l=null,h="F",f=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=h,this.startAt=f,this.endAt=p,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function l0(r,e,t,s,o,l,h,f){return new il(r,e,t,s,o,l,h,f)}function ff(r){return new il(r)}function Fg(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function C_(r){return r.collectionGroup!==null}function Fa(r){const e=Ie(r);if(e.ce===null){e.ce=[];const t=new Set;for(const l of e.explicitOrderBy)e.ce.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let f=new yt(kt.comparator);return h.filters.forEach(p=>{p.getFlattenedFilters().forEach(y=>{y.isInequality()&&(f=f.add(y.field))})}),f})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.ce.push(new nc(l,s))}),t.has(kt.keyField().canonicalString())||e.ce.push(new nc(kt.keyField(),s))}return e.ce}function er(r){const e=Ie(r);return e.le||(e.le=u0(e,Fa(r))),e.le}function u0(r,e){if(r.limitType==="F")return bg(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new nc(o.field,l)});const t=r.endAt?new tc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new tc(r.startAt.position,r.startAt.inclusive):null;return bg(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function Fd(r,e){const t=r.filters.concat([e]);return new il(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Ud(r,e,t){return new il(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function wc(r,e){return df(er(r),er(e))&&r.limitType===e.limitType}function P_(r){return`${hf(er(r))}|lt:${r.limitType}`}function lo(r){return`Query(target=${function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(o=>R_(o)).join(", ")}]`),vc(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(o=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(o)).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(o=>To(o)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(o=>To(o)).join(",")),`Target(${s})`}(er(r))}; limitType=${r.limitType})`}function Tc(r,e){return e.isFoundDocument()&&function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):pe.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)}(r,e)&&function(s,o){for(const l of Fa(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(r,e)&&function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0}(r,e)&&function(s,o){return!(s.startAt&&!function(h,f,p){const y=Og(h,f,p);return h.inclusive?y<=0:y<0}(s.startAt,Fa(s),o)||s.endAt&&!function(h,f,p){const y=Og(h,f,p);return h.inclusive?y>=0:y>0}(s.endAt,Fa(s),o))}(r,e)}function c0(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function k_(r){return(e,t)=>{let s=!1;for(const o of Fa(r)){const l=h0(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function h0(r,e,t){const s=r.field.isKeyField()?pe.comparator(e.key,t.key):function(l,h,f){const p=h.data.field(l),y=f.data.field(l);return p!==null&&y!==null?wo(p,y):Ee()}(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Ee()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){cs(this.inner,(t,s)=>{for(const[o,l]of s)e(o,l)})}isEmpty(){return __(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0=new tt(pe.comparator);function Dr(){return d0}const N_=new tt(pe.comparator);function La(...r){let e=N_;for(const t of r)e=e.insert(t.key,t);return e}function x_(r){let e=N_;return r.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function rs(){return Ua()}function D_(){return Ua()}function Ua(){return new hs(r=>r.toString(),(r,e)=>r.isEqual(e))}const f0=new tt(pe.comparator),p0=new yt(pe.comparator);function ke(...r){let e=p0;for(const t of r)e=e.add(t);return e}const m0=new yt(xe);function g0(){return m0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pf(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ec(e)?"-0":e}}function V_(r){return{integerValue:""+r}}function y0(r,e){return HS(e)?V_(e):pf(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(){this._=void 0}}function _0(r,e,t){return r instanceof rc?function(o,l){const h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&uf(l)&&(l=Ec(l)),l&&(h.fields.__previous_value__=l),{mapValue:h}}(t,e):r instanceof Ka?O_(r,e):r instanceof Ga?M_(r,e):function(o,l){const h=L_(o,l),f=Ug(h)+Ug(o.Pe);return Od(h)&&Od(o.Pe)?V_(f):pf(o.serializer,f)}(r,e)}function v0(r,e,t){return r instanceof Ka?O_(r,e):r instanceof Ga?M_(r,e):t}function L_(r,e){return r instanceof ic?function(s){return Od(s)||function(l){return!!l&&"doubleValue"in l}(s)}(e)?e:{integerValue:0}:null}class rc extends Ic{}class Ka extends Ic{constructor(e){super(),this.elements=e}}function O_(r,e){const t=b_(e);for(const s of r.elements)t.some(o=>sr(o,s))||t.push(s);return{arrayValue:{values:t}}}class Ga extends Ic{constructor(e){super(),this.elements=e}}function M_(r,e){let t=b_(e);for(const s of r.elements)t=t.filter(o=>!sr(o,s));return{arrayValue:{values:t}}}class ic extends Ic{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Ug(r){return ot(r.integerValue||r.doubleValue)}function b_(r){return cf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function E0(r,e){return r.field.isEqual(e.field)&&function(s,o){return s instanceof Ka&&o instanceof Ka||s instanceof Ga&&o instanceof Ga?Eo(s.elements,o.elements,sr):s instanceof ic&&o instanceof ic?sr(s.Pe,o.Pe):s instanceof rc&&o instanceof rc}(r.transform,e.transform)}class w0{constructor(e,t){this.version=e,this.transformResults=t}}class tr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new tr}static exists(e){return new tr(void 0,e)}static updateTime(e){return new tr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $u(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Sc{}function F_(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new mf(r.key,tr.none()):new sl(r.key,r.data,tr.none());{const t=r.data,s=wn.empty();let o=new yt(kt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?s.delete(l):s.set(l,h),o=o.add(l)}return new ds(r.key,s,new bn(o.toArray()),tr.none())}}function T0(r,e,t){r instanceof sl?function(o,l,h){const f=o.value.clone(),p=zg(o.fieldTransforms,l,h.transformResults);f.setAll(p),l.convertToFoundDocument(h.version,f).setHasCommittedMutations()}(r,e,t):r instanceof ds?function(o,l,h){if(!$u(o.precondition,l))return void l.convertToUnknownDocument(h.version);const f=zg(o.fieldTransforms,l,h.transformResults),p=l.data;p.setAll(U_(o)),p.setAll(f),l.convertToFoundDocument(h.version,p).setHasCommittedMutations()}(r,e,t):function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,t)}function ja(r,e,t,s){return r instanceof sl?function(l,h,f,p){if(!$u(l.precondition,h))return f;const y=l.value.clone(),E=Bg(l.fieldTransforms,p,h);return y.setAll(E),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null}(r,e,t,s):r instanceof ds?function(l,h,f,p){if(!$u(l.precondition,h))return f;const y=Bg(l.fieldTransforms,p,h),E=h.data;return E.setAll(U_(l)),E.setAll(y),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(T=>T.field))}(r,e,t,s):function(l,h,f){return $u(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):f}(r,e,t)}function I0(r,e){let t=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),l=L_(s.transform,o||null);l!=null&&(t===null&&(t=wn.empty()),t.set(s.field,l))}return t||null}function jg(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Eo(s,o,(l,h)=>E0(l,h))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class sl extends Sc{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ds extends Sc{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function U_(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}}),e}function zg(r,e,t){const s=new Map;Ue(r.length===t.length);for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,f=e.data.field(l.field);s.set(l.field,v0(h,f,t[o]))}return s}function Bg(r,e,t){const s=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);s.set(o.field,_0(l,h,e))}return s}class mf extends Sc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class S0 extends Sc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&T0(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=ja(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=ja(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=D_();return this.mutations.forEach(o=>{const l=e.get(o.key),h=l.overlayedDocument;let f=this.applyToLocalView(h,l.mutatedFields);f=t.has(o.key)?null:f;const p=F_(h,f);p!==null&&s.set(o.key,p),h.isValidDocument()||h.convertToNoDocument(Te.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ke())}isEqual(e){return this.batchId===e.batchId&&Eo(this.mutations,e.mutations,(t,s)=>jg(t,s))&&Eo(this.baseMutations,e.baseMutations,(t,s)=>jg(t,s))}}class gf{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){Ue(e.mutations.length===s.length);let o=function(){return f0}();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,s[h].version);return new gf(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ut,Le;function P0(r){switch(r){default:return Ee();case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0}}function j_(r){if(r===void 0)return xr("GRPC error has no .code"),Q.UNKNOWN;switch(r){case ut.OK:return Q.OK;case ut.CANCELLED:return Q.CANCELLED;case ut.UNKNOWN:return Q.UNKNOWN;case ut.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case ut.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case ut.INTERNAL:return Q.INTERNAL;case ut.UNAVAILABLE:return Q.UNAVAILABLE;case ut.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case ut.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case ut.NOT_FOUND:return Q.NOT_FOUND;case ut.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case ut.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case ut.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case ut.ABORTED:return Q.ABORTED;case ut.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case ut.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case ut.DATA_LOSS:return Q.DATA_LOSS;default:return Ee()}}(Le=ut||(ut={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k0(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0=new gi([4294967295,4294967295],0);function $g(r){const e=k0().encode(r),t=new c_;return t.update(e),new Uint8Array(t.digest())}function qg(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new gi([t,s],0),new gi([o,l],0)]}class yf{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Oa(`Invalid padding: ${t}`);if(s<0)throw new Oa(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Oa(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Oa(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=gi.fromNumber(this.Te)}de(e,t,s){let o=e.add(t.multiply(gi.fromNumber(s)));return o.compare(N0)===1&&(o=new gi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Ie).toNumber()}Ee(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=$g(e),[s,o]=qg(t);for(let l=0;l<this.hashCount;l++){const h=this.de(s,o,l);if(!this.Ee(h))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new yf(l,o,t);return s.forEach(f=>h.insert(f)),h}insert(e){if(this.Te===0)return;const t=$g(e),[s,o]=qg(t);for(let l=0;l<this.hashCount;l++){const h=this.de(s,o,l);this.Ae(h)}}Ae(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Oa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,ol.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Rc(Te.min(),o,new tt(xe),Dr(),ke())}}class ol{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new ol(s,t,ke(),ke(),ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e,t,s,o){this.Re=e,this.removedTargetIds=t,this.key=s,this.Ve=o}}class z_{constructor(e,t){this.targetId=e,this.me=t}}class B_{constructor(e,t,s=Nt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class Hg{constructor(){this.fe=0,this.ge=Wg(),this.pe=Nt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ke(),t=ke(),s=ke();return this.ge.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Ee()}}),new ol(this.pe,this.ye,e,t,s)}Ce(){this.we=!1,this.ge=Wg()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ue(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class x0{constructor(e){this.Be=e,this.Le=new Map,this.ke=Dr(),this.qe=Vu(),this.Qe=Vu(),this.Ke=new tt(xe)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{const s=this.ze(t);switch(e.state){case 0:this.je(t)&&s.De(e.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(e.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(t);break;case 3:this.je(t)&&(s.Ne(),s.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),s.De(e.resumeToken));break;default:Ee()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Le.forEach((s,o)=>{this.je(o)&&t(o)})}Je(e){const t=e.targetId,s=e.me.count,o=this.Ye(t);if(o){const l=o.target;if(bd(l))if(s===0){const h=new pe(l.path);this.We(t,h,Ut.newNoDocument(h,Te.min()))}else Ue(s===1);else{const h=this.Ze(t);if(h!==s){const f=this.Xe(e),p=f?this.et(f,e,h):1;if(p!==0){this.He(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,y)}}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let h,f;try{h=wi(s).toUint8Array()}catch(p){if(p instanceof v_)return vo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{f=new yf(h,o,l)}catch(p){return vo(p instanceof Oa?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return f.Te===0?null:f}et(e,t,s){return t.me.count===s-this.rt(e,t.targetId)?0:2}rt(e,t){const s=this.Be.getRemoteKeysForTarget(t);let o=0;return s.forEach(l=>{const h=this.Be.nt(),f=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.We(t,l,null),o++)}),o}it(e){const t=new Map;this.Le.forEach((l,h)=>{const f=this.Ye(h);if(f){if(l.current&&bd(f.target)){const p=new pe(f.target.path);this.st(p).has(h)||this.ot(h,p)||this.We(h,p,Ut.newNoDocument(p,e))}l.be&&(t.set(h,l.ve()),l.Ce())}});let s=ke();this.Qe.forEach((l,h)=>{let f=!0;h.forEachWhile(p=>{const y=this.Ye(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)}),f&&(s=s.add(l))}),this.ke.forEach((l,h)=>h.setReadTime(e));const o=new Rc(e,t,this.Ke,this.ke,s);return this.ke=Dr(),this.qe=Vu(),this.Qe=Vu(),this.Ke=new tt(xe),o}Ue(e,t){if(!this.je(e))return;const s=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,s),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,s){if(!this.je(e))return;const o=this.ze(e);this.ot(e,t)?o.Fe(t,1):o.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),s&&(this.ke=this.ke.insert(t,s))}removeTarget(e){this.Le.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Le.get(e);return t||(t=new Hg,this.Le.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new yt(xe),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new yt(xe),this.qe=this.qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||oe("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Le.get(e);return t&&t.Se?null:this.Be.ut(e)}He(e){this.Le.set(e,new Hg),this.Be.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Be.getRemoteKeysForTarget(e).has(t)}}function Vu(){return new tt(pe.comparator)}function Wg(){return new tt(pe.comparator)}const D0={asc:"ASCENDING",desc:"DESCENDING"},V0={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},L0={and:"AND",or:"OR"};class O0{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function jd(r,e){return r.useProto3Json||vc(e)?e:{value:e}}function sc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $_(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function M0(r,e){return sc(r,e.toTimestamp())}function nr(r){return Ue(!!r),Te.fromTimestamp(function(t){const s=Ei(t);return new gt(s.seconds,s.nanos)}(r))}function _f(r,e){return zd(r,e).canonicalString()}function zd(r,e){const t=function(o){return new Qe(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?t:t.child(e)}function q_(r){const e=Qe.fromString(r);return Ue(Q_(e)),e}function Bd(r,e){return _f(r.databaseId,e.path)}function vd(r,e){const t=q_(e);if(t.get(1)!==r.databaseId.projectId)throw new ce(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ce(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new pe(W_(t))}function H_(r,e){return _f(r.databaseId,e)}function b0(r){const e=q_(r);return e.length===4?Qe.emptyPath():W_(e)}function $d(r){return new Qe(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function W_(r){return Ue(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function Kg(r,e,t){return{name:Bd(r,e),fields:t.value.mapValue.fields}}function F0(r,e){let t;if("targetChange"in e){e.targetChange;const s=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ee()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=function(y,E){return y.useProto3Json?(Ue(E===void 0||typeof E=="string"),Nt.fromBase64String(E||"")):(Ue(E===void 0||E instanceof Buffer||E instanceof Uint8Array),Nt.fromUint8Array(E||new Uint8Array))}(r,e.targetChange.resumeToken),h=e.targetChange.cause,f=h&&function(y){const E=y.code===void 0?Q.UNKNOWN:j_(y.code);return new ce(E,y.message||"")}(h);t=new B_(s,o,l,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=vd(r,s.document.name),l=nr(s.document.updateTime),h=s.document.createTime?nr(s.document.createTime):Te.min(),f=new wn({mapValue:{fields:s.document.fields}}),p=Ut.newFoundDocument(o,l,h,f),y=s.targetIds||[],E=s.removedTargetIds||[];t=new qu(y,E,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=vd(r,s.document),l=s.readTime?nr(s.readTime):Te.min(),h=Ut.newNoDocument(o,l),f=s.removedTargetIds||[];t=new qu([],f,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=vd(r,s.document),l=s.removedTargetIds||[];t=new qu([],l,o,null)}else{if(!("filter"in e))return Ee();{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,h=new C0(o,l),f=s.targetId;t=new z_(f,h)}}return t}function U0(r,e){let t;if(e instanceof sl)t={update:Kg(r,e.key,e.value)};else if(e instanceof mf)t={delete:Bd(r,e.key)};else if(e instanceof ds)t={update:Kg(r,e.key,e.data),updateMask:G0(e.fieldMask)};else{if(!(e instanceof S0))return Ee();t={verify:Bd(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(l,h){const f=h.transform;if(f instanceof rc)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Ka)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Ga)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof ic)return{fieldPath:h.field.canonicalString(),increment:f.Pe};throw Ee()}(0,s))),e.precondition.isNone||(t.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:M0(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ee()}(r,e.precondition)),t}function j0(r,e){return r&&r.length>0?(Ue(e!==void 0),r.map(t=>function(o,l){let h=o.updateTime?nr(o.updateTime):nr(l);return h.isEqual(Te.min())&&(h=nr(l)),new w0(h,o.transformResults||[])}(t,e))):[]}function z0(r,e){return{documents:[H_(r,e.path)]}}function B0(r,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=H_(r,o);const l=function(y){if(y.length!==0)return G_(Un.create(y,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const h=function(y){if(y.length!==0)return y.map(E=>function(A){return{field:uo(A.field),direction:H0(A.dir)}}(E))}(e.orderBy);h&&(t.structuredQuery.orderBy=h);const f=jd(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{ct:t,parent:o}}function $0(r){let e=b0(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){Ue(s===1);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let l=[];t.where&&(l=function(T){const A=K_(T);return A instanceof Un&&I_(A)?A.getFilters():[A]}(t.where));let h=[];t.orderBy&&(h=function(T){return T.map(A=>function(L){return new nc(co(L.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(L.direction))}(A))}(t.orderBy));let f=null;t.limit&&(f=function(T){let A;return A=typeof T=="object"?T.value:T,vc(A)?null:A}(t.limit));let p=null;t.startAt&&(p=function(T){const A=!!T.before,V=T.values||[];return new tc(V,A)}(t.startAt));let y=null;return t.endAt&&(y=function(T){const A=!T.before,V=T.values||[];return new tc(V,A)}(t.endAt)),l0(e,o,h,l,f,"F",p,y)}function q0(r,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function K_(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=co(t.unaryFilter.field);return ct.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=co(t.unaryFilter.field);return ct.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=co(t.unaryFilter.field);return ct.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=co(t.unaryFilter.field);return ct.create(h,"!=",{nullValue:"NULL_VALUE"});default:return Ee()}}(r):r.fieldFilter!==void 0?function(t){return ct.create(co(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ee()}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return Un.create(t.compositeFilter.filters.map(s=>K_(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ee()}}(t.compositeFilter.op))}(r):Ee()}function H0(r){return D0[r]}function W0(r){return V0[r]}function K0(r){return L0[r]}function uo(r){return{fieldPath:r.canonicalString()}}function co(r){return kt.fromServerFormat(r.fieldPath)}function G_(r){return r instanceof ct?function(t){if(t.op==="=="){if(Lg(t.value))return{unaryFilter:{field:uo(t.field),op:"IS_NAN"}};if(Vg(t.value))return{unaryFilter:{field:uo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Lg(t.value))return{unaryFilter:{field:uo(t.field),op:"IS_NOT_NAN"}};if(Vg(t.value))return{unaryFilter:{field:uo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:uo(t.field),op:W0(t.op),value:t.value}}}(r):r instanceof Un?function(t){const s=t.getFilters().map(o=>G_(o));return s.length===1?s[0]:{compositeFilter:{op:K0(t.op),filters:s}}}(r):Ee()}function G0(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Q_(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,t,s,o,l=Te.min(),h=Te.min(),f=Nt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=f,this.expectedCount=p}withSequenceNumber(e){return new di(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new di(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(e){this.ht=e}}function Y0(r){const e=$0({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Ud(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(){this.ln=new J0}addToCollectionParentIndex(e,t){return this.ln.add(t),W.resolve()}getCollectionParents(e,t){return W.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return W.resolve()}deleteFieldIndex(e,t){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,t){return W.resolve()}getDocumentsMatchingTarget(e,t){return W.resolve(null)}getIndexType(e,t){return W.resolve(0)}getFieldIndexes(e,t){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,t){return W.resolve(vi.min())}getMinOffsetFromCollectionGroup(e,t){return W.resolve(vi.min())}updateCollectionGroup(e,t,s){return W.resolve()}updateIndexEntries(e,t){return W.resolve()}}class J0{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new yt(Qe.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new yt(Qe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class en{static withCacheSize(e){return new en(e,en.DEFAULT_COLLECTION_PERCENTILE,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */en.DEFAULT_COLLECTION_PERCENTILE=10,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,en.DEFAULT=new en(41943040,en.DEFAULT_COLLECTION_PERCENTILE,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),en.DISABLED=new en(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new Io(0)}static Qn(){return new Io(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qg([r,e],[t,s]){const o=xe(r,t);return o===0?xe(e,s):o}class Z0{constructor(e){this.Gn=e,this.buffer=new yt(Qg),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Qg(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class eR{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){oe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){No(t)?oe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await ko(t)}await this.Yn(3e5)})}}class tR{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(t===0)return W.resolve(_c.oe);const s=new Z0(t);return this.Zn.forEachTarget(e,o=>s.Hn(o.sequenceNumber)).next(()=>this.Zn.er(e,o=>s.Hn(o))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.Zn.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(Gg)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Gg):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let s,o,l,h,f,p,y;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,h=Date.now(),this.nthSequenceNumber(e,o))).next(T=>(s=T,f=Date.now(),this.removeTargets(e,s,t))).next(T=>(l=T,p=Date.now(),this.removeOrphanedDocuments(e,s))).next(T=>(y=Date.now(),ao()<=Pe.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-E}ms
	Determined least recently used ${o} in `+(f-h)+`ms
	Removed ${l} targets in `+(p-f)+`ms
	Removed ${T} documents in `+(y-p)+`ms
Total Duration: ${y-E}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:T})))}}function nR(r,e){return new tR(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(){this.changes=new hs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ut.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?W.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(s!==null&&ja(s.mutation,o,bn.empty(),gt.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,ke()).next(()=>s))}getLocalViewOfDocuments(e,t,s=ke()){const o=rs();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,s).next(l=>{let h=La();return l.forEach((f,p)=>{h=h.insert(f,p.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const s=rs();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,ke()))}populateOverlays(e,t,s){const o=[];return s.forEach(l=>{t.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((h,f)=>{t.set(h,f)})})}computeViews(e,t,s,o){let l=Dr();const h=Ua(),f=function(){return Ua()}();return t.forEach((p,y)=>{const E=s.get(y.key);o.has(y.key)&&(E===void 0||E.mutation instanceof ds)?l=l.insert(y.key,y):E!==void 0?(h.set(y.key,E.mutation.getFieldMask()),ja(E.mutation,y,E.mutation.getFieldMask(),gt.now())):h.set(y.key,bn.empty())}),this.recalculateAndSaveOverlays(e,l).next(p=>(p.forEach((y,E)=>h.set(y,E)),t.forEach((y,E)=>{var T;return f.set(y,new iR(E,(T=h.get(y))!==null&&T!==void 0?T:null))}),f))}recalculateAndSaveOverlays(e,t){const s=Ua();let o=new tt((h,f)=>h-f),l=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const f of h)f.keys().forEach(p=>{const y=t.get(p);if(y===null)return;let E=s.get(p)||bn.empty();E=f.applyToLocalView(y,E),s.set(p,E);const T=(o.get(f.batchId)||ke()).add(p);o=o.insert(f.batchId,T)})}).next(()=>{const h=[],f=o.getReverseIterator();for(;f.hasNext();){const p=f.getNext(),y=p.key,E=p.value,T=D_();E.forEach(A=>{if(!l.has(A)){const V=F_(t.get(A),s.get(A));V!==null&&T.set(A,V),l=l.add(A)}}),h.push(this.documentOverlayCache.saveOverlays(e,y,T))}return W.waitFor(h)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,o){return function(h){return pe.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):C_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next(l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):W.resolve(rs());let f=-1,p=l;return h.next(y=>W.forEach(y,(E,T)=>(f<T.largestBatchId&&(f=T.largestBatchId),l.get(E)?W.resolve():this.remoteDocumentCache.getEntry(e,E).next(A=>{p=p.insert(E,A)}))).next(()=>this.populateOverlays(e,y,l)).next(()=>this.computeViews(e,p,y,ke())).next(E=>({batchId:f,changes:x_(E)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new pe(t)).next(s=>{let o=La();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let h=La();return this.indexManager.getCollectionParents(e,l).next(f=>W.forEach(f,p=>{const y=function(T,A){return new il(A,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next(E=>{E.forEach((T,A)=>{h=h.insert(T,A)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o))).next(h=>{l.forEach((p,y)=>{const E=y.getKey();h.get(E)===null&&(h=h.insert(E,Ut.newInvalidDocument(E)))});let f=La();return h.forEach((p,y)=>{const E=l.get(p);E!==void 0&&ja(E.mutation,y,bn.empty(),gt.now()),Tc(t,y)&&(f=f.insert(p,y))}),f})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return W.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:nr(o.createTime)}}(t)),W.resolve()}getNamedQuery(e,t){return W.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(o){return{name:o.name,query:Y0(o.bundledQuery),readTime:nr(o.readTime)}}(t)),W.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(){this.overlays=new tt(pe.comparator),this.dr=new Map}getOverlay(e,t){return W.resolve(this.overlays.get(t))}getOverlays(e,t){const s=rs();return W.forEach(t,o=>this.getOverlay(e,o).next(l=>{l!==null&&s.set(o,l)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((o,l)=>{this.Tt(e,t,l)}),W.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.dr.get(s);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.dr.delete(s)),W.resolve()}getOverlaysForCollection(e,t,s){const o=rs(),l=t.length+1,h=new pe(t.child("")),f=this.overlays.getIteratorFrom(h);for(;f.hasNext();){const p=f.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&p.largestBatchId>s&&o.set(p.getKey(),p)}return W.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new tt((y,E)=>y-E);const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>s){let E=l.get(y.largestBatchId);E===null&&(E=rs(),l=l.insert(y.largestBatchId,E)),E.set(y.getKey(),y)}}const f=rs(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,E)=>f.set(y,E)),!(f.size()>=o)););return W.resolve(f)}Tt(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.dr.get(o.largestBatchId).delete(s.key);this.dr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new A0(t,s));let l=this.dr.get(t);l===void 0&&(l=ke(),this.dr.set(t,l)),this.dr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(){this.sessionToken=Nt.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,W.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(){this.Er=new yt(It.Ar),this.Rr=new yt(It.Vr)}isEmpty(){return this.Er.isEmpty()}addReference(e,t){const s=new It(e,t);this.Er=this.Er.add(s),this.Rr=this.Rr.add(s)}mr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.gr(new It(e,t))}pr(e,t){e.forEach(s=>this.removeReference(s,t))}yr(e){const t=new pe(new Qe([])),s=new It(t,e),o=new It(t,e+1),l=[];return this.Rr.forEachInRange([s,o],h=>{this.gr(h),l.push(h.key)}),l}wr(){this.Er.forEach(e=>this.gr(e))}gr(e){this.Er=this.Er.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new pe(new Qe([])),s=new It(t,e),o=new It(t,e+1);let l=ke();return this.Rr.forEachInRange([s,o],h=>{l=l.add(h.key)}),l}containsKey(e){const t=new It(e,0),s=this.Er.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class It{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return pe.comparator(e.key,t.key)||xe(e.br,t.br)}static Vr(e,t){return xe(e.br,t.br)||pe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new yt(It.Ar)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new R0(l,t,s,o);this.mutationQueue.push(h);for(const f of o)this.vr=this.vr.add(new It(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return W.resolve(h)}lookupMutationBatch(e,t){return W.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.Fr(s),l=o<0?0:o;return W.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new It(t,0),o=new It(t,Number.POSITIVE_INFINITY),l=[];return this.vr.forEachInRange([s,o],h=>{const f=this.Cr(h.br);l.push(f)}),W.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new yt(xe);return t.forEach(o=>{const l=new It(o,0),h=new It(o,Number.POSITIVE_INFINITY);this.vr.forEachInRange([l,h],f=>{s=s.add(f.br)})}),W.resolve(this.Mr(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;pe.isDocumentKey(l)||(l=l.child(""));const h=new It(new pe(l),0);let f=new yt(xe);return this.vr.forEachWhile(p=>{const y=p.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(f=f.add(p.br)),!0)},h),W.resolve(this.Mr(f))}Mr(e){const t=[];return e.forEach(s=>{const o=this.Cr(s);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){Ue(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let s=this.vr;return W.forEach(t.mutations,o=>{const l=new It(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.vr=s})}Bn(e){}containsKey(e,t){const s=new It(t,0),o=this.vr.firstAfterOrEqual(s);return W.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e){this.Nr=e,this.docs=function(){return new tt(pe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,h=this.Nr(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return W.resolve(s?s.document.mutableCopy():Ut.newInvalidDocument(t))}getEntries(e,t){let s=Dr();return t.forEach(o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():Ut.newInvalidDocument(o))}),W.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=Dr();const h=t.path,f=new pe(h.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(f);for(;p.hasNext();){const{key:y,value:{document:E}}=p.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||zS(jS(E),s)<=0||(o.has(E.key)||Tc(t,E))&&(l=l.insert(E.key,E.mutableCopy()))}return W.resolve(l)}getAllFromCollectionGroup(e,t,s,o){Ee()}Br(e,t){return W.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new hR(this)}getSize(e){return W.resolve(this.size)}}class hR extends rR{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?t.push(this.hr.addEntry(e,o)):this.hr.removeEntry(s)}),W.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e){this.persistence=e,this.Lr=new hs(t=>hf(t),df),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.kr=0,this.qr=new vf,this.targetCount=0,this.Qr=Io.qn()}forEachTarget(e,t){return this.Lr.forEach((s,o)=>t(o)),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.kr&&(this.kr=t),W.resolve()}Un(e){this.Lr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new Io(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,W.resolve()}updateTargetData(e,t){return this.Un(t),W.resolve()}removeTargetData(e,t){return this.Lr.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.Lr.forEach((h,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.Lr.delete(h),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)}),W.waitFor(l).next(()=>o)}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,t){const s=this.Lr.get(t)||null;return W.resolve(s)}addMatchingKeys(e,t,s){return this.qr.mr(t,s),W.resolve()}removeMatchingKeys(e,t,s){this.qr.pr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(h=>{l.push(o.markPotentiallyOrphaned(e,h))}),W.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),W.resolve()}getMatchingKeysForTargetId(e,t){const s=this.qr.Sr(t);return W.resolve(s)}containsKey(e,t){return W.resolve(this.qr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e,t){this.Kr={},this.overlays={},this.$r=new _c(0),this.Ur=!1,this.Ur=!0,this.Wr=new lR,this.referenceDelegate=e(this),this.Gr=new dR(this),this.indexManager=new X0,this.remoteDocumentCache=function(o){return new cR(o)}(s=>this.referenceDelegate.zr(s)),this.serializer=new Q0(t),this.jr=new oR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new aR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.Kr[e.toKey()];return s||(s=new uR(t,this.referenceDelegate),this.Kr[e.toKey()]=s),s}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,s){oe("MemoryPersistence","Starting transaction:",e);const o=new fR(this.$r.next());return this.referenceDelegate.Hr(),s(o).next(l=>this.referenceDelegate.Jr(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Yr(e,t){return W.or(Object.values(this.Kr).map(s=>()=>s.containsKey(e,t)))}}class fR extends $S{constructor(e){super(),this.currentSequenceNumber=e}}class Ef{constructor(e){this.persistence=e,this.Zr=new vf,this.Xr=null}static ei(e){return new Ef(e)}get ti(){if(this.Xr)return this.Xr;throw Ee()}addReference(e,t,s){return this.Zr.addReference(s,t),this.ti.delete(s.toString()),W.resolve()}removeReference(e,t,s){return this.Zr.removeReference(s,t),this.ti.add(s.toString()),W.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),W.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(o=>this.ti.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.ti.add(l.toString()))}).next(()=>s.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.ti,s=>{const o=pe.fromPath(s);return this.ni(e,o).next(l=>{l||t.removeEntry(o,Te.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(s=>{s?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return W.or([()=>W.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class oc{constructor(e,t){this.persistence=e,this.ri=new hs(s=>WS(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=nR(this,t)}static ei(e,t){return new oc(e,t)}Hr(){}Jr(e){return W.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>t.next(o=>s+o))}nr(e){let t=0;return this.er(e,s=>{t++}).next(()=>t)}er(e,t){return W.forEach(this.ri,(s,o)=>this.ir(e,s,o).next(l=>l?W.resolve():t(o)))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.Br(e,h=>this.ir(e,h,t).next(f=>{f||(s++,l.removeEntry(h,Te.min()))})).next(()=>l.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),W.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.ri.set(s,e.currentSequenceNumber),W.resolve()}removeReference(e,t,s){return this.ri.set(s,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),W.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=zu(e.data.value)),t}ir(e,t,s){return W.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.ri.get(t);return W.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Wi=s,this.Gi=o}static zi(e,t){let s=ke(),o=ke();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new wf(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return hI()?8:qS(jt())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.Xi(e,t).next(h=>{l.result=h}).next(()=>{if(!l.result)return this.es(e,t,o,s).next(h=>{l.result=h})}).next(()=>{if(l.result)return;const h=new pR;return this.ts(e,t,h).next(f=>{if(l.result=f,this.Hi)return this.ns(e,t,h,f.size)})}).next(()=>l.result)}ns(e,t,s,o){return s.documentReadCount<this.Ji?(ao()<=Pe.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",lo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),W.resolve()):(ao()<=Pe.DEBUG&&oe("QueryEngine","Query:",lo(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.Yi*o?(ao()<=Pe.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",lo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,er(t))):W.resolve())}Xi(e,t){if(Fg(t))return W.resolve(null);let s=er(t);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=Ud(t,null,"F"),s=er(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(l=>{const h=ke(...l);return this.Zi.getDocuments(e,h).next(f=>this.indexManager.getMinOffset(e,s).next(p=>{const y=this.rs(t,f);return this.ss(t,y,h,p.readTime)?this.Xi(e,Ud(t,null,"F")):this.os(e,y,t,p)}))})))}es(e,t,s,o){return Fg(t)||o.isEqual(Te.min())?W.resolve(null):this.Zi.getDocuments(e,s).next(l=>{const h=this.rs(t,l);return this.ss(t,h,s,o)?W.resolve(null):(ao()<=Pe.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),lo(t)),this.os(e,h,t,US(o,-1)).next(f=>f))})}rs(e,t){let s=new yt(k_(e));return t.forEach((o,l)=>{Tc(e,l)&&(s=s.add(l))}),s}ss(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ts(e,t,s){return ao()<=Pe.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",lo(t)),this.Zi.getDocumentsMatchingQuery(e,t,vi.min(),s)}os(e,t,s,o){return this.Zi.getDocumentsMatchingQuery(e,s,o).next(l=>(t.forEach(h=>{l=l.insert(h.key,h)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e,t,s,o){this.persistence=e,this._s=t,this.serializer=o,this.us=new tt(xe),this.cs=new hs(l=>hf(l),df),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(s)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new sR(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function yR(r,e,t,s){return new gR(r,e,t,s)}async function X_(r,e){const t=Ie(r);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next(l=>(o=l,t.Ps(e),t.mutationQueue.getAllMutationBatches(s))).next(l=>{const h=[],f=[];let p=ke();for(const y of o){h.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}for(const y of l){f.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}return t.localDocuments.getDocuments(s,p).next(y=>({Ts:y,removedBatchIds:h,addedBatchIds:f}))})})}function _R(r,e){const t=Ie(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),l=t.hs.newChangeBuffer({trackRemovals:!0});return function(f,p,y,E){const T=y.batch,A=T.keys();let V=W.resolve();return A.forEach(L=>{V=V.next(()=>E.getEntry(p,L)).next(j=>{const O=y.docVersions.get(L);Ue(O!==null),j.version.compareTo(O)<0&&(T.applyToRemoteDocument(j,y),j.isValidDocument()&&(j.setReadTime(y.commitVersion),E.addEntry(j)))})}),V.next(()=>f.mutationQueue.removeMutationBatch(p,T))}(t,s,e,l).next(()=>l.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(f){let p=ke();for(let y=0;y<f.mutationResults.length;++y)f.mutationResults[y].transformResults.length>0&&(p=p.add(f.batch.mutations[y].key));return p}(e))).next(()=>t.localDocuments.getDocuments(s,o))})}function J_(r){const e=Ie(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function vR(r,e){const t=Ie(r),s=e.snapshotVersion;let o=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const h=t.hs.newChangeBuffer({trackRemovals:!0});o=t.us;const f=[];e.targetChanges.forEach((E,T)=>{const A=o.get(T);if(!A)return;f.push(t.Gr.removeMatchingKeys(l,E.removedDocuments,T).next(()=>t.Gr.addMatchingKeys(l,E.addedDocuments,T)));let V=A.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?V=V.withResumeToken(Nt.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):E.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(E.resumeToken,s)),o=o.insert(T,V),function(j,O,H){return j.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=3e8?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0}(A,V,E)&&f.push(t.Gr.updateTargetData(l,V))});let p=Dr(),y=ke();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,E))}),f.push(ER(l,h,e.documentUpdates).next(E=>{p=E.Is,y=E.ds})),!s.isEqual(Te.min())){const E=t.Gr.getLastRemoteSnapshotVersion(l).next(T=>t.Gr.setTargetsMetadata(l,l.currentSequenceNumber,s));f.push(E)}return W.waitFor(f).next(()=>h.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,p,y)).next(()=>p)}).then(l=>(t.us=o,l))}function ER(r,e,t){let s=ke(),o=ke();return t.forEach(l=>s=s.add(l)),e.getEntries(r,s).next(l=>{let h=Dr();return t.forEach((f,p)=>{const y=l.get(f);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(f)),p.isNoDocument()&&p.version.isEqual(Te.min())?(e.removeEntry(f,p.readTime),h=h.insert(f,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),h=h.insert(f,p)):oe("LocalStore","Ignoring outdated watch update for ",f,". Current version:",y.version," Watch version:",p.version)}),{Is:h,ds:o}})}function wR(r,e){const t=Ie(r);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function TR(r,e){const t=Ie(r);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return t.Gr.getTargetData(s,e).next(l=>l?(o=l,W.resolve(o)):t.Gr.allocateTargetId(s).next(h=>(o=new di(e,h,"TargetPurposeListen",s.currentSequenceNumber),t.Gr.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=t.us.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.us=t.us.insert(s.targetId,s),t.cs.set(e,s.targetId)),s})}async function qd(r,e,t){const s=Ie(r),o=s.us.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,h=>s.persistence.referenceDelegate.removeTarget(h,o))}catch(h){if(!No(h))throw h;oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}s.us=s.us.remove(e),s.cs.delete(o.target)}function Yg(r,e,t){const s=Ie(r);let o=Te.min(),l=ke();return s.persistence.runTransaction("Execute query","readwrite",h=>function(p,y,E){const T=Ie(p),A=T.cs.get(E);return A!==void 0?W.resolve(T.us.get(A)):T.Gr.getTargetData(y,E)}(s,h,er(e)).next(f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,s.Gr.getMatchingKeysForTargetId(h,f.targetId).next(p=>{l=p})}).next(()=>s._s.getDocumentsMatchingQuery(h,e,t?o:Te.min(),t?l:ke())).next(f=>(IR(s,c0(e),f),{documents:f,Es:l})))}function IR(r,e,t){let s=r.ls.get(e)||Te.min();t.forEach((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)}),r.ls.set(e,s)}class Xg{constructor(){this.activeTargetIds=g0()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class SR{constructor(){this._o=new Xg,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,s){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new Xg,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lu=null;function Ed(){return Lu===null?Lu=function(){return 268435456+Math.round(2147483648*Math.random())}():Lu++,"0x"+Lu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bt="WebChannelConnection";class PR extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const s=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Fo=s+"://"+t.host,this.Mo=`projects/${o}/databases/${l}`,this.xo=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${l}`}Oo(t,s,o,l,h){const f=Ed(),p=this.No(t,s.toUriEncodedString());oe("RestConnection",`Sending RPC '${t}' ${f}:`,p,o);const y={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Bo(y,l,h),this.Lo(t,p,y,o).then(E=>(oe("RestConnection",`Received RPC '${t}' ${f}: `,E),E),E=>{throw vo("RestConnection",`RPC '${t}' ${f} failed with error: `,E,"url: ",p,"request:",o),E})}ko(t,s,o,l,h,f){return this.Oo(t,s,o,l,h)}Bo(t,s,o){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Po}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((l,h)=>t[h]=l),o&&o.headers.forEach((l,h)=>t[h]=l)}No(t,s){const o=AR[t];return`${this.Fo}/v1/${s}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Lo(e,t,s,o){const l=Ed();return new Promise((h,f)=>{const p=new h_;p.setWithCredentials(!0),p.listenOnce(d_.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case ju.NO_ERROR:const E=p.getResponseJson();oe(bt,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(E)),h(E);break;case ju.TIMEOUT:oe(bt,`RPC '${e}' ${l} timed out`),f(new ce(Q.DEADLINE_EXCEEDED,"Request time out"));break;case ju.HTTP_ERROR:const T=p.getStatus();if(oe(bt,`RPC '${e}' ${l} failed with status:`,T,"response text:",p.getResponseText()),T>0){let A=p.getResponseJson();Array.isArray(A)&&(A=A[0]);const V=A==null?void 0:A.error;if(V&&V.status&&V.message){const L=function(O){const H=O.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(H)>=0?H:Q.UNKNOWN}(V.status);f(new ce(L,V.message))}else f(new ce(Q.UNKNOWN,"Server responded with status "+p.getStatus()))}else f(new ce(Q.UNAVAILABLE,"Connection failed."));break;default:Ee()}}finally{oe(bt,`RPC '${e}' ${l} completed.`)}});const y=JSON.stringify(o);oe(bt,`RPC '${e}' ${l} sending request:`,o),p.send(t,"POST",y,s,15)})}qo(e,t,s){const o=Ed(),l=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=m_(),f=p_(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Bo(p.initMessageHeaders,t,s),p.encodeInitMessageHeaders=!0;const E=l.join("");oe(bt,`Creating RPC '${e}' stream ${o}: ${E}`,p);const T=h.createWebChannel(E,p);let A=!1,V=!1;const L=new CR({Eo:O=>{V?oe(bt,`Not sending because RPC '${e}' stream ${o} is closed:`,O):(A||(oe(bt,`Opening RPC '${e}' stream ${o} transport.`),T.open(),A=!0),oe(bt,`RPC '${e}' stream ${o} sending:`,O),T.send(O))},Ao:()=>T.close()}),j=(O,H,G)=>{O.listen(H,ne=>{try{G(ne)}catch(he){setTimeout(()=>{throw he},0)}})};return j(T,Va.EventType.OPEN,()=>{V||(oe(bt,`RPC '${e}' stream ${o} transport opened.`),L.So())}),j(T,Va.EventType.CLOSE,()=>{V||(V=!0,oe(bt,`RPC '${e}' stream ${o} transport closed`),L.Do())}),j(T,Va.EventType.ERROR,O=>{V||(V=!0,vo(bt,`RPC '${e}' stream ${o} transport errored:`,O),L.Do(new ce(Q.UNAVAILABLE,"The operation could not be completed")))}),j(T,Va.EventType.MESSAGE,O=>{var H;if(!V){const G=O.data[0];Ue(!!G);const ne=G,he=(ne==null?void 0:ne.error)||((H=ne[0])===null||H===void 0?void 0:H.error);if(he){oe(bt,`RPC '${e}' stream ${o} received error:`,he);const Se=he.status;let we=function(R){const k=ut[R];if(k!==void 0)return j_(k)}(Se),N=he.message;we===void 0&&(we=Q.INTERNAL,N="Unknown error status: "+Se+" with message "+he.message),V=!0,L.Do(new ce(we,N)),T.close()}else oe(bt,`RPC '${e}' stream ${o} received:`,G),L.vo(G)}}),j(f,f_.STAT_EVENT,O=>{O.stat===Vd.PROXY?oe(bt,`RPC '${e}' stream ${o} detected buffering proxy`):O.stat===Vd.NOPROXY&&oe(bt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{L.bo()},0),L}}function wd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ac(r){return new O0(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(e,t,s=1e3,o=1.5,l=6e4){this.li=e,this.timerId=t,this.Qo=s,this.Ko=o,this.$o=l,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),s=Math.max(0,Date.now()-this.Go),o=Math.max(0,t-s);o>0&&oe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,o,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(e,t,s,o,l,h,f,p){this.li=e,this.Yo=s,this.Zo=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=f,this.listener=p,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new Z_(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===Q.RESOURCE_EXHAUSTED?(xr(t.toString()),xr("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.Xo===t&&this.I_(s,o)},s=>{e(()=>{const o=new ce(Q.UNKNOWN,"Fetching auth token failed: "+s.message);return this.d_(o)})})}I_(e,t){const s=this.T_(this.Xo);this.stream=this.E_(e,t),this.stream.Ro(()=>{s(()=>this.listener.Ro())}),this.stream.mo(()=>{s(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(o=>{s(()=>this.d_(o))}),this.stream.onMessage(o=>{s(()=>++this.n_==1?this.A_(o):this.onNext(o))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}d_(e){return oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class kR extends ev{constructor(e,t,s,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}E_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=F0(this.serializer,e),s=function(l){if(!("targetChange"in l))return Te.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Te.min():h.readTime?nr(h.readTime):Te.min()}(e);return this.listener.R_(t,s)}V_(e){const t={};t.database=$d(this.serializer),t.addTarget=function(l,h){let f;const p=h.target;if(f=bd(p)?{documents:z0(l,p)}:{query:B0(l,p).ct},f.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){f.resumeToken=$_(l,h.resumeToken);const y=jd(l,h.expectedCount);y!==null&&(f.expectedCount=y)}else if(h.snapshotVersion.compareTo(Te.min())>0){f.readTime=sc(l,h.snapshotVersion.toTimestamp());const y=jd(l,h.expectedCount);y!==null&&(f.expectedCount=y)}return f}(this.serializer,e);const s=q0(this.serializer,e);s&&(t.labels=s),this.c_(t)}m_(e){const t={};t.database=$d(this.serializer),t.removeTarget=e,this.c_(t)}}class NR extends ev{constructor(e,t,s,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}E_(e,t){return this.connection.qo("Write",e,t)}A_(e){return Ue(!!e.streamToken),this.lastStreamToken=e.streamToken,Ue(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){Ue(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const t=j0(e.writeResults,e.commitTime),s=nr(e.commitTime);return this.listener.y_(s,t)}w_(){const e={};e.database=$d(this.serializer),this.c_(e)}g_(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>U0(this.serializer,s))};this.c_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR extends class{}{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.S_=!1}b_(){if(this.S_)throw new ce(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,s,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Oo(e,zd(t,s),o,l,h)).catch(l=>{throw l.name==="FirebaseError"?(l.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ce(Q.UNKNOWN,l.toString())})}ko(e,t,s,o,l){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,f])=>this.connection.ko(e,zd(t,s),o,h,f,l)).catch(h=>{throw h.name==="FirebaseError"?(h.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ce(Q.UNKNOWN,h.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class DR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(xr(t),this.C_=!1):oe("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.B_=[],this.L_=new Map,this.k_=new Set,this.q_=[],this.Q_=l,this.Q_.uo(h=>{s.enqueueAndForget(async()=>{fs(this)&&(oe("RemoteStore","Restarting streams for network reachability change."),await async function(p){const y=Ie(p);y.k_.add(4),await al(y),y.K_.set("Unknown"),y.k_.delete(4),await Cc(y)}(this))})}),this.K_=new DR(s,o)}}async function Cc(r){if(fs(r))for(const e of r.q_)await e(!0)}async function al(r){for(const e of r.q_)await e(!1)}function tv(r,e){const t=Ie(r);t.L_.has(e.targetId)||(t.L_.set(e.targetId,e),Rf(t)?Sf(t):xo(t).s_()&&If(t,e))}function Tf(r,e){const t=Ie(r),s=xo(t);t.L_.delete(e),s.s_()&&nv(t,e),t.L_.size===0&&(s.s_()?s.a_():fs(t)&&t.K_.set("Unknown"))}function If(r,e){if(r.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}xo(r).V_(e)}function nv(r,e){r.U_.xe(e),xo(r).m_(e)}function Sf(r){r.U_=new x0({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>r.L_.get(e)||null,nt:()=>r.datastore.serializer.databaseId}),xo(r).start(),r.K_.F_()}function Rf(r){return fs(r)&&!xo(r).i_()&&r.L_.size>0}function fs(r){return Ie(r).k_.size===0}function rv(r){r.U_=void 0}async function LR(r){r.K_.set("Online")}async function OR(r){r.L_.forEach((e,t)=>{If(r,e)})}async function MR(r,e){rv(r),Rf(r)?(r.K_.O_(e),Sf(r)):r.K_.set("Unknown")}async function bR(r,e,t){if(r.K_.set("Online"),e instanceof B_&&e.state===2&&e.cause)try{await async function(o,l){const h=l.cause;for(const f of l.targetIds)o.L_.has(f)&&(await o.remoteSyncer.rejectListen(f,h),o.L_.delete(f),o.U_.removeTarget(f))}(r,e)}catch(s){oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await ac(r,s)}else if(e instanceof qu?r.U_.$e(e):e instanceof z_?r.U_.Je(e):r.U_.Ge(e),!t.isEqual(Te.min()))try{const s=await J_(r.localStore);t.compareTo(s)>=0&&await function(l,h){const f=l.U_.it(h);return f.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const E=l.L_.get(y);E&&l.L_.set(y,E.withResumeToken(p.resumeToken,h))}}),f.targetMismatches.forEach((p,y)=>{const E=l.L_.get(p);if(!E)return;l.L_.set(p,E.withResumeToken(Nt.EMPTY_BYTE_STRING,E.snapshotVersion)),nv(l,p);const T=new di(E.target,p,y,E.sequenceNumber);If(l,T)}),l.remoteSyncer.applyRemoteEvent(f)}(r,t)}catch(s){oe("RemoteStore","Failed to raise snapshot:",s),await ac(r,s)}}async function ac(r,e,t){if(!No(e))throw e;r.k_.add(1),await al(r),r.K_.set("Offline"),t||(t=()=>J_(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{oe("RemoteStore","Retrying IndexedDB access"),await t(),r.k_.delete(1),await Cc(r)})}function iv(r,e){return e().catch(t=>ac(r,t,e))}async function Pc(r){const e=Ie(r),t=Ii(e);let s=e.B_.length>0?e.B_[e.B_.length-1].batchId:-1;for(;FR(e);)try{const o=await wR(e.localStore,s);if(o===null){e.B_.length===0&&t.a_();break}s=o.batchId,UR(e,o)}catch(o){await ac(e,o)}sv(e)&&ov(e)}function FR(r){return fs(r)&&r.B_.length<10}function UR(r,e){r.B_.push(e);const t=Ii(r);t.s_()&&t.f_&&t.g_(e.mutations)}function sv(r){return fs(r)&&!Ii(r).i_()&&r.B_.length>0}function ov(r){Ii(r).start()}async function jR(r){Ii(r).w_()}async function zR(r){const e=Ii(r);for(const t of r.B_)e.g_(t.mutations)}async function BR(r,e,t){const s=r.B_.shift(),o=gf.from(s,e,t);await iv(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await Pc(r)}async function $R(r,e){e&&Ii(r).f_&&await async function(s,o){if(function(h){return P0(h)&&h!==Q.ABORTED}(o.code)){const l=s.B_.shift();Ii(s).__(),await iv(s,()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o)),await Pc(s)}}(r,e),sv(r)&&ov(r)}async function Zg(r,e){const t=Ie(r);t.asyncQueue.verifyOperationInProgress(),oe("RemoteStore","RemoteStore received new credentials");const s=fs(t);t.k_.add(3),await al(t),s&&t.K_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),await Cc(t)}async function qR(r,e){const t=Ie(r);e?(t.k_.delete(2),await Cc(t)):e||(t.k_.add(2),await al(t),t.K_.set("Unknown"))}function xo(r){return r.W_||(r.W_=function(t,s,o){const l=Ie(t);return l.b_(),new kR(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{Ro:LR.bind(null,r),mo:OR.bind(null,r),po:MR.bind(null,r),R_:bR.bind(null,r)}),r.q_.push(async e=>{e?(r.W_.__(),Rf(r)?Sf(r):r.K_.set("Unknown")):(await r.W_.stop(),rv(r))})),r.W_}function Ii(r){return r.G_||(r.G_=function(t,s,o){const l=Ie(t);return l.b_(),new NR(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{Ro:()=>Promise.resolve(),mo:jR.bind(null,r),po:$R.bind(null,r),p_:zR.bind(null,r),y_:BR.bind(null,r)}),r.q_.push(async e=>{e?(r.G_.__(),await Pc(r)):(await r.G_.stop(),r.B_.length>0&&(oe("RemoteStore",`Stopping write stream with ${r.B_.length} pending writes`),r.B_=[]))})),r.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new is,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const h=Date.now()+s,f=new Af(e,t,h,o,l);return f.start(s),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cf(r,e){if(xr("AsyncQueue",`${e}: ${r}`),No(r))return new ce(Q.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{static emptySet(e){return new fo(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||pe.comparator(t.key,s.key):(t,s)=>pe.comparator(t.key,s.key),this.keyedMap=La(),this.sortedSet=new tt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof fo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new fo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(){this.z_=new tt(pe.comparator)}track(e){const t=e.doc.key,s=this.z_.get(t);s?e.type!==0&&s.type===3?this.z_=this.z_.insert(t,e):e.type===3&&s.type!==1?this.z_=this.z_.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.z_=this.z_.remove(t):e.type===1&&s.type===2?this.z_=this.z_.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):Ee():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal((t,s)=>{e.push(s)}),e}}class So{constructor(e,t,s,o,l,h,f,p,y){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=f,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,s,o,l){const h=[];return t.forEach(f=>{h.push({type:0,doc:f})}),new So(e,t,fo.emptySet(t),h,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class WR{constructor(){this.queries=ty(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,s){const o=Ie(t),l=o.queries;o.queries=ty(),l.forEach((h,f)=>{for(const p of f.J_)p.onError(s)})})(this,new ce(Q.ABORTED,"Firestore shutting down"))}}function ty(){return new hs(r=>P_(r),wc)}async function KR(r,e){const t=Ie(r);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.Y_()&&e.Z_()&&(s=2):(l=new HR,s=e.Z_()?0:1);try{switch(s){case 0:l.H_=await t.onListen(o,!0);break;case 1:l.H_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const f=Cf(h,`Initialization of query '${lo(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.J_.push(e),e.ea(t.onlineState),l.H_&&e.ta(l.H_)&&Pf(t)}async function GR(r,e){const t=Ie(r),s=e.query;let o=3;const l=t.queries.get(s);if(l){const h=l.J_.indexOf(e);h>=0&&(l.J_.splice(h,1),l.J_.length===0?o=e.Z_()?0:1:!l.Y_()&&e.Z_()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function QR(r,e){const t=Ie(r);let s=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const f of h.J_)f.ta(o)&&(s=!0);h.H_=o}}s&&Pf(t)}function YR(r,e,t){const s=Ie(r),o=s.queries.get(e);if(o)for(const l of o.J_)l.onError(t);s.queries.delete(e)}function Pf(r){r.X_.forEach(e=>{e.next()})}var Hd,ny;(ny=Hd||(Hd={})).na="default",ny.Cache="cache";class XR{constructor(e,t,s){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=s||{}}ta(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new So(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;const s=t!=="Offline";return(!this.options.ua||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=So.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==Hd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e){this.key=e}}class lv{constructor(e){this.key=e}}class JR{constructor(e,t){this.query=e,this.Ea=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=ke(),this.mutatedKeys=ke(),this.Va=k_(e),this.ma=new fo(this.Va)}get fa(){return this.Ea}ga(e,t){const s=t?t.pa:new ey,o=t?t.ma:this.ma;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,f=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((E,T)=>{const A=o.get(E),V=Tc(this.query,T)?T:null,L=!!A&&this.mutatedKeys.has(A.key),j=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let O=!1;A&&V?A.data.isEqual(V.data)?L!==j&&(s.track({type:3,doc:V}),O=!0):this.ya(A,V)||(s.track({type:2,doc:V}),O=!0,(p&&this.Va(V,p)>0||y&&this.Va(V,y)<0)&&(f=!0)):!A&&V?(s.track({type:0,doc:V}),O=!0):A&&!V&&(s.track({type:1,doc:A}),O=!0,(p||y)&&(f=!0)),O&&(V?(h=h.add(V),l=j?l.add(E):l.delete(E)):(h=h.delete(E),l=l.delete(E)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),l=l.delete(E.key),s.track({type:1,doc:E})}return{ma:h,pa:s,ss:f,mutatedKeys:l}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const h=e.pa.j_();h.sort((E,T)=>function(V,L){const j=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee()}};return j(V)-j(L)}(E.type,T.type)||this.Va(E.doc,T.doc)),this.wa(s),o=o!=null&&o;const f=t&&!o?this.Sa():[],p=this.Ra.size===0&&this.current&&!o?1:0,y=p!==this.Aa;return this.Aa=p,h.length!==0||y?{snapshot:new So(this.query,e.ma,l,h,e.mutatedKeys,p===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),ba:f}:{ba:f}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new ey,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.Ea.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.Ea=this.Ea.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ea=this.Ea.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=ke(),this.ma.forEach(s=>{this.Da(s.key)&&(this.Ra=this.Ra.add(s.key))});const t=[];return e.forEach(s=>{this.Ra.has(s)||t.push(new lv(s))}),this.Ra.forEach(s=>{e.has(s)||t.push(new av(s))}),t}va(e){this.Ea=e.Es,this.Ra=ke();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return So.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class ZR{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class eA{constructor(e){this.key=e,this.Fa=!1}}class tA{constructor(e,t,s,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Ma={},this.xa=new hs(f=>P_(f),wc),this.Oa=new Map,this.Na=new Set,this.Ba=new tt(pe.comparator),this.La=new Map,this.ka=new vf,this.qa={},this.Qa=new Map,this.Ka=Io.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function nA(r,e,t=!0){const s=pv(r);let o;const l=s.xa.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.Ca()):o=await uv(s,e,t,!0),o}async function rA(r,e){const t=pv(r);await uv(t,e,!0,!1)}async function uv(r,e,t,s){const o=await TR(r.localStore,er(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let f;return s&&(f=await iA(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&tv(r.remoteStore,o),f}async function iA(r,e,t,s,o){r.Ua=(T,A,V)=>async function(j,O,H,G){let ne=O.view.ga(H);ne.ss&&(ne=await Yg(j.localStore,O.query,!1).then(({documents:N})=>O.view.ga(N,ne)));const he=G&&G.targetChanges.get(O.targetId),Se=G&&G.targetMismatches.get(O.targetId)!=null,we=O.view.applyChanges(ne,j.isPrimaryClient,he,Se);return iy(j,O.targetId,we.ba),we.snapshot}(r,T,A,V);const l=await Yg(r.localStore,e,!0),h=new JR(e,l.Es),f=h.ga(l.documents),p=ol.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",o),y=h.applyChanges(f,r.isPrimaryClient,p);iy(r,t,y.ba);const E=new ZR(e,t,h);return r.xa.set(e,E),r.Oa.has(t)?r.Oa.get(t).push(e):r.Oa.set(t,[e]),y.snapshot}async function sA(r,e,t){const s=Ie(r),o=s.xa.get(e),l=s.Oa.get(o.targetId);if(l.length>1)return s.Oa.set(o.targetId,l.filter(h=>!wc(h,e))),void s.xa.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await qd(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),t&&Tf(s.remoteStore,o.targetId),Wd(s,o.targetId)}).catch(ko)):(Wd(s,o.targetId),await qd(s.localStore,o.targetId,!0))}async function oA(r,e){const t=Ie(r),s=t.xa.get(e),o=t.Oa.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Tf(t.remoteStore,s.targetId))}async function aA(r,e,t){const s=pA(r);try{const o=await function(h,f){const p=Ie(h),y=gt.now(),E=f.reduce((V,L)=>V.add(L.key),ke());let T,A;return p.persistence.runTransaction("Locally write mutations","readwrite",V=>{let L=Dr(),j=ke();return p.hs.getEntries(V,E).next(O=>{L=O,L.forEach((H,G)=>{G.isValidDocument()||(j=j.add(H))})}).next(()=>p.localDocuments.getOverlayedDocuments(V,L)).next(O=>{T=O;const H=[];for(const G of f){const ne=I0(G,T.get(G.key).overlayedDocument);ne!=null&&H.push(new ds(G.key,ne,E_(ne.value.mapValue),tr.exists(!0)))}return p.mutationQueue.addMutationBatch(V,y,H,f)}).next(O=>{A=O;const H=O.applyToLocalDocumentSet(T,j);return p.documentOverlayCache.saveOverlays(V,O.batchId,H)})}).then(()=>({batchId:A.batchId,changes:x_(T)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(h,f,p){let y=h.qa[h.currentUser.toKey()];y||(y=new tt(xe)),y=y.insert(f,p),h.qa[h.currentUser.toKey()]=y}(s,o.batchId,t),await ll(s,o.changes),await Pc(s.remoteStore)}catch(o){const l=Cf(o,"Failed to persist write");t.reject(l)}}async function cv(r,e){const t=Ie(r);try{const s=await vR(t.localStore,e);e.targetChanges.forEach((o,l)=>{const h=t.La.get(l);h&&(Ue(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.Fa=!0:o.modifiedDocuments.size>0?Ue(h.Fa):o.removedDocuments.size>0&&(Ue(h.Fa),h.Fa=!1))}),await ll(t,s,e)}catch(s){await ko(s)}}function ry(r,e,t){const s=Ie(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.xa.forEach((l,h)=>{const f=h.view.ea(e);f.snapshot&&o.push(f.snapshot)}),function(h,f){const p=Ie(h);p.onlineState=f;let y=!1;p.queries.forEach((E,T)=>{for(const A of T.J_)A.ea(f)&&(y=!0)}),y&&Pf(p)}(s.eventManager,e),o.length&&s.Ma.R_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function lA(r,e,t){const s=Ie(r);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.La.get(e),l=o&&o.key;if(l){let h=new tt(pe.comparator);h=h.insert(l,Ut.newNoDocument(l,Te.min()));const f=ke().add(l),p=new Rc(Te.min(),new Map,new tt(xe),h,f);await cv(s,p),s.Ba=s.Ba.remove(l),s.La.delete(e),kf(s)}else await qd(s.localStore,e,!1).then(()=>Wd(s,e,t)).catch(ko)}async function uA(r,e){const t=Ie(r),s=e.batch.batchId;try{const o=await _R(t.localStore,e);dv(t,s,null),hv(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await ll(t,o)}catch(o){await ko(o)}}async function cA(r,e,t){const s=Ie(r);try{const o=await function(h,f){const p=Ie(h);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let E;return p.mutationQueue.lookupMutationBatch(y,f).next(T=>(Ue(T!==null),E=T.keys(),p.mutationQueue.removeMutationBatch(y,T))).next(()=>p.mutationQueue.performConsistencyCheck(y)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(y,E,f)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,E)).next(()=>p.localDocuments.getDocuments(y,E))})}(s.localStore,e);dv(s,e,t),hv(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await ll(s,o)}catch(o){await ko(o)}}function hv(r,e){(r.Qa.get(e)||[]).forEach(t=>{t.resolve()}),r.Qa.delete(e)}function dv(r,e,t){const s=Ie(r);let o=s.qa[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.qa[s.currentUser.toKey()]=o}}function Wd(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Oa.get(e))r.xa.delete(s),t&&r.Ma.Wa(s,t);r.Oa.delete(e),r.isPrimaryClient&&r.ka.yr(e).forEach(s=>{r.ka.containsKey(s)||fv(r,s)})}function fv(r,e){r.Na.delete(e.path.canonicalString());const t=r.Ba.get(e);t!==null&&(Tf(r.remoteStore,t),r.Ba=r.Ba.remove(e),r.La.delete(t),kf(r))}function iy(r,e,t){for(const s of t)s instanceof av?(r.ka.addReference(s.key,e),hA(r,s)):s instanceof lv?(oe("SyncEngine","Document no longer in limbo: "+s.key),r.ka.removeReference(s.key,e),r.ka.containsKey(s.key)||fv(r,s.key)):Ee()}function hA(r,e){const t=e.key,s=t.path.canonicalString();r.Ba.get(t)||r.Na.has(s)||(oe("SyncEngine","New document in limbo: "+t),r.Na.add(s),kf(r))}function kf(r){for(;r.Na.size>0&&r.Ba.size<r.maxConcurrentLimboResolutions;){const e=r.Na.values().next().value;r.Na.delete(e);const t=new pe(Qe.fromString(e)),s=r.Ka.next();r.La.set(s,new eA(t)),r.Ba=r.Ba.insert(t,s),tv(r.remoteStore,new di(er(ff(t.path)),s,"TargetPurposeLimboResolution",_c.oe))}}async function ll(r,e,t){const s=Ie(r),o=[],l=[],h=[];s.xa.isEmpty()||(s.xa.forEach((f,p)=>{h.push(s.Ua(p,e,t).then(y=>{var E;if((y||t)&&s.isPrimaryClient){const T=y?!y.fromCache:(E=t==null?void 0:t.targetChanges.get(p.targetId))===null||E===void 0?void 0:E.current;s.sharedClientState.updateQueryState(p.targetId,T?"current":"not-current")}if(y){o.push(y);const T=wf.zi(p.targetId,y);l.push(T)}}))}),await Promise.all(h),s.Ma.R_(o),await async function(p,y){const E=Ie(p);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>W.forEach(y,A=>W.forEach(A.Wi,V=>E.persistence.referenceDelegate.addReference(T,A.targetId,V)).next(()=>W.forEach(A.Gi,V=>E.persistence.referenceDelegate.removeReference(T,A.targetId,V)))))}catch(T){if(!No(T))throw T;oe("LocalStore","Failed to update sequence numbers: "+T)}for(const T of y){const A=T.targetId;if(!T.fromCache){const V=E.us.get(A),L=V.snapshotVersion,j=V.withLastLimboFreeSnapshotVersion(L);E.us=E.us.insert(A,j)}}}(s.localStore,l))}async function dA(r,e){const t=Ie(r);if(!t.currentUser.isEqual(e)){oe("SyncEngine","User change. New user:",e.toKey());const s=await X_(t.localStore,e);t.currentUser=e,function(l,h){l.Qa.forEach(f=>{f.forEach(p=>{p.reject(new ce(Q.CANCELLED,h))})}),l.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await ll(t,s.Ts)}}function fA(r,e){const t=Ie(r),s=t.La.get(e);if(s&&s.Fa)return ke().add(s.key);{let o=ke();const l=t.Oa.get(e);if(!l)return o;for(const h of l){const f=t.xa.get(h);o=o.unionWith(f.view.fa)}return o}}function pv(r){const e=Ie(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=cv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lA.bind(null,e),e.Ma.R_=QR.bind(null,e.eventManager),e.Ma.Wa=YR.bind(null,e.eventManager),e}function pA(r){const e=Ie(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cA.bind(null,e),e}class lc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ac(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return yR(this.persistence,new mR,e.initialUser,this.serializer)}ja(e){return new Y_(Ef.ei,this.serializer)}za(e){return new SR}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}lc.provider={build:()=>new lc};class mA extends lc{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){Ue(this.persistence.referenceDelegate instanceof oc);const s=this.persistence.referenceDelegate.garbageCollector;return new eR(s,e.asyncQueue,t)}ja(e){const t=this.cacheSizeBytes!==void 0?en.withCacheSize(this.cacheSizeBytes):en.DEFAULT;return new Y_(s=>oc.ei(s,t),this.serializer)}}class Kd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>ry(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=dA.bind(null,this.syncEngine),await qR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new WR}()}createDatastore(e){const t=Ac(e.databaseInfo.databaseId),s=function(l){return new PR(l)}(e.databaseInfo);return function(l,h,f,p){return new xR(l,h,f,p)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,o,l,h,f){return new VR(s,o,l,h,f)}(this.localStore,this.datastore,e.asyncQueue,t=>ry(this.syncEngine,t,0),function(){return Jg.p()?new Jg:new RR}())}createSyncEngine(e,t){return function(o,l,h,f,p,y,E){const T=new tA(o,l,h,f,p,y);return E&&(T.$a=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const l=Ie(o);oe("RemoteStore","RemoteStore shutting down."),l.k_.add(5),await al(l),l.Q_.shutdown(),l.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Kd.provider={build:()=>new Kd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):xr("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=Ft.UNAUTHENTICATED,this.clientId=y_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,async h=>{oe("FirestoreClient","Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(s,h=>(oe("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new is;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Cf(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Td(r,e){r.asyncQueue.verifyOperationInProgress(),oe("FirestoreClient","Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener(async o=>{s.isEqual(o)||(await X_(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function sy(r,e){r.asyncQueue.verifyOperationInProgress();const t=await _A(r);oe("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(s=>Zg(e.remoteStore,s)),r.setAppCheckTokenChangeListener((s,o)=>Zg(e.remoteStore,o)),r._onlineComponents=e}async function _A(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){oe("FirestoreClient","Using user provided OfflineComponentProvider");try{await Td(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===Q.FAILED_PRECONDITION||o.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;vo("Error using user provided cache. Falling back to memory cache: "+t),await Td(r,new lc)}}else oe("FirestoreClient","Using default OfflineComponentProvider"),await Td(r,new mA(void 0));return r._offlineComponents}async function mv(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(oe("FirestoreClient","Using user provided OnlineComponentProvider"),await sy(r,r._uninitializedComponentsProvider._online)):(oe("FirestoreClient","Using default OnlineComponentProvider"),await sy(r,new Kd))),r._onlineComponents}function vA(r){return mv(r).then(e=>e.syncEngine)}async function oy(r){const e=await mv(r),t=e.eventManager;return t.onListen=nA.bind(null,e.syncEngine),t.onUnlisten=sA.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=rA.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=oA.bind(null,e.syncEngine),t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ay=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yv(r,e,t){if(!t)throw new ce(Q.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function EA(r,e,t,s){if(e===!0&&s===!0)throw new ce(Q.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function ly(r){if(!pe.isDocumentKey(r))throw new ce(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function uy(r){if(pe.isDocumentKey(r))throw new ce(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function kc(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ee()}function po(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ce(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=kc(r);throw new ce(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new ce(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ce(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}EA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gv((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ce(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ce(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ce(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Nc{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cy({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cy(e),e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new NS;switch(s.type){case"firstParty":return new LS(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ce(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=ay.get(t);s&&(oe("ComponentProvider","Removing Datastore"),ay.delete(t),s.terminate())}(this),Promise.resolve()}}function wA(r,e,t,s={}){var o;const l=(r=po(r,Nc))._getSettings(),h=`${e}:${t}`;if(l.host!=="firestore.googleapis.com"&&l.host!==h&&vo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),r._setSettings(Object.assign(Object.assign({},l),{host:h,ssl:!1})),s.mockUserToken){let f,p;if(typeof s.mockUserToken=="string")f=s.mockUserToken,p=Ft.MOCK_USER;else{f=iI(s.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const y=s.mockUserToken.sub||s.mockUserToken.user_id;if(!y)throw new ce(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Ft(y)}r._authCredentials=new xS(new g_(f,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Do(this.firestore,e,this._query)}}class un{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new un(this.firestore,e,this._key)}}class yi extends Do{constructor(e,t,s){super(e,t,ff(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new un(this.firestore,null,new pe(e))}withConverter(e){return new yi(this.firestore,e,this._path)}}function hy(r,e,...t){if(r=zt(r),yv("collection","path",e),r instanceof Nc){const s=Qe.fromString(e,...t);return uy(s),new yi(r,null,s)}{if(!(r instanceof un||r instanceof yi))throw new ce(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Qe.fromString(e,...t));return uy(s),new yi(r.firestore,null,s)}}function _v(r,e,...t){if(r=zt(r),arguments.length===1&&(e=y_.newId()),yv("doc","path",e),r instanceof Nc){const s=Qe.fromString(e,...t);return ly(s),new un(r,null,new pe(s))}{if(!(r instanceof un||r instanceof yi))throw new ce(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Qe.fromString(e,...t));return ly(s),new un(r.firestore,r instanceof yi?r.converter:null,new pe(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e=Promise.resolve()){this.Iu=[],this.du=!1,this.Eu=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new Z_(this,"async_queue_retry"),this.fu=()=>{const s=wd();s&&oe("AsyncQueue","Visibility state changed to "+s.visibilityState),this.r_.Jo()},this.gu=e;const t=wd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.du}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.du){this.du=!0,this.Vu=e||!1;const t=wd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.du)return new Promise(()=>{});const t=new is;return this.yu(()=>this.du&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!No(e))throw e;oe("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(s=>{this.Au=s,this.Ru=!1;const o=function(h){let f=h.message||"";return h.stack&&(f=h.stack.includes(h.message)?h.stack:h.message+`
`+h.stack),f}(s);throw xr("INTERNAL UNHANDLED ERROR: ",o),s}).then(s=>(this.Ru=!1,s))));return this.gu=t,t}enqueueAfterDelay(e,t,s){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const o=Af.createAndSchedule(this,e,t,s,l=>this.Su(l));return this.Eu.push(o),o}pu(){this.Au&&Ee()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const t of this.Eu)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.Eu.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.Eu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.Eu.indexOf(e);this.Eu.splice(t,1)}}function fy(r){return function(t,s){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of s)if(l in o&&typeof o[l]=="function")return!0;return!1}(r,["next","error","complete"])}class Qa extends Nc{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new dy,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new dy(e),this._firestoreClient=void 0,await e}}}function TA(r,e){const t=typeof r=="object"?r:a_(),s=typeof r=="string"?r:"(default)",o=af(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=nI("firestore");l&&wA(o,...l)}return o}function vv(r){if(r._terminated)throw new ce(Q.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||IA(r),r._firestoreClient}function IA(r){var e,t,s;const o=r._freezeSettings(),l=function(f,p,y,E){return new QS(f,p,y,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,gv(E.experimentalLongPollingOptions),E.useFetchStreams)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new yA(r._authCredentials,r._appCheckCredentials,r._queue,l,r._componentsProvider&&function(f){const p=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(p),_online:p}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ro(Nt.fromBase64String(e))}catch(t){throw new ce(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ro(Nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ce(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ce(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ce(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return xe(this._lat,e._lat)||xe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA=/^__.*__$/;class RA{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new ds(e,this.data,this.fieldMask,t,this.fieldTransforms):new sl(e,this.data,t,this.fieldTransforms)}}function wv(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee()}}class Vf{constructor(e,t,s,o,l,h){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Fu(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new Vf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.xu({path:s,Nu:!1});return o.Bu(e),o}Lu(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.xu({path:s,Nu:!1});return o.Fu(),o}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return uc(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Bu(this.path.get(e))}Bu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(wv(this.Mu)&&SA.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class AA{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Ac(e)}$u(e,t,s,o=!1){return new Vf({Mu:e,methodName:t,Ku:s,path:kt.emptyPath(),Nu:!1,Qu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Tv(r){const e=r._freezeSettings(),t=Ac(r._databaseId);return new AA(r._databaseId,!!e.ignoreUndefinedProperties,t)}function CA(r,e,t,s,o,l={}){const h=r.$u(l.merge||l.mergeFields?2:0,e,t,o);Rv("Data must be an object, but it was:",h,s);const f=Iv(s,h);let p,y;if(l.merge)p=new bn(h.fieldMask),y=h.fieldTransforms;else if(l.mergeFields){const E=[];for(const T of l.mergeFields){const A=kA(e,T,t);if(!h.contains(A))throw new ce(Q.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);xA(E,A)||E.push(A)}p=new bn(E),y=h.fieldTransforms.filter(T=>p.covers(T.field))}else p=null,y=h.fieldTransforms;return new RA(new wn(f),p,y)}function PA(r,e,t,s=!1){return Lf(t,r.$u(s?4:3,e))}function Lf(r,e){if(Sv(r=zt(r)))return Rv("Unsupported field value:",e,r),Iv(r,e);if(r instanceof Ev)return function(s,o){if(!wv(o.Mu))throw o.qu(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.qu(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(s,o){const l=[];let h=0;for(const f of s){let p=Lf(f,o.ku(h));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),h++}return{arrayValue:{values:l}}}(r,e)}return function(s,o){if((s=zt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return y0(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=gt.fromDate(s);return{timestampValue:sc(o.serializer,l)}}if(s instanceof gt){const l=new gt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:sc(o.serializer,l)}}if(s instanceof xf)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ro)return{bytesValue:$_(o.serializer,s._byteString)};if(s instanceof un){const l=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(l))throw o.qu(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:_f(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Df)return function(h,f){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:h.toArray().map(p=>{if(typeof p!="number")throw f.qu("VectorValues must only contain numeric values.");return pf(f.serializer,p)})}}}}}}(s,o);throw o.qu(`Unsupported field value: ${kc(s)}`)}(r,e)}function Iv(r,e){const t={};return __(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):cs(r,(s,o)=>{const l=Lf(o,e.Ou(s));l!=null&&(t[s]=l)}),{mapValue:{fields:t}}}function Sv(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof gt||r instanceof xf||r instanceof Ro||r instanceof un||r instanceof Ev||r instanceof Df)}function Rv(r,e,t){if(!Sv(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const s=kc(t);throw s==="an object"?e.qu(r+" a custom object"):e.qu(r+" "+s)}}function kA(r,e,t){if((e=zt(e))instanceof Nf)return e._internalPath;if(typeof e=="string")return Av(r,e);throw uc("Field path arguments must be of type string or ",r,!1,void 0,t)}const NA=new RegExp("[~\\*/\\[\\]]");function Av(r,e,t){if(e.search(NA)>=0)throw uc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Nf(...e.split("."))._internalPath}catch{throw uc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function uc(r,e,t,s,o){const l=s&&!s.isEmpty(),h=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let p="";return(l||h)&&(p+=" (found",l&&(p+=` in field ${s}`),h&&(p+=` in document ${o}`),p+=")"),new ce(Q.INVALID_ARGUMENT,f+r+p)}function xA(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new un(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new DA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Of("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class DA extends Cv{data(){return super.data()}}function Of(r,e){return typeof e=="string"?Av(r,e):e instanceof Nf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ce(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Mf{}class LA extends Mf{}function OA(r,e,...t){let s=[];e instanceof Mf&&s.push(e),s=s.concat(t),function(l){const h=l.filter(p=>p instanceof bf).length,f=l.filter(p=>p instanceof xc).length;if(h>1||h>0&&f>0)throw new ce(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)r=o._apply(r);return r}class xc extends LA{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new xc(e,t,s)}_apply(e){const t=this._parse(e);return Pv(e._query,t),new Do(e.firestore,e.converter,Fd(e._query,t))}_parse(e){const t=Tv(e.firestore);return function(l,h,f,p,y,E,T){let A;if(y.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new ce(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){my(T,E);const V=[];for(const L of T)V.push(py(p,l,L));A={arrayValue:{values:V}}}else A=py(p,l,T)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||my(T,E),A=PA(f,h,T,E==="in"||E==="not-in");return ct.create(y,E,A)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function MA(r,e,t){const s=e,o=Of("where",r);return xc._create(o,s,t)}class bf extends Mf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new bf(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return t.length===1?t[0]:Un.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,l){let h=o;const f=l.getFlattenedFilters();for(const p of f)Pv(h,p),h=Fd(h,p)}(e._query,t),new Do(e.firestore,e.converter,Fd(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function py(r,e,t){if(typeof(t=zt(t))=="string"){if(t==="")throw new ce(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!C_(e)&&t.indexOf("/")!==-1)throw new ce(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Qe.fromString(t));if(!pe.isDocumentKey(s))throw new ce(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Dg(r,new pe(s))}if(t instanceof un)return Dg(r,t._key);throw new ce(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kc(t)}.`)}function my(r,e){if(!Array.isArray(r)||r.length===0)throw new ce(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Pv(r,e){const t=function(o,l){for(const h of o)for(const f of h.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null}(r.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ce(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class bA{convertValue(e,t="none"){switch(Ti(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(wi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return cs(e,(o,l)=>{s[o]=this.convertValue(l,t)}),s}convertVectorValue(e){var t,s,o;const l=(o=(s=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(h=>ot(h.doubleValue));return new Df(l)}convertGeoPoint(e){return new xf(ot(e.latitude),ot(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Ec(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(qa(e));default:return null}}convertTimestamp(e){const t=Ei(e);return new gt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Qe.fromString(e);Ue(Q_(s));const o=new Ha(s.get(1),s.get(3)),l=new pe(s.popFirst(5));return o.isEqual(t)||xr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(r,e,t){let s;return s=r?r.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class kv extends Cv{constructor(e,t,s,o,l,h){super(e,t,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Hu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Of("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class Hu extends kv{data(e={}){return super.data(e)}}class UA{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ma(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new Hu(this._firestore,this._userDataWriter,s.key,s,new Ma(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ce(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(f=>{const p=new Hu(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Ma(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:p,oldIndex:-1,newIndex:h++}})}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(f=>l||f.type!==3).map(f=>{const p=new Hu(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Ma(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,E=-1;return f.type!==0&&(y=h.indexOf(f.doc.key),h=h.delete(f.doc.key)),f.type!==1&&(h=h.add(f.doc),E=h.indexOf(f.doc.key)),{type:jA(f.type),doc:p,oldIndex:y,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function jA(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee()}}class Nv extends bA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ro(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new un(this.firestore,null,t)}}function zA(r){return xv(po(r.firestore,Qa),[new mf(r._key,tr.none())])}function BA(r,e){const t=po(r.firestore,Qa),s=_v(r),o=FA(r.converter,e);return xv(t,[CA(Tv(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,tr.exists(!1))]).then(()=>s)}function $A(r,...e){var t,s,o;r=zt(r);let l={includeMetadataChanges:!1,source:"default"},h=0;typeof e[h]!="object"||fy(e[h])||(l=e[h],h++);const f={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(fy(e[h])){const T=e[h];e[h]=(t=T.next)===null||t===void 0?void 0:t.bind(T),e[h+1]=(s=T.error)===null||s===void 0?void 0:s.bind(T),e[h+2]=(o=T.complete)===null||o===void 0?void 0:o.bind(T)}let p,y,E;if(r instanceof un)y=po(r.firestore,Qa),E=ff(r._key.path),p={next:T=>{e[h]&&e[h](qA(y,r,T))},error:e[h+1],complete:e[h+2]};else{const T=po(r,Do);y=po(T.firestore,Qa),E=T._query;const A=new Nv(y);p={next:V=>{e[h]&&e[h](new UA(y,A,T,V))},error:e[h+1],complete:e[h+2]},VA(r._query)}return function(A,V,L,j){const O=new gA(j),H=new XR(V,O,L);return A.asyncQueue.enqueueAndForget(async()=>KR(await oy(A),H)),()=>{O.eu(),A.asyncQueue.enqueueAndForget(async()=>GR(await oy(A),H))}}(vv(y),E,f,p)}function xv(r,e){return function(s,o){const l=new is;return s.asyncQueue.enqueueAndForget(async()=>aA(await vA(s),o,l)),l.promise}(vv(r),e)}function qA(r,e,t){const s=t.docs.get(e._key),o=new Nv(r);return new kv(r,o,e._key,s,new Ma(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){Po=o})(Co),_o(new ss("firestore",(s,{instanceIdentifier:o,options:l})=>{const h=s.getProvider("app").getImmediate(),f=new Qa(new DS(s.getProvider("auth-internal")),new MS(s.getProvider("app-check-internal")),function(y,E){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ce(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ha(y.options.projectId,E)}(h,o),h);return l=Object.assign({useFetchStreams:t},l),f._setSettings(l),f},"PUBLIC").setMultipleInstances(!0)),mi(Ag,"4.7.6",e),mi(Ag,"4.7.6","esm2017")})();function Ff(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(t[s[o]]=r[s[o]]);return t}function Dv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const HA=Dv,Vv=new nl("auth","Firebase",Dv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cc=new sf("@firebase/auth");function WA(r,...e){cc.logLevel<=Pe.WARN&&cc.warn(`Auth (${Co}): ${r}`,...e)}function Wu(r,...e){cc.logLevel<=Pe.ERROR&&cc.error(`Auth (${Co}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(r,...e){throw Uf(r,...e)}function rr(r,...e){return Uf(r,...e)}function Lv(r,e,t){const s=Object.assign(Object.assign({},HA()),{[e]:t});return new nl("auth","Firebase",s).create(e,{appName:r.name})}function kr(r){return Lv(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Uf(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return Vv.create(r,...e)}function _e(r,e,...t){if(!r)throw Uf(e,...t)}function Rr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Wu(e),new Error(e)}function Vr(r,e){r||Rr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gd(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function KA(){return gy()==="http:"||gy()==="https:"}function gy(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(KA()||lI()||"connection"in navigator)?navigator.onLine:!0}function QA(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e,t){this.shortDelay=e,this.longDelay=t,Vr(t>e,"Short delay should be less than long delay!"),this.isMobile=sI()||uI()}get(){return GA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jf(r,e){Vr(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Rr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Rr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Rr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA=new ul(3e4,6e4);function Ri(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Ai(r,e,t,s,o={}){return Mv(r,o,async()=>{let l={},h={};s&&(e==="GET"?h=s:l={body:JSON.stringify(s)});const f=rl(Object.assign({key:r.config.apiKey},h)).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const y=Object.assign({method:e,headers:p},l);return aI()||(y.referrerPolicy="no-referrer"),Ov.fetch()(bv(r,r.config.apiHost,t,f),y)})}async function Mv(r,e,t){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},YA),e);try{const o=new ZA(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw Ou(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const f=l.ok?h.errorMessage:h.error.message,[p,y]=f.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ou(r,"credential-already-in-use",h);if(p==="EMAIL_EXISTS")throw Ou(r,"email-already-in-use",h);if(p==="USER_DISABLED")throw Ou(r,"user-disabled",h);const E=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Lv(r,E,y);jn(r,E)}}catch(o){if(o instanceof Or)throw o;jn(r,"network-request-failed",{message:String(o)})}}async function cl(r,e,t,s,o={}){const l=await Ai(r,e,t,s,o);return"mfaPendingCredential"in l&&jn(r,"multi-factor-auth-required",{_serverResponse:l}),l}function bv(r,e,t,s){const o=`${e}${t}?${s}`;return r.config.emulator?jf(r.config,o):`${r.config.apiScheme}://${o}`}function JA(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ZA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(rr(this.auth,"network-request-failed")),XA.get())})}}function Ou(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=rr(r,e,s);return o.customData._tokenResponse=t,o}function yy(r){return r!==void 0&&r.enterprise!==void 0}class eC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return JA(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function tC(r,e){return Ai(r,"GET","/v2/recaptchaConfig",Ri(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nC(r,e){return Ai(r,"POST","/v1/accounts:delete",e)}async function Fv(r,e){return Ai(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function za(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function rC(r,e=!1){const t=zt(r),s=await t.getIdToken(e),o=zf(s);_e(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:o,token:s,authTime:za(Id(o.auth_time)),issuedAtTime:za(Id(o.iat)),expirationTime:za(Id(o.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Id(r){return Number(r)*1e3}function zf(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return Wu("JWT malformed, contained fewer than 3 sections"),null;try{const o=e_(t);return o?JSON.parse(o):(Wu("Failed to decode base64 JWT payload"),null)}catch(o){return Wu("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function _y(r){const e=zf(r);return _e(e,"internal-error"),_e(typeof e.exp<"u","internal-error"),_e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ya(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Or&&iC(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function iC({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=za(this.lastLoginAt),this.creationTime=za(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hc(r){var e;const t=r.auth,s=await r.getIdToken(),o=await Ya(r,Fv(t,{idToken:s}));_e(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];r._notifyReloadListener(l);const h=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?Uv(l.providerUserInfo):[],f=aC(r.providerData,h),p=r.isAnonymous,y=!(r.email&&l.passwordHash)&&!(f!=null&&f.length),E=p?y:!1,T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new Qd(l.createdAt,l.lastLoginAt),isAnonymous:E};Object.assign(r,T)}async function oC(r){const e=zt(r);await hc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function aC(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function Uv(r){return r.map(e=>{var{providerId:t}=e,s=Ff(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lC(r,e){const t=await Mv(r,{},async()=>{const s=rl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=bv(r,o,"/v1/token",`key=${l}`),f=await r._getAdditionalHeaders();return f["Content-Type"]="application/x-www-form-urlencoded",Ov.fetch()(h,{method:"POST",headers:f,body:s})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function uC(r,e){return Ai(r,"POST","/v2/accounts:revokeToken",Ri(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_e(e.idToken,"internal-error"),_e(typeof e.idToken<"u","internal-error"),_e(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_y(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){_e(e.length!==0,"internal-error");const t=_y(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(_e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await lC(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,h=new mo;return s&&(_e(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(_e(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(_e(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new mo,this.toJSON())}_performRefresh(){return Rr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(r,e){_e(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Ar{constructor(e){var{uid:t,auth:s,stsTokenManager:o}=e,l=Ff(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new sC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Qd(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Ya(this,this.stsTokenManager.getToken(this.auth,e));return _e(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return rC(this,e)}reload(){return oC(this)}_assign(e){this!==e&&(_e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ar(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){_e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await hc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Zn(this.auth.app))return Promise.reject(kr(this.auth));const e=await this.getIdToken();return await Ya(this,nC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,o,l,h,f,p,y,E;const T=(s=t.displayName)!==null&&s!==void 0?s:void 0,A=(o=t.email)!==null&&o!==void 0?o:void 0,V=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,L=(h=t.photoURL)!==null&&h!==void 0?h:void 0,j=(f=t.tenantId)!==null&&f!==void 0?f:void 0,O=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,H=(y=t.createdAt)!==null&&y!==void 0?y:void 0,G=(E=t.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:ne,emailVerified:he,isAnonymous:Se,providerData:we,stsTokenManager:N}=t;_e(ne&&N,e,"internal-error");const I=mo.fromJSON(this.name,N);_e(typeof ne=="string",e,"internal-error"),ai(T,e.name),ai(A,e.name),_e(typeof he=="boolean",e,"internal-error"),_e(typeof Se=="boolean",e,"internal-error"),ai(V,e.name),ai(L,e.name),ai(j,e.name),ai(O,e.name),ai(H,e.name),ai(G,e.name);const R=new Ar({uid:ne,auth:e,email:A,emailVerified:he,displayName:T,isAnonymous:Se,photoURL:L,phoneNumber:V,tenantId:j,stsTokenManager:I,createdAt:H,lastLoginAt:G});return we&&Array.isArray(we)&&(R.providerData=we.map(k=>Object.assign({},k))),O&&(R._redirectEventId=O),R}static async _fromIdTokenResponse(e,t,s=!1){const o=new mo;o.updateFromServerResponse(t);const l=new Ar({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await hc(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];_e(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?Uv(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),f=new mo;f.updateFromIdToken(s);const p=new Ar({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:h}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Qd(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy=new Map;function Cr(r){Vr(r instanceof Function,"Expected a class definition");let e=vy.get(r);return e?(Vr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,vy.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}jv.type="NONE";const Ey=jv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ku(r,e,t){return`firebase:${r}:${e}:${t}`}class go{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=Ku(this.userKey,o.apiKey,l),this.fullPersistenceKey=Ku("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ar._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new go(Cr(Ey),e,s);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||Cr(Ey);const h=Ku(s,e.config.apiKey,e.name);let f=null;for(const y of t)try{const E=await y._get(h);if(E){const T=Ar._fromJSON(e,E);y!==l&&(f=T),l=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new go(l,e,s):(l=p[0],f&&await l._set(h,f.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(h)}catch{}})),new go(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wy(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(qv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(zv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Wv(e))return"Blackberry";if(Kv(e))return"Webos";if(Bv(e))return"Safari";if((e.includes("chrome/")||$v(e))&&!e.includes("edge/"))return"Chrome";if(Hv(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function zv(r=jt()){return/firefox\//i.test(r)}function Bv(r=jt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $v(r=jt()){return/crios\//i.test(r)}function qv(r=jt()){return/iemobile/i.test(r)}function Hv(r=jt()){return/android/i.test(r)}function Wv(r=jt()){return/blackberry/i.test(r)}function Kv(r=jt()){return/webos/i.test(r)}function Bf(r=jt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function cC(r=jt()){var e;return Bf(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function hC(){return cI()&&document.documentMode===10}function Gv(r=jt()){return Bf(r)||Hv(r)||Kv(r)||Wv(r)||/windows phone/i.test(r)||qv(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(r,e=[]){let t;switch(r){case"Browser":t=wy(jt());break;case"Worker":t=`${wy(jt())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Co}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((h,f)=>{try{const p=e(l);h(p)}catch(p){f(p)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fC(r,e={}){return Ai(r,"GET","/v2/passwordPolicy",Ri(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC=6;class mC{constructor(e){var t,s,o,l;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=h.minPasswordLength)!==null&&t!==void 0?t:pC,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,o,l,h,f;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(s=p.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(l=p.containsUppercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(h=p.containsNumericCharacter)!==null&&h!==void 0?h:!0),p.isValid&&(p.isValid=(f=p.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),p}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ty(this),this.idTokenSubscription=new Ty(this),this.beforeStateQueue=new dC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Vv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Cr(t)),this._initializationPromise=this.queue(async()=>{var s,o;if(!this._deleted&&(this.persistenceManager=await go.create(this,e),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Fv(this,{idToken:e}),s=await Ar._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Zn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(f,f))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,f=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!h||h===f)&&(p!=null&&p.user)&&(o=p.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return _e(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await hc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=QA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Zn(this.app))return Promise.reject(kr(this));const t=e?zt(e):null;return t&&_e(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&_e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Zn(this.app)?Promise.reject(kr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Zn(this.app)?Promise.reject(kr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Cr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await fC(this),t=new mC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new nl("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await uC(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Cr(e)||this._popupRedirectResolver;_e(t,this,"argument-error"),this.redirectPersistenceManager=await go.create(this,[Cr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(_e(f,this,"internal-error"),f.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,s,o);return()=>{h=!0,p()}}else{const p=e.addObserver(t);return()=>{h=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Qv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&WA(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function ps(r){return zt(r)}class Ty{constructor(e){this.auth=e,this.observer=null,this.addObserver=_I(t=>this.observer=t)}get next(){return _e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function yC(r){Dc=r}function Yv(r){return Dc.loadJS(r)}function _C(){return Dc.recaptchaEnterpriseScript}function vC(){return Dc.gapiScript}function EC(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class wC{constructor(){this.enterprise=new TC}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class TC{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const IC="recaptcha-enterprise",Xv="NO_RECAPTCHA";class SC{constructor(e){this.type=IC,this.auth=ps(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(h,f)=>{tC(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const y=new eC(p);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,h(y.siteKey)}}).catch(p=>{f(p)})})}function o(l,h,f){const p=window.grecaptcha;yy(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(y=>{h(y)}).catch(()=>{h(Xv)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new wC().execute("siteKey",{action:"verify"}):new Promise((l,h)=>{s(this.auth).then(f=>{if(!t&&yy(window.grecaptcha))o(f,l,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let p=_C();p.length!==0&&(p+=f),Yv(p).then(()=>{o(f,l,h)}).catch(y=>{h(y)})}}).catch(f=>{h(f)})})}}async function Iy(r,e,t,s=!1,o=!1){const l=new SC(r);let h;if(o)h=Xv;else try{h=await l.verify(t)}catch{h=await l.verify(t,!0)}const f=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const p=f.phoneEnrollmentInfo.phoneNumber,y=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const p=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return s?Object.assign(f,{captchaResp:h}):Object.assign(f,{captchaResponse:h}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function Yd(r,e,t,s,o){var l;if(!((l=r._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await Iy(r,e,t,t==="getOobCode");return s(r,h)}else return s(r,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await Iy(r,e,t,t==="getOobCode");return s(r,f)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RC(r,e){const t=af(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Ju(l,e??{}))return o;jn(o,"already-initialized")}return t.initialize({options:e})}function AC(r,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(Cr);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function CC(r,e,t){const s=ps(r);_e(s._canInitEmulator,s,"emulator-config-failed"),_e(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=Jv(e),{host:h,port:f}=PC(e),p=f===null?"":`:${f}`;s.config.emulator={url:`${l}//${h}${p}/`},s.settings.appVerificationDisabledForTesting=!0,s.emulatorConfig=Object.freeze({host:h,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})}),kC()}function Jv(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function PC(r){const e=Jv(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:Sy(s.substr(l.length+1))}}else{const[l,h]=s.split(":");return{host:l,port:Sy(h)}}}function Sy(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function kC(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Rr("not implemented")}_getIdTokenResponse(e){return Rr("not implemented")}_linkToIdToken(e,t){return Rr("not implemented")}_getReauthenticationResolver(e){return Rr("not implemented")}}async function NC(r,e){return Ai(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xC(r,e){return cl(r,"POST","/v1/accounts:signInWithPassword",Ri(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DC(r,e){return cl(r,"POST","/v1/accounts:signInWithEmailLink",Ri(r,e))}async function VC(r,e){return cl(r,"POST","/v1/accounts:signInWithEmailLink",Ri(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa extends $f{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Xa(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new Xa(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yd(e,t,"signInWithPassword",xC);case"emailLink":return DC(e,{email:this._email,oobCode:this._password});default:jn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yd(e,s,"signUpPassword",NC);case"emailLink":return VC(e,{idToken:t,email:this._email,oobCode:this._password});default:jn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yo(r,e){return cl(r,"POST","/v1/accounts:signInWithIdp",Ri(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC="http://localhost";class as extends $f{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new as(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):jn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=t,l=Ff(t,["providerId","signInMethod"]);if(!s||!o)return null;const h=new as(s,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return yo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,yo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,yo(e,t)}buildRequest(){const e={requestUri:LC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=rl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OC(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function MC(r){const e=xa(Da(r)).link,t=e?xa(Da(e)).deep_link_id:null,s=xa(Da(r)).deep_link_id;return(s?xa(Da(s)).link:null)||s||t||e||r}class qf{constructor(e){var t,s,o,l,h,f;const p=xa(Da(e)),y=(t=p.apiKey)!==null&&t!==void 0?t:null,E=(s=p.oobCode)!==null&&s!==void 0?s:null,T=OC((o=p.mode)!==null&&o!==void 0?o:null);_e(y&&E&&T,"argument-error"),this.apiKey=y,this.operation=T,this.code=E,this.continueUrl=(l=p.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(h=p.languageCode)!==null&&h!==void 0?h:null,this.tenantId=(f=p.tenantId)!==null&&f!==void 0?f:null}static parseLink(e){const t=MC(e);try{return new qf(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(){this.providerId=Vo.PROVIDER_ID}static credential(e,t){return Xa._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=qf.parseLink(t);return _e(s,"argument-error"),Xa._fromEmailAndCode(e,s.code,s.tenantId)}}Vo.PROVIDER_ID="password";Vo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Vo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl extends Zv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li extends hl{constructor(){super("facebook.com")}static credential(e){return as._fromParams({providerId:li.PROVIDER_ID,signInMethod:li.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return li.credentialFromTaggedObject(e)}static credentialFromError(e){return li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return li.credential(e.oauthAccessToken)}catch{return null}}}li.FACEBOOK_SIGN_IN_METHOD="facebook.com";li.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui extends hl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return as._fromParams({providerId:ui.PROVIDER_ID,signInMethod:ui.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ui.credentialFromTaggedObject(e)}static credentialFromError(e){return ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return ui.credential(t,s)}catch{return null}}}ui.GOOGLE_SIGN_IN_METHOD="google.com";ui.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci extends hl{constructor(){super("github.com")}static credential(e){return as._fromParams({providerId:ci.PROVIDER_ID,signInMethod:ci.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ci.credentialFromTaggedObject(e)}static credentialFromError(e){return ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ci.credential(e.oauthAccessToken)}catch{return null}}}ci.GITHUB_SIGN_IN_METHOD="github.com";ci.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi extends hl{constructor(){super("twitter.com")}static credential(e,t){return as._fromParams({providerId:hi.PROVIDER_ID,signInMethod:hi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return hi.credentialFromTaggedObject(e)}static credentialFromError(e){return hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return hi.credential(t,s)}catch{return null}}}hi.TWITTER_SIGN_IN_METHOD="twitter.com";hi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bC(r,e){return cl(r,"POST","/v1/accounts:signUp",Ri(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await Ar._fromIdTokenResponse(e,s,o),h=Ry(s);return new ls({user:l,providerId:h,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=Ry(s);return new ls({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function Ry(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc extends Or{constructor(e,t,s,o){var l;super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,dc.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new dc(e,t,s,o)}}function eE(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?dc._fromErrorAndOperation(r,l,e,s):l})}async function FC(r,e,t=!1){const s=await Ya(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return ls._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UC(r,e,t=!1){const{auth:s}=r;if(Zn(s.app))return Promise.reject(kr(s));const o="reauthenticate";try{const l=await Ya(r,eE(s,o,e,r),t);_e(l.idToken,s,"internal-error");const h=zf(l.idToken);_e(h,s,"internal-error");const{sub:f}=h;return _e(r.uid===f,s,"user-mismatch"),ls._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&jn(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tE(r,e,t=!1){if(Zn(r.app))return Promise.reject(kr(r));const s="signIn",o=await eE(r,s,e),l=await ls._fromIdTokenResponse(r,s,o);return t||await r._updateCurrentUser(l.user),l}async function jC(r,e){return tE(ps(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nE(r){const e=ps(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function zC(r,e,t){if(Zn(r.app))return Promise.reject(kr(r));const s=ps(r),h=await Yd(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",bC).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&nE(r),p}),f=await ls._fromIdTokenResponse(s,"signIn",h);return await s._updateCurrentUser(f.user),f}function BC(r,e,t){return Zn(r.app)?Promise.reject(kr(r)):jC(zt(r),Vo.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&nE(r),s})}function $C(r,e,t,s){return zt(r).onIdTokenChanged(e,t,s)}function qC(r,e,t){return zt(r).beforeAuthStateChanged(e,t)}function HC(r,e,t,s){return zt(r).onAuthStateChanged(e,t,s)}function WC(r){return zt(r).signOut()}const fc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(fc,"1"),this.storage.removeItem(fc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC=1e3,GC=10;class iE extends rE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Gv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,f,p)=>{this.notifyListeners(h,p)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!t&&this.localCache[s]===h||this.notifyListeners(s,h)},l=this.storage.getItem(s);hC()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,GC):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},KC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}iE.type="LOCAL";const QC=iE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE extends rE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}sE.type="SESSION";const oE=sE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new Vc(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const f=Array.from(h).map(async y=>y(t.origin,l)),p=await YC(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Vc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((f,p)=>{const y=Hf("",20);o.port1.start();const E=setTimeout(()=>{p(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(T){const A=T;if(A.data.eventId===y)switch(A.data.status){case"ack":clearTimeout(E),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(A.data.response);break;default:clearTimeout(E),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(){return window}function JC(r){ir().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aE(){return typeof ir().WorkerGlobalScope<"u"&&typeof ir().importScripts=="function"}async function ZC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function eP(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function tP(){return aE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE="firebaseLocalStorageDb",nP=1,pc="firebaseLocalStorage",uE="fbase_key";class dl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Lc(r,e){return r.transaction([pc],e?"readwrite":"readonly").objectStore(pc)}function rP(){const r=indexedDB.deleteDatabase(lE);return new dl(r).toPromise()}function Xd(){const r=indexedDB.open(lE,nP);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(pc,{keyPath:uE})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(pc)?e(s):(s.close(),await rP(),e(await Xd()))})})}async function Ay(r,e,t){const s=Lc(r,!0).put({[uE]:e,value:t});return new dl(s).toPromise()}async function iP(r,e){const t=Lc(r,!1).get(e),s=await new dl(t).toPromise();return s===void 0?null:s.value}function Cy(r,e){const t=Lc(r,!0).delete(e);return new dl(t).toPromise()}const sP=800,oP=3;class cE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Xd(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>oP)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return aE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Vc._getInstance(tP()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await ZC(),!this.activeServiceWorker)return;this.sender=new XC(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||eP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Xd();return await Ay(e,fc,"1"),await Cy(e,fc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Ay(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>iP(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Cy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Lc(o,!1).getAll();return new dl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),sP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}cE.type="LOCAL";const aP=cE;new ul(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(r,e){return e?Cr(e):(_e(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf extends $f{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return yo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return yo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return yo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function uP(r){return tE(r.auth,new Wf(r),r.bypassAuthState)}function cP(r){const{auth:e,user:t}=r;return _e(t,e,"internal-error"),UC(t,new Wf(r),r.bypassAuthState)}async function hP(r){const{auth:e,user:t}=r;return _e(t,e,"internal-error"),FC(t,new Wf(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:h,type:f}=e;if(h){this.reject(h);return}const p={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return uP;case"linkViaPopup":case"linkViaRedirect":return hP;case"reauthViaPopup":case"reauthViaRedirect":return cP;default:jn(this.auth,"internal-error")}}resolve(e){Vr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP=new ul(2e3,1e4);class ho extends hE{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,ho.currentPopupAction&&ho.currentPopupAction.cancel(),ho.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _e(e,this.auth,"internal-error"),e}async onExecution(){Vr(this.filter.length===1,"Popup operations only handle one event");const e=Hf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(rr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(rr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ho.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(rr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,dP.get())};e()}}ho.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP="pendingRedirect",Gu=new Map;class pP extends hE{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Gu.get(this.auth._key());if(!e){try{const s=await mP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Gu.set(this.auth._key(),e)}return this.bypassAuthState||Gu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function mP(r,e){const t=_P(e),s=yP(r);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function gP(r,e){Gu.set(r._key(),e)}function yP(r){return Cr(r._redirectPersistence)}function _P(r){return Ku(fP,r.config.apiKey,r.name)}async function vP(r,e,t=!1){if(Zn(r.app))return Promise.reject(kr(r));const s=ps(r),o=lP(s,e),h=await new pP(s,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP=10*60*1e3;class wP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!TP(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!dE(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError(rr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=EP&&this.cachedEventUids.clear(),this.cachedEventUids.has(Py(e))}saveEventToCache(e){this.cachedEventUids.add(Py(e)),this.lastProcessedEventTime=Date.now()}}function Py(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function dE({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function TP(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dE(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IP(r,e={}){return Ai(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,RP=/^https?/;async function AP(r){if(r.config.emulator)return;const{authorizedDomains:e}=await IP(r);for(const t of e)try{if(CP(t))return}catch{}jn(r,"unauthorized-domain")}function CP(r){const e=Gd(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===s}if(!RP.test(t))return!1;if(SP.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PP=new ul(3e4,6e4);function ky(){const r=ir().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function kP(r){return new Promise((e,t)=>{var s,o,l;function h(){ky(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ky(),t(rr(r,"network-request-failed"))},timeout:PP.get()})}if(!((o=(s=ir().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=ir().gapi)===null||l===void 0)&&l.load)h();else{const f=EC("iframefcb");return ir()[f]=()=>{gapi.load?h():t(rr(r,"network-request-failed"))},Yv(`${vC()}?onload=${f}`).catch(p=>t(p))}}).catch(e=>{throw Qu=null,e})}let Qu=null;function NP(r){return Qu=Qu||kP(r),Qu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xP=new ul(5e3,15e3),DP="__/auth/iframe",VP="emulator/auth/iframe",LP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},OP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function MP(r){const e=r.config;_e(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?jf(e,VP):`https://${r.config.authDomain}/${DP}`,s={apiKey:e.apiKey,appName:r.name,v:Co},o=OP.get(r.config.apiHost);o&&(s.eid=o);const l=r._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${rl(s).slice(1)}`}async function bP(r){const e=await NP(r),t=ir().gapi;return _e(t,r,"internal-error"),e.open({where:document.body,url:MP(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:LP,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const h=rr(r,"network-request-failed"),f=ir().setTimeout(()=>{l(h)},xP.get());function p(){ir().clearTimeout(f),o(s)}s.ping(p).then(p,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},UP=500,jP=600,zP="_blank",BP="http://localhost";class Ny{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $P(r,e,t,s=UP,o=jP){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const p=Object.assign(Object.assign({},FP),{width:s.toString(),height:o.toString(),top:l,left:h}),y=jt().toLowerCase();t&&(f=$v(y)?zP:t),zv(y)&&(e=e||BP,p.scrollbars="yes");const E=Object.entries(p).reduce((A,[V,L])=>`${A}${V}=${L},`,"");if(cC(y)&&f!=="_self")return qP(e||"",f),new Ny(null);const T=window.open(e||"",f,E);_e(T,r,"popup-blocked");try{T.focus()}catch{}return new Ny(T)}function qP(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HP="__/auth/handler",WP="emulator/auth/handler",KP=encodeURIComponent("fac");async function xy(r,e,t,s,o,l){_e(r.config.authDomain,r,"auth-domain-config-required"),_e(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:Co,eventId:o};if(e instanceof Zv){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",yI(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,T]of Object.entries({}))h[E]=T}if(e instanceof hl){const E=e.getScopes().filter(T=>T!=="");E.length>0&&(h.scopes=E.join(","))}r.tenantId&&(h.tid=r.tenantId);const f=h;for(const E of Object.keys(f))f[E]===void 0&&delete f[E];const p=await r._getAppCheckToken(),y=p?`#${KP}=${encodeURIComponent(p)}`:"";return`${GP(r)}?${rl(f).slice(1)}${y}`}function GP({config:r}){return r.emulator?jf(r,WP):`https://${r.authDomain}/${HP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sd="webStorageSupport";class QP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=oE,this._completeRedirectFn=vP,this._overrideRedirectResult=gP}async _openPopup(e,t,s,o){var l;Vr((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const h=await xy(e,t,s,Gd(),o);return $P(e,h,Hf())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await xy(e,t,s,Gd(),o);return JC(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Vr(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await bP(e),s=new wP(e);return t.register("authEvent",o=>(_e(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Sd,{type:Sd},o=>{var l;const h=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[Sd];h!==void 0&&t(!!h),jn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=AP(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Gv()||Bv()||Bf()}}const YP=QP;var Dy="@firebase/auth",Vy="1.8.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){_e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JP(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ZP(r){_o(new ss("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:f}=s.options;_e(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:h,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Qv(r)},y=new gC(s,o,l,p);return AC(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),_o(new ss("auth-internal",e=>{const t=ps(e.getProvider("auth").getImmediate());return(s=>new XP(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),mi(Dy,Vy,JP(r)),mi(Dy,Vy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ek=5*60,tk=r_("authIdTokenMaxAge")||ek;let Ly=null;const nk=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>tk)return;const o=t==null?void 0:t.token;Ly!==o&&(Ly=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function rk(r=a_()){const e=af(r,"auth");if(e.isInitialized())return e.getImmediate();const t=RC(r,{popupRedirectResolver:YP,persistence:[aP,QC,oE]}),s=r_("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const h=nk(l.toString());qC(t,h,()=>h(t.currentUser)),$C(t,f=>h(f))}}const o=t_("auth");return o&&CC(t,`http://${o}`),t}function ik(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}yC({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const l=rr("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",ik().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ZP("Browser");const sk={apiKey:"AIzaSyDn-j_vnVpbKX1ST_z8KJthrn19UXXxPls",authDomain:"aquela-compra.firebaseapp.com",projectId:"aquela-compra",storageBucket:"aquela-compra.firebasestorage.app",messagingSenderId:"837975569108",appId:"1:837975569108:web:ece04de4b5dfe2fa1bc141",measurementId:"G-RN3PKHC4XN"},fE=o_(sk),Rd=TA(fE),Mu=rk(fE),pE=q.createContext(),ok=({children:r})=>{const[e,t]=q.useState(null),[s,o]=q.useState(!0);q.useEffect(()=>{const L=HC(Mu,j=>{t(j),o(!1)});return()=>L()},[]);const l=async(L,j)=>{try{return(await BC(Mu,L,j)).user}catch(O){throw console.error("Erro ao fazer login:",O.message),O}},h=async(L,j)=>{try{return(await zC(Mu,L,j)).user}catch(O){throw console.error("Erro ao registrar usurio:",O.message),O}},f=async()=>{try{await WC(Mu)}catch(L){throw console.error("Erro ao fazer logout:",L.message),L}},p=async L=>{if(e)try{await BA(hy(Rd,"itens"),{nome:L,usuario:e.uid})}catch(j){console.error("Erro ao adicionar item:",j)}},[y,E]=q.useState([]),[T,A]=q.useState(!0);q.useEffect(()=>{if(!e){E([]),A(!1);return}A(!0);const L=OA(hy(Rd,"itens"),MA("usuario","==",e.uid)),j=$A(L,O=>{const H=O.docs.map(G=>({id:G.id,...G.data()}));E(H),A(!1)});return()=>j()},[e]);const V=async L=>{try{await zA(_v(Rd,"itens",L))}catch(j){console.error("Erro ao deletar item:",j)}};return ie.jsx(pE.Provider,{value:{user:e,login:l,register:h,logout:f,registraItem:p,lista:y,deletaItem:V,loadingLista:T},children:!s&&r})},Kf=()=>q.useContext(pE),ak="_login_8ja4j_2",lk="_form1_8ja4j_13",uk="_lfp_8ja4j_19",ck="_ltitulo1_8ja4j_29",hk="_email_8ja4j_41",dk="_senha_8ja4j_51",fk="_botoes_login_8ja4j_63",pk="_blb_8ja4j_70",mk="_bli_8ja4j_84",gk="_registro_8ja4j_107",yk="_rfp_8ja4j_124",_k="_rtitulo1_8ja4j_134",vk="_botoes_registro_8ja4j_146",Ek="_brb_8ja4j_153",wk="_bri_8ja4j_167",Tk="_caixa_8ja4j_190",Ik="_label_8ja4j_200",Sk="_error_8ja4j_209",Be={login:ak,form1:lk,lfp:uk,ltitulo1:ck,email:hk,senha:dk,botoes_login:fk,blb:pk,bli:mk,registro:gk,rfp:yk,rtitulo1:_k,botoes_registro:vk,brb:Ek,bri:wk,caixa:Tk,label:Ik,error:Sk},Rk=()=>{const[r,e]=q.useState(""),t=I=>e(I.target.value),[s,o]=q.useState(""),l=I=>o(I.target.value),{user:h,register:f,login:p}=Kf(),[y,E]=q.useState(""),T=el(),A=I=>({"auth/email-already-in-use":"Este e-mail j est em uso. Tente outro ou faa login.","auth/invalid-email":"O e-mail informado no  vlido. Verifique e tente novamente.","auth/user-not-found":"Nenhum usurio encontrado com este e-mail. Verifique ou registre-se.","auth/wrong-password":"Senha incorreta. Verifique e tente novamente.","auth/weak-password":"A senha deve ter pelo menos 6 caracteres.","auth/network-request-failed":"Falha de conexo. Verifique sua internet.","auth/too-many-requests":"Muitas tentativas seguidas. Aguarde um momento e tente novamente.","auth/invalid-credential":"Possvel e-mail ou senha invlidos, verifique."})[I]||"Ocorreu um erro inesperado. Tente novamente mais tarde.",V=async I=>{if(I.preventDefault(),L){E(""),he(!0);try{await p(r,s)&&(e(""),o(""),T("/lista"),he(!1))}catch(R){console.log(R.code),E(A(R.code)),he(!1)}}else{E(""),N(!0);try{await f(r,s)&&(e(""),o(""),T("/lista"),N(!1))}catch(R){E(A(R.code)),N(!1)}}},[L,j]=q.useState(!0),O=()=>{j(!L),H.current.focus()},H=q.useRef();q.useEffect(()=>{h?T("/lista"):H.current.focus()},[]);const[G,ne]=q.useState(!1),he=I=>ne(I),[Se,we]=q.useState(!1),N=I=>we(I);return q.useEffect(()=>{H.current.focus()},[G,Se]),ie.jsx(ie.Fragment,{children:L?ie.jsxs("section",{className:Be.login,children:[ie.jsx("h1",{className:Be.ltitulo1,children:"Faa o Login"}),ie.jsxs("form",{className:Be.form1,onSubmit:V,children:[ie.jsxs("div",{className:Be.email,children:[ie.jsx("label",{className:Be.label,htmlFor:"email",children:"E-mail"}),ie.jsx("input",{className:Be.caixa,type:"email",name:"email",id:"email",value:r,onChange:t,ref:H})]}),ie.jsxs("div",{className:Be.senha,children:[ie.jsx("label",{className:Be.label,htmlFor:"senha",children:"Senha"}),ie.jsx("input",{className:Be.caixa,type:"password",name:"senha",id:"senha",value:s,onChange:l})]}),G?ie.jsx("p",{className:Be.lfp,children:"Fazendo o login"}):ie.jsxs("div",{className:Be.botoes_login,children:[ie.jsx("button",{className:Be.blb,type:"button",onClick:O,children:"Registrar"}),ie.jsx("input",{className:Be.bli,type:"submit",value:"Entrar"})]})]}),y&&ie.jsx("p",{className:Be.error,children:y})]}):ie.jsxs("section",{className:Be.registro,children:[ie.jsx("h1",{className:Be.rtitulo1,children:"Faa o Registro"}),ie.jsxs("form",{className:Be.form1,onSubmit:V,children:[ie.jsxs("div",{className:Be.email,children:[ie.jsx("label",{className:Be.label,htmlFor:"email",children:"E-mail"}),ie.jsx("input",{className:Be.caixa,type:"email",name:"email",id:"email",value:r,onChange:t,ref:H})]}),ie.jsxs("div",{className:Be.senha,children:[ie.jsx("label",{className:Be.label,htmlFor:"senha",children:"Senha"}),ie.jsx("input",{className:Be.caixa,type:"password",name:"senha",id:"senha",value:s,onChange:l})]}),Se?ie.jsx("p",{className:Be.rfp,children:"Fazendo o registro"}):ie.jsxs("div",{className:Be.botoes_registro,children:[ie.jsx("button",{className:Be.brb,type:"button",onClick:O,children:"Entrar"}),ie.jsx("input",{className:Be.bri,type:"submit",value:"Registrar"})]})]}),y&&ie.jsx("p",{className:Be.error,children:y})]})})},Ak="_secao_jfr8b_1",Ck="_titulo1_jfr8b_6",Pk="_itemlista_jfr8b_16",kk="_lb_jfr8b_35",Nk="_registrar_jfr8b_54",xk="_novoregistro_jfr8b_69",Dk="_novoregistrof_jfr8b_73",Vk="_novoregistrofi_jfr8b_82",Lk="_nrformsub_jfr8b_93",Ok="_label_jfr8b_109",En={secao:Ak,titulo1:Ck,itemlista:Pk,lb:kk,registrar:Nk,novoregistro:xk,novoregistrof:Dk,novoregistrofi:Vk,nrformsub:Lk,label:Ok},Mk=()=>{const{user:r,registraItem:e,lista:t,deletaItem:s,loadingLista:o}=Kf(),l=el(),h=j=>{j.preventDefault(),e(f),p(""),A()},[f,p]=q.useState(""),y=j=>p(j.target.value),[E,T]=q.useState(!1),A=()=>T(!E),V=q.useRef();q.useEffect(()=>{E==!0&&V.current.focus()},[E]),q.useEffect(()=>{r||l("/")},[]);const L=j=>{window.confirm("Deseja realmente deletar este item?")&&s(j)};return ie.jsxs("section",{className:En.secao,children:[o?ie.jsx("h1",{className:En.titulo1,children:"Carregando sua lista..."}):t.length?ie.jsxs(ie.Fragment,{children:[ie.jsx("h1",{className:En.titulo1,children:"Lista de compras:"}),ie.jsx("ul",{children:t.map(j=>ie.jsxs("li",{className:En.itemlista,children:["-",j.nome,ie.jsx("button",{className:En.lb,onClick:()=>L(j.id),children:"X"})]},j.id))})]}):ie.jsx("h1",{className:En.titulo1,children:"Sua lista de compras est vazia"}),ie.jsx("button",{className:En.registrar,onClick:A,children:"+"}),E&&ie.jsx("div",{className:En.novoregistro,children:ie.jsxs("form",{className:En.novoregistrof,onSubmit:h,children:[ie.jsx("label",{className:En.label,htmlFor:"item",children:"Item"}),ie.jsx("input",{className:En.novoregistrofi,type:"text",name:"item",id:"item",value:f,onChange:y,ref:V}),ie.jsx("input",{type:"submit",value:"Registrar",className:En.nrformsub})]})})]})},bk="_container_ok129_1",Fk="_titulo1_ok129_6",Oy={container:bk,titulo1:Fk},Uk=()=>{const r=el();return q.useEffect(()=>{const e=setTimeout(()=>{r("/")},2500);return()=>clearTimeout(e)},[r]),ie.jsx("section",{className:Oy.container,children:ie.jsx("h1",{className:Oy.titulo1,children:"A pagina requisitada no existe, redirecionando para o incio..."})})},jk="_header_q482j_1",zk="_dev_q482j_8",Bk="_deva_q482j_18",$k="_nav_q482j_31",qk="_container1s_q482j_39",Hk="_navb_q482j_49",ts={header:jk,dev:zk,deva:Bk,nav:$k,container1s:qk,navb:Hk},Wk=()=>{const e=Si().pathname==="/",t=el(),{logout:s}=Kf(),o=async()=>{try{await s(),t("/")}catch(l){console.error("Erro ao fazer logout:",l.message)}};return ie.jsxs("header",{className:ts.header,children:[ie.jsxs("div",{className:ts.dev,children:[ie.jsx("a",{className:ts.deva,href:"https://github.com/defren-gabriel/aquela-compra",target:"_blank",children:"Link do Projeto"}),ie.jsx("a",{className:ts.deva,href:"https://github.com/defren-gabriel",target:"_blank",children:"Link do DeFrEn"})]}),ie.jsxs("nav",{className:ts.nav,children:[ie.jsx("span",{className:ts.container1s,children:"Aquela Compra"}),ie.jsx("button",{className:ts.navb,style:{display:e?"none":"block"},disabled:e,onClick:()=>o(),children:"Sair"})]})]})},Kk=()=>ie.jsx(ie.Fragment,{children:ie.jsxs(UT,{children:[ie.jsx(Wk,{}),ie.jsxs(mT,{children:[ie.jsx(bu,{path:"/",element:ie.jsx(Rk,{})}),ie.jsx(bu,{path:"/lista",element:ie.jsx(Mk,{})}),ie.jsx(bu,{path:"*",element:ie.jsx(Uk,{})})]})]})});Rw.createRoot(document.getElementById("root")).render(ie.jsx(q.StrictMode,{children:ie.jsx(ok,{children:ie.jsx(Kk,{})})}));
